!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).igv_webapp={})}(this,(function(e){"use strict";function t(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}function i(e){return e.includes("googleapis")&&!e.includes("urlshortener")||n(e)||r(e)}function n(e){return e.startsWith("gs://")||e.startsWith("https://www.googleapis.com/storage")||e.startsWith("https://storage.cloud.google.com")||e.startsWith("https://storage.googleapis.com")}function r(e){return e.indexOf("drive.google.com")>=0||e.indexOf("www.googleapis.com/drive")>0}function a(e){let{bucket:t,object:i}=function(e){let t,i;if(e.startsWith("gs://")){const n=e.indexOf("/",5);if(n>=0){t=e.substring(5,n);const r=e.indexOf("?");i=r<0?e.substring(n+1):e.substring(n+1,r)}}else if(e.startsWith("https://storage.googleapis.com")||e.startsWith("https://storage.cloud.google.com")){const n=e.indexOf("/v1/b/",8);if(n>0){const r=e.indexOf("/o/",n);if(r>0){const a=e.indexOf("?",r);t=e.substring(n+6,r),i=a>0?e.substring(r+3,a):e.substring(r+3)}}else{const n=e.indexOf("/",8),r=e.indexOf("/",n+1),a=e.indexOf("?",r);r>0&&(t=e.substring(n+1,r),i=a<0?e.substring(r+1):e.substring(r+1,a))}}else if(e.startsWith("https://www.googleapis.com/storage/v1/b")){const n=e.indexOf("/v1/b/",8),r=e.indexOf("/o/",n);if(r>0){const a=e.indexOf("?",r);t=e.substring(n+6,r),i=a>0?e.substring(r+3,a):e.substring(r+3)}}if(t&&i)return{bucket:t,object:i};throw Error(`Unrecognized Google Storage URI: ${e}`)}(e);i=function(e){let t="";return e.split("").forEach((function(e){o.has(e)?t+=o.get(e):t+=e})),t}(i);const n=e.indexOf("?");return`https://storage.googleapis.com/storage/v1/b/${t}/o/${i}${n>0?e.substring(n)+"&alt=media":"?alt=media"}`}function s(e){var t=function(e){if(e.includes("/open?id=")){const t=e.indexOf("/open?id=")+9,i=e.indexOf("&");if(t>0&&i>t)return e.substring(t,i);if(t>0)return e.substring(t)}else{if(e.includes("/file/d/")){const t=e.indexOf("/file/d/")+8,i=e.lastIndexOf("/");return e.substring(t,i)}if(e.startsWith("https://www.googleapis.com/drive")){let t=e.indexOf("/files/");const i=e.indexOf("?");if(t>0)return t+=7,i>0?e.substring(t,i):e.substring(t)}}throw Error("Unknown Google Drive url format: "+e)}(e);return t?"https://www.googleapis.com/drive/v3/files/"+t+"?alt=media&supportsTeamDrives=true":e}const o=new Map;o.set("!","%21"),o.set("#","%23"),o.set("$","%24"),o.set("%","%25"),o.set("&","%26"),o.set("'","%27"),o.set("(","%28"),o.set(")","%29"),o.set("*","%2A"),o.set("+","%2B"),o.set(",","%2C"),o.set("/","%2F"),o.set(":","%3A"),o.set(";","%3B"),o.set("=","%3D"),o.set("?","%3F"),o.set("@","%40"),o.set("[","%5B"),o.set("]","%5D"),o.set(" ","%20");async function l(e){if(c())return void console.warn("oAuth has already been initialized");gapi.apiKey=e.apiKey;const t=Object.assign({},e);return t.scope||(t.scope="profile"),e.client_id||(e.client_id=e.clientId),await async function(e){return new Promise((function(t,i){gapi.load(e,{callback:t,onerror:i})}))}("auth2"),new Promise((function(e,i){gapi.auth2.init(t).then(e,i)}))}function c(){return"undefined"!=typeof gapi&&gapi.auth2&&gapi.auth2.getAuthInstance()}let h=!1;async function f(e){if("undefined"==typeof gapi)throw Error("Google authentication requires the 'gapi' library");if(!gapi.auth2)throw Error("Google 'auth2' has not been initialized");if(h)return new Promise((function(t,i){let n;n=setInterval((()=>{try{!1===h&&(t(f(e)),clearInterval(n))}catch(e){clearInterval(n),i(e)}}),100)}));h=!0;try{let t,i=gapi.auth2.getAuthInstance().currentUser.get();if(i.isSignedIn()){i.hasGrantedScopes(e)||await i.grant({scope:e});const{access_token:n,expires_at:r}=i.getAuthResponse();if(Date.now()<r-3e5)t={access_token:n,expires_at:r};else{const{access_token:e,expires_at:n}=i.reloadAuthResponse();t={access_token:e,expires_at:n}}}else{i=await async function(e){const t=new gapi.auth2.SigninOptionsBuilder;return t.setPrompt("select_account"),t.setScope(e),gapi.auth2.getAuthInstance().signIn(t)}(e);const{access_token:n,expires_at:r}=i.getAuthResponse();t={access_token:n,expires_at:r}}return t}finally{h=!1}}"object"==typeof process&&"undefined"==typeof window&&(global.atob=function(e){return Buffer.from(e,"base64").toString("binary")});const d={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};function u(e){return!!e&&("function"!=typeof e&&(e instanceof File||e.hasOwnProperty("name")&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer))}const p=u;
/*! pako 2.0.4 https://github.com/nodeca/pako @license (MIT AND Zlib) */function g(e){let t=e.length;for(;--t>=0;)e[t]=0}const w=256,m=286,b=30,y=15,v=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),_=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),k=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),x=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),E=new Array(576);g(E);const S=new Array(60);g(S);const R=new Array(512);g(R);const T=new Array(256);g(T);const D=new Array(29);g(D);const C=new Array(b);function A(e,t,i,n,r){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=e&&e.length}let L,B,I;function z(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}g(C);const O=e=>e<256?R[e]:R[256+(e>>>7)],U=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},M=(e,t,i)=>{e.bi_valid>16-i?(e.bi_buf|=t<<e.bi_valid&65535,U(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=i-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)},F=(e,t,i)=>{M(e,i[2*t],i[2*t+1])},H=(e,t)=>{let i=0;do{i|=1&e,e>>>=1,i<<=1}while(--t>0);return i>>>1},N=(e,t,i)=>{const n=new Array(16);let r,a,s=0;for(r=1;r<=y;r++)n[r]=s=s+i[r-1]<<1;for(a=0;a<=t;a++){let t=e[2*a+1];0!==t&&(e[2*a]=H(n[t]++,t))}},P=e=>{let t;for(t=0;t<m;t++)e.dyn_ltree[2*t]=0;for(t=0;t<b;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},Z=e=>{e.bi_valid>8?U(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},K=(e,t,i,n)=>{const r=2*t,a=2*i;return e[r]<e[a]||e[r]===e[a]&&n[t]<=n[i]},q=(e,t,i)=>{const n=e.heap[i];let r=i<<1;for(;r<=e.heap_len&&(r<e.heap_len&&K(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!K(t,n,e.heap[r],e.depth));)e.heap[i]=e.heap[r],i=r,r<<=1;e.heap[i]=n},G=(e,t,i)=>{let n,r,a,s,o=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*o]<<8|e.pending_buf[e.d_buf+2*o+1],r=e.pending_buf[e.l_buf+o],o++,0===n?F(e,r,t):(a=T[r],F(e,a+w+1,t),s=v[a],0!==s&&(r-=D[a],M(e,r,s)),n--,a=O(n),F(e,a,i),s=_[a],0!==s&&(n-=C[a],M(e,n,s)))}while(o<e.last_lit);F(e,256,t)},j=(e,t)=>{const i=t.dyn_tree,n=t.stat_desc.static_tree,r=t.stat_desc.has_stree,a=t.stat_desc.elems;let s,o,l,c=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<a;s++)0!==i[2*s]?(e.heap[++e.heap_len]=c=s,e.depth[s]=0):i[2*s+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,i[2*l]=1,e.depth[l]=0,e.opt_len--,r&&(e.static_len-=n[2*l+1]);for(t.max_code=c,s=e.heap_len>>1;s>=1;s--)q(e,i,s);l=a;do{s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],q(e,i,1),o=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=o,i[2*l]=i[2*s]+i[2*o],e.depth[l]=(e.depth[s]>=e.depth[o]?e.depth[s]:e.depth[o])+1,i[2*s+1]=i[2*o+1]=l,e.heap[1]=l++,q(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const i=t.dyn_tree,n=t.max_code,r=t.stat_desc.static_tree,a=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,o=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,h,f,d,u,p,g=0;for(d=0;d<=y;d++)e.bl_count[d]=0;for(i[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)h=e.heap[c],d=i[2*i[2*h+1]+1]+1,d>l&&(d=l,g++),i[2*h+1]=d,h>n||(e.bl_count[d]++,u=0,h>=o&&(u=s[h-o]),p=i[2*h],e.opt_len+=p*(d+u),a&&(e.static_len+=p*(r[2*h+1]+u)));if(0!==g){do{for(d=l-1;0===e.bl_count[d];)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[l]--,g-=2}while(g>0);for(d=l;0!==d;d--)for(h=e.bl_count[d];0!==h;)f=e.heap[--c],f>n||(i[2*f+1]!==d&&(e.opt_len+=(d-i[2*f+1])*i[2*f],i[2*f+1]=d),h--)}})(e,t),N(i,c,e.bl_count)},W=(e,t,i)=>{let n,r,a=-1,s=t[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),t[2*(i+1)+1]=65535,n=0;n<=i;n++)r=s,s=t[2*(n+1)+1],++o<l&&r===s||(o<c?e.bl_tree[2*r]+=o:0!==r?(r!==a&&e.bl_tree[2*r]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,a=r,0===s?(l=138,c=3):r===s?(l=6,c=3):(l=7,c=4))},V=(e,t,i)=>{let n,r,a=-1,s=t[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),n=0;n<=i;n++)if(r=s,s=t[2*(n+1)+1],!(++o<l&&r===s)){if(o<c)do{F(e,r,e.bl_tree)}while(0!=--o);else 0!==r?(r!==a&&(F(e,r,e.bl_tree),o--),F(e,16,e.bl_tree),M(e,o-3,2)):o<=10?(F(e,17,e.bl_tree),M(e,o-3,3)):(F(e,18,e.bl_tree),M(e,o-11,7));o=0,a=r,0===s?(l=138,c=3):r===s?(l=6,c=3):(l=7,c=4)}};let Y=!1;const X=(e,t,i,n)=>{M(e,0+(n?1:0),3),((e,t,i,n)=>{Z(e),n&&(U(e,i),U(e,~i)),e.pending_buf.set(e.window.subarray(t,t+i),e.pending),e.pending+=i})(e,t,i,!0)};var J=(e,t,i,n)=>{let r,a,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,i=4093624447;for(t=0;t<=31;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<w;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),j(e,e.l_desc),j(e,e.d_desc),s=(e=>{let t;for(W(e,e.dyn_ltree,e.l_desc.max_code),W(e,e.dyn_dtree,e.d_desc.max_code),j(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*x[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),r=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=r&&(r=a)):r=a=i+5,i+4<=r&&-1!==t?X(e,t,i,n):4===e.strategy||a===r?(M(e,2+(n?1:0),3),G(e,E,S)):(M(e,4+(n?1:0),3),((e,t,i,n)=>{let r;for(M(e,t-257,5),M(e,i-1,5),M(e,n-4,4),r=0;r<n;r++)M(e,e.bl_tree[2*x[r]+1],3);V(e,e.dyn_ltree,t-1),V(e,e.dyn_dtree,i-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),G(e,e.dyn_ltree,e.dyn_dtree)),P(e),n&&Z(e)},Q={_tr_init:e=>{Y||((()=>{let e,t,i,n,r;const a=new Array(16);for(i=0,n=0;n<28;n++)for(D[n]=i,e=0;e<1<<v[n];e++)T[i++]=n;for(T[i-1]=n,r=0,n=0;n<16;n++)for(C[n]=r,e=0;e<1<<_[n];e++)R[r++]=n;for(r>>=7;n<b;n++)for(C[n]=r<<7,e=0;e<1<<_[n]-7;e++)R[256+r++]=n;for(t=0;t<=y;t++)a[t]=0;for(e=0;e<=143;)E[2*e+1]=8,e++,a[8]++;for(;e<=255;)E[2*e+1]=9,e++,a[9]++;for(;e<=279;)E[2*e+1]=7,e++,a[7]++;for(;e<=287;)E[2*e+1]=8,e++,a[8]++;for(N(E,287,a),e=0;e<b;e++)S[2*e+1]=5,S[2*e]=H(e,5);L=new A(E,v,257,m,y),B=new A(S,_,0,b,y),I=new A(new Array(0),k,0,19,7)})(),Y=!0),e.l_desc=new z(e.dyn_ltree,L),e.d_desc=new z(e.dyn_dtree,B),e.bl_desc=new z(e.bl_tree,I),e.bi_buf=0,e.bi_valid=0,P(e)},_tr_stored_block:X,_tr_flush_block:J,_tr_tally:(e,t,i)=>(e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&i,e.last_lit++,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(T[i]+w+1)]++,e.dyn_dtree[2*O(t)]++),e.last_lit===e.lit_bufsize-1),_tr_align:e=>{M(e,2,3),F(e,256,E),(e=>{16===e.bi_valid?(U(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}};var ee=(e,t,i,n)=>{let r=65535&e|0,a=e>>>16&65535|0,s=0;for(;0!==i;){s=i>2e3?2e3:i,i-=s;do{r=r+t[n++]|0,a=a+r|0}while(--s);r%=65521,a%=65521}return r|a<<16|0};const te=new Uint32Array((()=>{let e,t=[];for(var i=0;i<256;i++){e=i;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t})());var ie=(e,t,i,n)=>{const r=te,a=n+i;e^=-1;for(let i=n;i<a;i++)e=e>>>8^r[255&(e^t[i])];return-1^e},ne={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},re={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:ae,_tr_stored_block:se,_tr_flush_block:oe,_tr_tally:le,_tr_align:ce}=Q,{Z_NO_FLUSH:he,Z_PARTIAL_FLUSH:fe,Z_FULL_FLUSH:de,Z_FINISH:ue,Z_BLOCK:pe,Z_OK:ge,Z_STREAM_END:we,Z_STREAM_ERROR:me,Z_DATA_ERROR:be,Z_BUF_ERROR:ye,Z_DEFAULT_COMPRESSION:ve,Z_FILTERED:_e,Z_HUFFMAN_ONLY:ke,Z_RLE:xe,Z_FIXED:Ee,Z_DEFAULT_STRATEGY:Se,Z_UNKNOWN:Re,Z_DEFLATED:Te}=re,De=258,Ce=262,Ae=103,Le=113,Be=666,Ie=(e,t)=>(e.msg=ne[t],t),ze=e=>(e<<1)-(e>4?9:0),Oe=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let Ue=(e,t,i)=>(t<<e.hash_shift^i)&e.hash_mask;const Me=e=>{const t=e.state;let i=t.pending;i>e.avail_out&&(i=e.avail_out),0!==i&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+i),e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))},Fe=(e,t)=>{oe(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Me(e.strm)},He=(e,t)=>{e.pending_buf[e.pending++]=t},Ne=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Pe=(e,t,i,n)=>{let r=e.avail_in;return r>n&&(r=n),0===r?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),i),1===e.state.wrap?e.adler=ee(e.adler,t,r,i):2===e.state.wrap&&(e.adler=ie(e.adler,t,r,i)),e.next_in+=r,e.total_in+=r,r)},$e=(e,t)=>{let i,n,r=e.max_chain_length,a=e.strstart,s=e.prev_length,o=e.nice_match;const l=e.strstart>e.w_size-Ce?e.strstart-(e.w_size-Ce):0,c=e.window,h=e.w_mask,f=e.prev,d=e.strstart+De;let u=c[a+s-1],p=c[a+s];e.prev_length>=e.good_match&&(r>>=2),o>e.lookahead&&(o=e.lookahead);do{if(i=t,c[i+s]===p&&c[i+s-1]===u&&c[i]===c[a]&&c[++i]===c[a+1]){a+=2,i++;do{}while(c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&a<d);if(n=De-(d-a),a=d-De,n>s){if(e.match_start=t,s=n,n>=o)break;u=c[a+s-1],p=c[a+s]}}}while((t=f[t&h])>l&&0!=--r);return s<=e.lookahead?s:e.lookahead},Ze=e=>{const t=e.w_size;let i,n,r,a,s;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Ce)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,n=e.hash_size,i=n;do{r=e.head[--i],e.head[i]=r>=t?r-t:0}while(--n);n=t,i=n;do{r=e.prev[--i],e.prev[i]=r>=t?r-t:0}while(--n);a+=t}if(0===e.strm.avail_in)break;if(n=Pe(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=n,e.lookahead+e.insert>=3)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=Ue(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=Ue(e,e.ins_h,e.window[s+3-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Ce&&0!==e.strm.avail_in)},Ke=(e,t)=>{let i,n;for(;;){if(e.lookahead<Ce){if(Ze(e),e.lookahead<Ce&&t===he)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=3&&(e.ins_h=Ue(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-Ce&&(e.match_length=$e(e,i)),e.match_length>=3)if(n=le(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Ue(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Ue(e,e.ins_h,e.window[e.strstart+1]);else n=le(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(Fe(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===ue?(Fe(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Fe(e,!1),0===e.strm.avail_out)?1:2},qe=(e,t)=>{let i,n,r;for(;;){if(e.lookahead<Ce){if(Ze(e),e.lookahead<Ce&&t===he)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=3&&(e.ins_h=Ue(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-Ce&&(e.match_length=$e(e,i),e.match_length<=5&&(e.strategy===_e||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,n=le(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=Ue(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(Fe(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(n=le(e,0,e.window[e.strstart-1]),n&&Fe(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=le(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===ue?(Fe(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Fe(e,!1),0===e.strm.avail_out)?1:2};function Ge(e,t,i,n,r){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=n,this.func=r}const je=[new Ge(0,0,0,0,((e,t)=>{let i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Ze(e),0===e.lookahead&&t===he)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;const n=e.block_start+i;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,Fe(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-Ce&&(Fe(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ue?(Fe(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(Fe(e,!1),e.strm.avail_out),1)})),new Ge(4,4,8,4,Ke),new Ge(4,5,16,8,Ke),new Ge(4,6,32,32,Ke),new Ge(4,4,16,16,qe),new Ge(8,16,32,32,qe),new Ge(8,16,128,128,qe),new Ge(8,32,128,256,qe),new Ge(32,128,258,1024,qe),new Ge(32,258,258,4096,qe)];function We(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Te,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Oe(this.dyn_ltree),Oe(this.dyn_dtree),Oe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Oe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Oe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Ve=e=>{if(!e||!e.state)return Ie(e,me);e.total_in=e.total_out=0,e.data_type=Re;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:Le,e.adler=2===t.wrap?0:1,t.last_flush=he,ae(t),ge},Ye=e=>{const t=Ve(e);var i;return t===ge&&((i=e.state).window_size=2*i.w_size,Oe(i.head),i.max_lazy_match=je[i.level].max_lazy,i.good_match=je[i.level].good_length,i.nice_match=je[i.level].nice_length,i.max_chain_length=je[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=2,i.match_available=0,i.ins_h=0),t},Xe=(e,t,i,n,r,a)=>{if(!e)return me;let s=1;if(t===ve&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),r<1||r>9||i!==Te||n<8||n>15||t<0||t>9||a<0||a>Ee)return Ie(e,me);8===n&&(n=9);const o=new We;return e.state=o,o.strm=e,o.wrap=s,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=r+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<r+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=t,o.strategy=a,o.method=i,Ye(e)};var Je={deflateInit:(e,t)=>Xe(e,t,Te,15,8,Se),deflateInit2:Xe,deflateReset:Ye,deflateResetKeep:Ve,deflateSetHeader:(e,t)=>e&&e.state?2!==e.state.wrap?me:(e.state.gzhead=t,ge):me,deflate:(e,t)=>{let i,n;if(!e||!e.state||t>pe||t<0)return e?Ie(e,me):me;const r=e.state;if(!e.output||!e.input&&0!==e.avail_in||r.status===Be&&t!==ue)return Ie(e,0===e.avail_out?ye:me);r.strm=e;const a=r.last_flush;if(r.last_flush=t,42===r.status)if(2===r.wrap)e.adler=0,He(r,31),He(r,139),He(r,8),r.gzhead?(He(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),He(r,255&r.gzhead.time),He(r,r.gzhead.time>>8&255),He(r,r.gzhead.time>>16&255),He(r,r.gzhead.time>>24&255),He(r,9===r.level?2:r.strategy>=ke||r.level<2?4:0),He(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(He(r,255&r.gzhead.extra.length),He(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=ie(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(He(r,0),He(r,0),He(r,0),He(r,0),He(r,0),He(r,9===r.level?2:r.strategy>=ke||r.level<2?4:0),He(r,3),r.status=Le);else{let t=Te+(r.w_bits-8<<4)<<8,i=-1;i=r.strategy>=ke||r.level<2?0:r.level<6?1:6===r.level?2:3,t|=i<<6,0!==r.strstart&&(t|=32),t+=31-t%31,r.status=Le,Ne(r,t),0!==r.strstart&&(Ne(r,e.adler>>>16),Ne(r,65535&e.adler)),e.adler=1}if(69===r.status)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>i&&(e.adler=ie(e.adler,r.pending_buf,r.pending-i,i)),Me(e),i=r.pending,r.pending!==r.pending_buf_size));)He(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(e.adler=ie(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=ie(e.adler,r.pending_buf,r.pending-i,i)),Me(e),i=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,He(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>i&&(e.adler=ie(e.adler,r.pending_buf,r.pending-i,i)),0===n&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=ie(e.adler,r.pending_buf,r.pending-i,i)),Me(e),i=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,He(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>i&&(e.adler=ie(e.adler,r.pending_buf,r.pending-i,i)),0===n&&(r.status=Ae)}else r.status=Ae;if(r.status===Ae&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&Me(e),r.pending+2<=r.pending_buf_size&&(He(r,255&e.adler),He(r,e.adler>>8&255),e.adler=0,r.status=Le)):r.status=Le),0!==r.pending){if(Me(e),0===e.avail_out)return r.last_flush=-1,ge}else if(0===e.avail_in&&ze(t)<=ze(a)&&t!==ue)return Ie(e,ye);if(r.status===Be&&0!==e.avail_in)return Ie(e,ye);if(0!==e.avail_in||0!==r.lookahead||t!==he&&r.status!==Be){let i=r.strategy===ke?((e,t)=>{let i;for(;;){if(0===e.lookahead&&(Ze(e),0===e.lookahead)){if(t===he)return 1;break}if(e.match_length=0,i=le(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(Fe(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ue?(Fe(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Fe(e,!1),0===e.strm.avail_out)?1:2})(r,t):r.strategy===xe?((e,t)=>{let i,n,r,a;const s=e.window;for(;;){if(e.lookahead<=De){if(Ze(e),e.lookahead<=De&&t===he)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=e.strstart-1,n=s[r],n===s[++r]&&n===s[++r]&&n===s[++r])){a=e.strstart+De;do{}while(n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&r<a);e.match_length=De-(a-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(i=le(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=le(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(Fe(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ue?(Fe(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Fe(e,!1),0===e.strm.avail_out)?1:2})(r,t):je[r.level].func(r,t);if(3!==i&&4!==i||(r.status=Be),1===i||3===i)return 0===e.avail_out&&(r.last_flush=-1),ge;if(2===i&&(t===fe?ce(r):t!==pe&&(se(r,0,0,!1),t===de&&(Oe(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),Me(e),0===e.avail_out))return r.last_flush=-1,ge}return t!==ue?ge:r.wrap<=0?we:(2===r.wrap?(He(r,255&e.adler),He(r,e.adler>>8&255),He(r,e.adler>>16&255),He(r,e.adler>>24&255),He(r,255&e.total_in),He(r,e.total_in>>8&255),He(r,e.total_in>>16&255),He(r,e.total_in>>24&255)):(Ne(r,e.adler>>>16),Ne(r,65535&e.adler)),Me(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?ge:we)},deflateEnd:e=>{if(!e||!e.state)return me;const t=e.state.status;return 42!==t&&69!==t&&73!==t&&91!==t&&t!==Ae&&t!==Le&&t!==Be?Ie(e,me):(e.state=null,t===Le?Ie(e,be):ge)},deflateSetDictionary:(e,t)=>{let i=t.length;if(!e||!e.state)return me;const n=e.state,r=n.wrap;if(2===r||1===r&&42!==n.status||n.lookahead)return me;if(1===r&&(e.adler=ee(e.adler,t,i,0)),n.wrap=0,i>=n.w_size){0===r&&(Oe(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(i-n.w_size,i),0),t=e,i=n.w_size}const a=e.avail_in,s=e.next_in,o=e.input;for(e.avail_in=i,e.next_in=0,e.input=t,Ze(n);n.lookahead>=3;){let e=n.strstart,t=n.lookahead-2;do{n.ins_h=Ue(n,n.ins_h,n.window[e+3-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++}while(--t);n.strstart=e,n.lookahead=2,Ze(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=s,e.input=o,e.avail_in=a,n.wrap=r,ge},deflateInfo:"pako deflate (from Nodeca project)"};const Qe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var et=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const i=t.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(const t in i)Qe(i,t)&&(e[t]=i[t])}}return e},tt=e=>{let t=0;for(let i=0,n=e.length;i<n;i++)t+=e[i].length;const i=new Uint8Array(t);for(let t=0,n=0,r=e.length;t<r;t++){let r=e[t];i.set(r,n),n+=r.length}return i};let it=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){it=!1}const nt=new Uint8Array(256);for(let e=0;e<256;e++)nt[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;nt[254]=nt[254]=1;var rt=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,i,n,r,a,s=e.length,o=0;for(r=0;r<s;r++)i=e.charCodeAt(r),55296==(64512&i)&&r+1<s&&(n=e.charCodeAt(r+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),r++)),o+=i<128?1:i<2048?2:i<65536?3:4;for(t=new Uint8Array(o),a=0,r=0;a<o;r++)i=e.charCodeAt(r),55296==(64512&i)&&r+1<s&&(n=e.charCodeAt(r+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),r++)),i<128?t[a++]=i:i<2048?(t[a++]=192|i>>>6,t[a++]=128|63&i):i<65536?(t[a++]=224|i>>>12,t[a++]=128|i>>>6&63,t[a++]=128|63&i):(t[a++]=240|i>>>18,t[a++]=128|i>>>12&63,t[a++]=128|i>>>6&63,t[a++]=128|63&i);return t},at=(e,t)=>{const i=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let n,r;const a=new Array(2*i);for(r=0,n=0;n<i;){let t=e[n++];if(t<128){a[r++]=t;continue}let s=nt[t];if(s>4)a[r++]=65533,n+=s-1;else{for(t&=2===s?31:3===s?15:7;s>1&&n<i;)t=t<<6|63&e[n++],s--;s>1?a[r++]=65533:t<65536?a[r++]=t:(t-=65536,a[r++]=55296|t>>10&1023,a[r++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&it)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let i="";for(let n=0;n<t;n++)i+=String.fromCharCode(e[n]);return i})(a,r)},st=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let i=t-1;for(;i>=0&&128==(192&e[i]);)i--;return i<0||0===i?t:i+nt[e[i]]>t?i:t};var ot=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const lt=Object.prototype.toString,{Z_NO_FLUSH:ct,Z_SYNC_FLUSH:ht,Z_FULL_FLUSH:ft,Z_FINISH:dt,Z_OK:ut,Z_STREAM_END:pt,Z_DEFAULT_COMPRESSION:gt,Z_DEFAULT_STRATEGY:wt,Z_DEFLATED:mt}=re;function bt(e){this.options=et({level:gt,method:mt,chunkSize:16384,windowBits:15,memLevel:8,strategy:wt},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ot,this.strm.avail_out=0;let i=Je.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(i!==ut)throw new Error(ne[i]);if(t.header&&Je.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?rt(t.dictionary):"[object ArrayBuffer]"===lt.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,i=Je.deflateSetDictionary(this.strm,e),i!==ut)throw new Error(ne[i]);this._dict_set=!0}}function yt(e,t){const i=new bt(t);if(i.push(e,!0),i.err)throw i.msg||ne[i.err];return i.result}bt.prototype.push=function(e,t){const i=this.strm,n=this.options.chunkSize;let r,a;if(this.ended)return!1;for(a=t===~~t?t:!0===t?dt:ct,"string"==typeof e?i.input=rt(e):"[object ArrayBuffer]"===lt.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;)if(0===i.avail_out&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),(a===ht||a===ft)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if(r=Je.deflate(i,a),r===pt)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),r=Je.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===ut;if(0!==i.avail_out){if(a>0&&i.next_out>0)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(0===i.avail_in)break}else this.onData(i.output)}return!0},bt.prototype.onData=function(e){this.chunks.push(e)},bt.prototype.onEnd=function(e){e===ut&&(this.result=tt(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var vt=function(e,t){return(t=t||{}).raw=!0,yt(e,t)},_t=function(e,t){return(t=t||{}).gzip=!0,yt(e,t)},kt={Deflate:bt,deflate:yt,deflateRaw:vt,gzip:_t,constants:re};var xt=function(e,t){let i,n,r,a,s,o,l,c,h,f,d,u,p,g,w,m,b,y,v,_,k,x,E,S;const R=e.state;i=e.next_in,E=e.input,n=i+(e.avail_in-5),r=e.next_out,S=e.output,a=r-(t-e.avail_out),s=r+(e.avail_out-257),o=R.dmax,l=R.wsize,c=R.whave,h=R.wnext,f=R.window,d=R.hold,u=R.bits,p=R.lencode,g=R.distcode,w=(1<<R.lenbits)-1,m=(1<<R.distbits)-1;e:do{u<15&&(d+=E[i++]<<u,u+=8,d+=E[i++]<<u,u+=8),b=p[d&w];t:for(;;){if(y=b>>>24,d>>>=y,u-=y,y=b>>>16&255,0===y)S[r++]=65535&b;else{if(!(16&y)){if(0==(64&y)){b=p[(65535&b)+(d&(1<<y)-1)];continue t}if(32&y){R.mode=12;break e}e.msg="invalid literal/length code",R.mode=30;break e}v=65535&b,y&=15,y&&(u<y&&(d+=E[i++]<<u,u+=8),v+=d&(1<<y)-1,d>>>=y,u-=y),u<15&&(d+=E[i++]<<u,u+=8,d+=E[i++]<<u,u+=8),b=g[d&m];i:for(;;){if(y=b>>>24,d>>>=y,u-=y,y=b>>>16&255,!(16&y)){if(0==(64&y)){b=g[(65535&b)+(d&(1<<y)-1)];continue i}e.msg="invalid distance code",R.mode=30;break e}if(_=65535&b,y&=15,u<y&&(d+=E[i++]<<u,u+=8,u<y&&(d+=E[i++]<<u,u+=8)),_+=d&(1<<y)-1,_>o){e.msg="invalid distance too far back",R.mode=30;break e}if(d>>>=y,u-=y,y=r-a,_>y){if(y=_-y,y>c&&R.sane){e.msg="invalid distance too far back",R.mode=30;break e}if(k=0,x=f,0===h){if(k+=l-y,y<v){v-=y;do{S[r++]=f[k++]}while(--y);k=r-_,x=S}}else if(h<y){if(k+=l+h-y,y-=h,y<v){v-=y;do{S[r++]=f[k++]}while(--y);if(k=0,h<v){y=h,v-=y;do{S[r++]=f[k++]}while(--y);k=r-_,x=S}}}else if(k+=h-y,y<v){v-=y;do{S[r++]=f[k++]}while(--y);k=r-_,x=S}for(;v>2;)S[r++]=x[k++],S[r++]=x[k++],S[r++]=x[k++],v-=3;v&&(S[r++]=x[k++],v>1&&(S[r++]=x[k++]))}else{k=r-_;do{S[r++]=S[k++],S[r++]=S[k++],S[r++]=S[k++],v-=3}while(v>2);v&&(S[r++]=S[k++],v>1&&(S[r++]=S[k++]))}break}}break}}while(i<n&&r<s);v=u>>3,i-=v,u-=v<<3,d&=(1<<u)-1,e.next_in=i,e.next_out=r,e.avail_in=i<n?n-i+5:5-(i-n),e.avail_out=r<s?s-r+257:257-(r-s),R.hold=d,R.bits=u};const Et=15,St=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Rt=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Tt=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Dt=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Ct=(e,t,i,n,r,a,s,o)=>{const l=o.bits;let c,h,f,d,u,p,g=0,w=0,m=0,b=0,y=0,v=0,_=0,k=0,x=0,E=0,S=null,R=0;const T=new Uint16Array(16),D=new Uint16Array(16);let C,A,L,B=null,I=0;for(g=0;g<=Et;g++)T[g]=0;for(w=0;w<n;w++)T[t[i+w]]++;for(y=l,b=Et;b>=1&&0===T[b];b--);if(y>b&&(y=b),0===b)return r[a++]=20971520,r[a++]=20971520,o.bits=1,0;for(m=1;m<b&&0===T[m];m++);for(y<m&&(y=m),k=1,g=1;g<=Et;g++)if(k<<=1,k-=T[g],k<0)return-1;if(k>0&&(0===e||1!==b))return-1;for(D[1]=0,g=1;g<Et;g++)D[g+1]=D[g]+T[g];for(w=0;w<n;w++)0!==t[i+w]&&(s[D[t[i+w]]++]=w);if(0===e?(S=B=s,p=19):1===e?(S=St,R-=257,B=Rt,I-=257,p=256):(S=Tt,B=Dt,p=-1),E=0,w=0,g=m,u=a,v=y,_=0,f=-1,x=1<<y,d=x-1,1===e&&x>852||2===e&&x>592)return 1;for(;;){C=g-_,s[w]<p?(A=0,L=s[w]):s[w]>p?(A=B[I+s[w]],L=S[R+s[w]]):(A=96,L=0),c=1<<g-_,h=1<<v,m=h;do{h-=c,r[u+(E>>_)+h]=C<<24|A<<16|L|0}while(0!==h);for(c=1<<g-1;E&c;)c>>=1;if(0!==c?(E&=c-1,E+=c):E=0,w++,0==--T[g]){if(g===b)break;g=t[i+s[w]]}if(g>y&&(E&d)!==f){for(0===_&&(_=y),u+=m,v=g-_,k=1<<v;v+_<b&&(k-=T[v+_],!(k<=0));)v++,k<<=1;if(x+=1<<v,1===e&&x>852||2===e&&x>592)return 1;f=E&d,r[f]=y<<24|v<<16|u-a|0}}return 0!==E&&(r[u+E]=g-_<<24|64<<16|0),o.bits=y,0};const{Z_FINISH:At,Z_BLOCK:Lt,Z_TREES:Bt,Z_OK:It,Z_STREAM_END:zt,Z_NEED_DICT:Ot,Z_STREAM_ERROR:Ut,Z_DATA_ERROR:Mt,Z_MEM_ERROR:Ft,Z_BUF_ERROR:Ht,Z_DEFLATED:Nt}=re,Pt=12,$t=30,Zt=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Kt(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const qt=e=>{if(!e||!e.state)return Ut;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,It},Gt=e=>{if(!e||!e.state)return Ut;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,qt(e)},jt=(e,t)=>{let i;if(!e||!e.state)return Ut;const n=e.state;return t<0?(i=0,t=-t):(i=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Ut:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=i,n.wbits=t,Gt(e))},Wt=(e,t)=>{if(!e)return Ut;const i=new Kt;e.state=i,i.window=null;const n=jt(e,t);return n!==It&&(e.state=null),n};let Vt,Yt,Xt=!0;const Jt=e=>{if(Xt){Vt=new Int32Array(512),Yt=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Ct(1,e.lens,0,288,Vt,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Ct(2,e.lens,0,32,Yt,0,e.work,{bits:5}),Xt=!1}e.lencode=Vt,e.lenbits=9,e.distcode=Yt,e.distbits=5},Qt=(e,t,i,n)=>{let r;const a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(t.subarray(i-a.wsize,i),0),a.wnext=0,a.whave=a.wsize):(r=a.wsize-a.wnext,r>n&&(r=n),a.window.set(t.subarray(i-n,i-n+r),a.wnext),(n-=r)?(a.window.set(t.subarray(i-n,i),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=r,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=r))),0};var ei={inflateReset:Gt,inflateReset2:jt,inflateResetKeep:qt,inflateInit:e=>Wt(e,15),inflateInit2:Wt,inflate:(e,t)=>{let i,n,r,a,s,o,l,c,h,f,d,u,p,g,w,m,b,y,v,_,k,x,E=0;const S=new Uint8Array(4);let R,T;const D=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Ut;i=e.state,i.mode===Pt&&(i.mode=13),s=e.next_out,r=e.output,l=e.avail_out,a=e.next_in,n=e.input,o=e.avail_in,c=i.hold,h=i.bits,f=o,d=l,x=It;e:for(;;)switch(i.mode){case 1:if(0===i.wrap){i.mode=13;break}for(;h<16;){if(0===o)break e;o--,c+=n[a++]<<h,h+=8}if(2&i.wrap&&35615===c){i.check=0,S[0]=255&c,S[1]=c>>>8&255,i.check=ie(i.check,S,2,0),c=0,h=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",i.mode=$t;break}if((15&c)!==Nt){e.msg="unknown compression method",i.mode=$t;break}if(c>>>=4,h-=4,k=8+(15&c),0===i.wbits)i.wbits=k;else if(k>i.wbits){e.msg="invalid window size",i.mode=$t;break}i.dmax=1<<i.wbits,e.adler=i.check=1,i.mode=512&c?10:Pt,c=0,h=0;break;case 2:for(;h<16;){if(0===o)break e;o--,c+=n[a++]<<h,h+=8}if(i.flags=c,(255&i.flags)!==Nt){e.msg="unknown compression method",i.mode=$t;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=$t;break}i.head&&(i.head.text=c>>8&1),512&i.flags&&(S[0]=255&c,S[1]=c>>>8&255,i.check=ie(i.check,S,2,0)),c=0,h=0,i.mode=3;case 3:for(;h<32;){if(0===o)break e;o--,c+=n[a++]<<h,h+=8}i.head&&(i.head.time=c),512&i.flags&&(S[0]=255&c,S[1]=c>>>8&255,S[2]=c>>>16&255,S[3]=c>>>24&255,i.check=ie(i.check,S,4,0)),c=0,h=0,i.mode=4;case 4:for(;h<16;){if(0===o)break e;o--,c+=n[a++]<<h,h+=8}i.head&&(i.head.xflags=255&c,i.head.os=c>>8),512&i.flags&&(S[0]=255&c,S[1]=c>>>8&255,i.check=ie(i.check,S,2,0)),c=0,h=0,i.mode=5;case 5:if(1024&i.flags){for(;h<16;){if(0===o)break e;o--,c+=n[a++]<<h,h+=8}i.length=c,i.head&&(i.head.extra_len=c),512&i.flags&&(S[0]=255&c,S[1]=c>>>8&255,i.check=ie(i.check,S,2,0)),c=0,h=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&(u=i.length,u>o&&(u=o),u&&(i.head&&(k=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(n.subarray(a,a+u),k)),512&i.flags&&(i.check=ie(i.check,n,u,a)),o-=u,a+=u,i.length-=u),i.length))break e;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===o)break e;u=0;do{k=n[a+u++],i.head&&k&&i.length<65536&&(i.head.name+=String.fromCharCode(k))}while(k&&u<o);if(512&i.flags&&(i.check=ie(i.check,n,u,a)),o-=u,a+=u,k)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===o)break e;u=0;do{k=n[a+u++],i.head&&k&&i.length<65536&&(i.head.comment+=String.fromCharCode(k))}while(k&&u<o);if(512&i.flags&&(i.check=ie(i.check,n,u,a)),o-=u,a+=u,k)break e}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;h<16;){if(0===o)break e;o--,c+=n[a++]<<h,h+=8}if(c!==(65535&i.check)){e.msg="header crc mismatch",i.mode=$t;break}c=0,h=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=Pt;break;case 10:for(;h<32;){if(0===o)break e;o--,c+=n[a++]<<h,h+=8}e.adler=i.check=Zt(c),c=0,h=0,i.mode=11;case 11:if(0===i.havedict)return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,i.hold=c,i.bits=h,Ot;e.adler=i.check=1,i.mode=Pt;case Pt:if(t===Lt||t===Bt)break e;case 13:if(i.last){c>>>=7&h,h-=7&h,i.mode=27;break}for(;h<3;){if(0===o)break e;o--,c+=n[a++]<<h,h+=8}switch(i.last=1&c,c>>>=1,h-=1,3&c){case 0:i.mode=14;break;case 1:if(Jt(i),i.mode=20,t===Bt){c>>>=2,h-=2;break e}break;case 2:i.mode=17;break;case 3:e.msg="invalid block type",i.mode=$t}c>>>=2,h-=2;break;case 14:for(c>>>=7&h,h-=7&h;h<32;){if(0===o)break e;o--,c+=n[a++]<<h,h+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",i.mode=$t;break}if(i.length=65535&c,c=0,h=0,i.mode=15,t===Bt)break e;case 15:i.mode=16;case 16:if(u=i.length,u){if(u>o&&(u=o),u>l&&(u=l),0===u)break e;r.set(n.subarray(a,a+u),s),o-=u,a+=u,l-=u,s+=u,i.length-=u;break}i.mode=Pt;break;case 17:for(;h<14;){if(0===o)break e;o--,c+=n[a++]<<h,h+=8}if(i.nlen=257+(31&c),c>>>=5,h-=5,i.ndist=1+(31&c),c>>>=5,h-=5,i.ncode=4+(15&c),c>>>=4,h-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=$t;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;h<3;){if(0===o)break e;o--,c+=n[a++]<<h,h+=8}i.lens[D[i.have++]]=7&c,c>>>=3,h-=3}for(;i.have<19;)i.lens[D[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,R={bits:i.lenbits},x=Ct(0,i.lens,0,19,i.lencode,0,i.work,R),i.lenbits=R.bits,x){e.msg="invalid code lengths set",i.mode=$t;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;E=i.lencode[c&(1<<i.lenbits)-1],w=E>>>24,m=E>>>16&255,b=65535&E,!(w<=h);){if(0===o)break e;o--,c+=n[a++]<<h,h+=8}if(b<16)c>>>=w,h-=w,i.lens[i.have++]=b;else{if(16===b){for(T=w+2;h<T;){if(0===o)break e;o--,c+=n[a++]<<h,h+=8}if(c>>>=w,h-=w,0===i.have){e.msg="invalid bit length repeat",i.mode=$t;break}k=i.lens[i.have-1],u=3+(3&c),c>>>=2,h-=2}else if(17===b){for(T=w+3;h<T;){if(0===o)break e;o--,c+=n[a++]<<h,h+=8}c>>>=w,h-=w,k=0,u=3+(7&c),c>>>=3,h-=3}else{for(T=w+7;h<T;){if(0===o)break e;o--,c+=n[a++]<<h,h+=8}c>>>=w,h-=w,k=0,u=11+(127&c),c>>>=7,h-=7}if(i.have+u>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=$t;break}for(;u--;)i.lens[i.have++]=k}}if(i.mode===$t)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=$t;break}if(i.lenbits=9,R={bits:i.lenbits},x=Ct(1,i.lens,0,i.nlen,i.lencode,0,i.work,R),i.lenbits=R.bits,x){e.msg="invalid literal/lengths set",i.mode=$t;break}if(i.distbits=6,i.distcode=i.distdyn,R={bits:i.distbits},x=Ct(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,R),i.distbits=R.bits,x){e.msg="invalid distances set",i.mode=$t;break}if(i.mode=20,t===Bt)break e;case 20:i.mode=21;case 21:if(o>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,i.hold=c,i.bits=h,xt(e,d),s=e.next_out,r=e.output,l=e.avail_out,a=e.next_in,n=e.input,o=e.avail_in,c=i.hold,h=i.bits,i.mode===Pt&&(i.back=-1);break}for(i.back=0;E=i.lencode[c&(1<<i.lenbits)-1],w=E>>>24,m=E>>>16&255,b=65535&E,!(w<=h);){if(0===o)break e;o--,c+=n[a++]<<h,h+=8}if(m&&0==(240&m)){for(y=w,v=m,_=b;E=i.lencode[_+((c&(1<<y+v)-1)>>y)],w=E>>>24,m=E>>>16&255,b=65535&E,!(y+w<=h);){if(0===o)break e;o--,c+=n[a++]<<h,h+=8}c>>>=y,h-=y,i.back+=y}if(c>>>=w,h-=w,i.back+=w,i.length=b,0===m){i.mode=26;break}if(32&m){i.back=-1,i.mode=Pt;break}if(64&m){e.msg="invalid literal/length code",i.mode=$t;break}i.extra=15&m,i.mode=22;case 22:if(i.extra){for(T=i.extra;h<T;){if(0===o)break e;o--,c+=n[a++]<<h,h+=8}i.length+=c&(1<<i.extra)-1,c>>>=i.extra,h-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;E=i.distcode[c&(1<<i.distbits)-1],w=E>>>24,m=E>>>16&255,b=65535&E,!(w<=h);){if(0===o)break e;o--,c+=n[a++]<<h,h+=8}if(0==(240&m)){for(y=w,v=m,_=b;E=i.distcode[_+((c&(1<<y+v)-1)>>y)],w=E>>>24,m=E>>>16&255,b=65535&E,!(y+w<=h);){if(0===o)break e;o--,c+=n[a++]<<h,h+=8}c>>>=y,h-=y,i.back+=y}if(c>>>=w,h-=w,i.back+=w,64&m){e.msg="invalid distance code",i.mode=$t;break}i.offset=b,i.extra=15&m,i.mode=24;case 24:if(i.extra){for(T=i.extra;h<T;){if(0===o)break e;o--,c+=n[a++]<<h,h+=8}i.offset+=c&(1<<i.extra)-1,c>>>=i.extra,h-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=$t;break}i.mode=25;case 25:if(0===l)break e;if(u=d-l,i.offset>u){if(u=i.offset-u,u>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=$t;break}u>i.wnext?(u-=i.wnext,p=i.wsize-u):p=i.wnext-u,u>i.length&&(u=i.length),g=i.window}else g=r,p=s-i.offset,u=i.length;u>l&&(u=l),l-=u,i.length-=u;do{r[s++]=g[p++]}while(--u);0===i.length&&(i.mode=21);break;case 26:if(0===l)break e;r[s++]=i.length,l--,i.mode=21;break;case 27:if(i.wrap){for(;h<32;){if(0===o)break e;o--,c|=n[a++]<<h,h+=8}if(d-=l,e.total_out+=d,i.total+=d,d&&(e.adler=i.check=i.flags?ie(i.check,r,d,s-d):ee(i.check,r,d,s-d)),d=l,(i.flags?c:Zt(c))!==i.check){e.msg="incorrect data check",i.mode=$t;break}c=0,h=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;h<32;){if(0===o)break e;o--,c+=n[a++]<<h,h+=8}if(c!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=$t;break}c=0,h=0}i.mode=29;case 29:x=zt;break e;case $t:x=Mt;break e;case 31:return Ft;default:return Ut}return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,i.hold=c,i.bits=h,(i.wsize||d!==e.avail_out&&i.mode<$t&&(i.mode<27||t!==At))&&Qt(e,e.output,e.next_out,d-e.avail_out),f-=e.avail_in,d-=e.avail_out,e.total_in+=f,e.total_out+=d,i.total+=d,i.wrap&&d&&(e.adler=i.check=i.flags?ie(i.check,r,d,e.next_out-d):ee(i.check,r,d,e.next_out-d)),e.data_type=i.bits+(i.last?64:0)+(i.mode===Pt?128:0)+(20===i.mode||15===i.mode?256:0),(0===f&&0===d||t===At)&&x===It&&(x=Ht),x},inflateEnd:e=>{if(!e||!e.state)return Ut;let t=e.state;return t.window&&(t.window=null),e.state=null,It},inflateGetHeader:(e,t)=>{if(!e||!e.state)return Ut;const i=e.state;return 0==(2&i.wrap)?Ut:(i.head=t,t.done=!1,It)},inflateSetDictionary:(e,t)=>{const i=t.length;let n,r,a;return e&&e.state?(n=e.state,0!==n.wrap&&11!==n.mode?Ut:11===n.mode&&(r=1,r=ee(r,t,i,0),r!==n.check)?Mt:(a=Qt(e,t,i,i),a?(n.mode=31,Ft):(n.havedict=1,It))):Ut},inflateInfo:"pako inflate (from Nodeca project)"};var ti=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const ii=Object.prototype.toString,{Z_NO_FLUSH:ni,Z_FINISH:ri,Z_OK:ai,Z_STREAM_END:si,Z_NEED_DICT:oi,Z_STREAM_ERROR:li,Z_DATA_ERROR:ci,Z_MEM_ERROR:hi}=re;function fi(e){this.options=et({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ot,this.strm.avail_out=0;let i=ei.inflateInit2(this.strm,t.windowBits);if(i!==ai)throw new Error(ne[i]);if(this.header=new ti,ei.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=rt(t.dictionary):"[object ArrayBuffer]"===ii.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(i=ei.inflateSetDictionary(this.strm,t.dictionary),i!==ai)))throw new Error(ne[i])}function di(e,t){const i=new fi(t);if(i.push(e),i.err)throw i.msg||ne[i.err];return i.result}fi.prototype.push=function(e,t){const i=this.strm,n=this.options.chunkSize,r=this.options.dictionary;let a,s,o;if(this.ended)return!1;for(s=t===~~t?t:!0===t?ri:ni,"[object ArrayBuffer]"===ii.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),a=ei.inflate(i,s),a===oi&&r&&(a=ei.inflateSetDictionary(i,r),a===ai?a=ei.inflate(i,s):a===ci&&(a=oi));i.avail_in>0&&a===si&&i.state.wrap>0&&0!==e[i.next_in];)ei.inflateReset(i),a=ei.inflate(i,s);switch(a){case li:case ci:case oi:case hi:return this.onEnd(a),this.ended=!0,!1}if(o=i.avail_out,i.next_out&&(0===i.avail_out||a===si))if("string"===this.options.to){let e=st(i.output,i.next_out),t=i.next_out-e,r=at(i.output,e);i.next_out=t,i.avail_out=n-t,t&&i.output.set(i.output.subarray(e,e+t),0),this.onData(r)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(a!==ai||0!==o){if(a===si)return a=ei.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},fi.prototype.onData=function(e){this.chunks.push(e)},fi.prototype.onEnd=function(e){e===ai&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=tt(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ui=function(e,t){return(t=t||{}).raw=!0,di(e,t)},pi={Inflate:fi,inflate:di,inflateRaw:ui,ungzip:di,constants:re};const{Deflate:gi,deflate:wi,deflateRaw:mi,gzip:bi}=kt,{Inflate:yi,inflate:vi,inflateRaw:_i,ungzip:ki}=pi;var xi={Deflate:gi,deflate:wi,deflateRaw:mi,gzip:bi,Inflate:yi,inflate:vi,inflateRaw:_i,ungzip:ki,constants:re};xi.deflateRaw,xi.deflate,xi.inflateRaw,xi.inflate,xi.gzip;function Ei(e){const t=ArrayBuffer.isView(e)?e:new Uint8Array(e);return 0!==(4&t[3])&&66===t[12]&&67===t[13]?function(e,t){const i=[];let n=0,r=0;t=t||e.byteLength-18;for(;n<t;)try{const t=ArrayBuffer.isView(e)?e:new Uint8Array(e,n,18),a=t[11]<<8|t[10],s=(t[3],t[12],t[13],t[15],t[14],1+(t[17]<<8|t[16])),o=12+a+n,l=e.byteLength-o,c=s-a-19;if(l<c||c<=0)break;const h=new Uint8Array(e,o,c),f=xi.inflateRaw(h);n+=c-1+26,r+=f.byteLength,i.push(f)}catch(e){console.error(e);break}if(1===i.length)return i[0];{const e=new Uint8Array(r);let t=0;for(let n=0;n<i.length;++n){var a=new Uint8Array(i[n]);Ri(a,0,e,t,a.length),t+=a.length}return e}}(t.buffer):xi.ungzip(t)}const Si="function"==typeof new Uint8Array(1).subarray;function Ri(e,t,i,n,r){if(0!==r){if(!e)throw"Undef src";if(!i)throw"Undef dest";0===t&&r===e.length?Ti(e,i,n):Si?Ti(e.subarray(t,t+r),i,n):1===e.BYTES_PER_ELEMENT&&r>100?Ti(new Uint8Array(e.buffer,e.byteOffset+t,r),i,n):function(e,t,i,n,r){for(let a=0;a<r;++a)i[n+a]=e[t+a]}(e,t,i,n,r)}}function Ti(e,t,i){t.set(e,i)}let Di;function Ci(e,t){t.addEventListener("mousedown",Ai.bind(e))}function Ai(e){e.stopPropagation(),e.preventDefault(),function(e){if(!e.getClientRects().length)return{top:0,left:0};const t=e.getBoundingClientRect(),i=e.ownerDocument.defaultView;t.top,i.pageYOffset,t.left,i.pageXOffset}(this);const t=Li.bind(this),i=Bi.bind(this),n=getComputedStyle(this),r=parseInt(n.top.replace("px","")),a=parseInt(n.left.replace("px",""));Di={dragFunction:t,dragEndFunction:i,screenX:e.screenX,screenY:e.screenY,top:r,left:a},document.addEventListener("mousemove",t),document.addEventListener("mouseup",i),document.addEventListener("mouseleave",i),document.addEventListener("mouseexit",i)}function Li(e){if(!Di)return;e.stopPropagation(),e.preventDefault();const t=e.screenX-Di.screenX,i=e.screenY-Di.screenY;this.style.left=`${Di.left+t}px`,this.style.top=`${Di.top+i}px`}function Bi(e){if(!Di)return;e.stopPropagation(),e.preventDefault();const t=Di.dragFunction,i=Di.dragEndFunction;document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",i),document.removeEventListener("mouseleave",i),document.removeEventListener("mouseexit",i),Di=void 0}const Ii="googleapis",zi={oauthTokens:{},setToken:function(e,t){t=t||Ii,this.oauthTokens[t]=e,t===Ii&&(this.google.access_token=e)},getToken:function(e){let t;e=e||Ii;for(let i of Object.keys(this.oauthTokens)){if(Oi(i).test(e)){t=this.oauthTokens[i];break}}return t},removeToken:function(e){e=e||Ii;for(let t of Object.keys(this.oauthTokens)){Oi(t).test(e)&&(this.oauthTokens[t]=void 0)}e===Ii&&(this.google.access_token=void 0)},google:{setToken:function(e){zi.setToken(e)}}};function Oi(e){return new RegExp("^"+e.split(/\*+/).map(Ui).join(".*")+"$")}function Ui(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}const Mi=new class{constructor(e){this.requestsPerSecond=e.requestsPerSecond||10,this.lastStartTime=0,this.queued=[]}add(e,t){var i=this;return new Promise((function(t,n){i.queued.push({resolve:t,reject:n,asyncFunction:e}),i.dequeue()}))}addAll(e,t){var i=e.map(function(e){return this.add(e,t)}.bind(this));return Promise.all(i)}dequeue(){if(this.queued.length>0){var e=new Date,t=1e3/this.requestsPerSecond+1,i=e-this.lastStartTime;i>=t?this._execute():setTimeout(function(){this.dequeue()}.bind(this),t-i)}}async _execute(){this.lastStartTime=new Date;var e=this.queued.shift();const t=e.asyncFunction;try{const i=await t();e.resolve(i)}catch(t){e.reject(t)}}}({requestsPerSecond:8}),Fi={apiKey:void 0,setApiKey:function(e){this.apiKey=e},load:Hi,loadArrayBuffer:async function(e,t){return(t=t||{}).responseType||(t.responseType="arraybuffer"),u(e)?Pi(e,t):Hi(e,t)},loadJson:async function(e,t){"POST"===((t=t||{}).method||(t.sendData?"POST":"GET"))&&(t.contentType="application/json");const i=await this.loadString(e,t);return i?JSON.parse(i):i},loadString:async function(e,t){return t=t||{},e instanceof File?async function(e,t){const i=t.range?e.slice(t.range.start,t.range.start+t.range.size):e;return Ki(await $i(i))}(e,t):async function(e,t){(t=t||{}).responseType="arraybuffer";return Ki(await Fi.load(e,t))}(e,t)}};async function Hi(e,t){t=t||{};const i=typeof e;if(u(e=await("function"==typeof e?e():e)))return Pi(e,t);if("function"==typeof e.startsWith){if(e.startsWith("data:")){const i=function(e,t){const i=e.split(","),n=i[0].split(":")[1];let r=i[1];if(n.indexOf("base64")>=0){r=atob(r);const e=new Uint8Array(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);let i;return i=t||n.indexOf("gzip")>0?xi.ungzip(e):e,i}return decodeURIComponent(r)}(e).buffer;if(t.range){const e=t.range.size?t.range.start+t.range.size:i.byteLength;return i.slice(t.range.start,e)}return i}return e.startsWith("https://drive.google.com")&&(e=s(e)),r(e)||e.startsWith("https://www.dropbox.com")?Mi.add((async function(){return Ni(e,t)})):Ni(e,t)}throw Error(`url must be either a 'File', 'string', 'function', or 'Promise'.  Actual type: ${i}`)}async function Ni(e,t){e=function(e){return e.includes("//www.dropbox.com")?e.replace("//www.dropbox.com","//dl.dropboxusercontent.com"):e.includes("//drive.google.com")?s(e):e.includes("//www.broadinstitute.org/igvdata")?e.replace("//www.broadinstitute.org/igvdata","//data.broadinstitute.org/igvdata"):e.includes("//igvdata.broadinstitute.org")?e.replace("//igvdata.broadinstitute.org","https://dn7ywbm9isq8j.cloudfront.net"):e.startsWith("ftp://ftp.ncbi.nlm.nih.gov/geo")?e.replace("ftp://","https://"):e}(e);let o=(t=t||{}).oauthToken||function(e){const t=i(e)?void 0:function(e){for(var t=d,i=t.parser.loose.exec(e),n={},r=14;r--;)n[t.key[r]]=i[r]||"";return n[t.q.name]={},n[t.key[12]].replace(t.q.parser,(function(e,i,r){i&&(n[t.q.name][i]=r)})),n}(e).host;let n=zi.getToken(t);if(n)return n;if(void 0===t){const e=Zi();if(e&&e.expires_at>Date.now())return e.access_token}}(e);return o&&(o=await("function"==typeof o?o():o)),new Promise((function(s,l){i(e)&&(n(e)&&(e=a(e)),r(e=function(e){let t=Fi.apiKey;t||"undefined"==typeof gapi||(t=gapi.apiKey);if(void 0!==t&&!e.includes("key=")){const i=e.includes("?")?"&":"?";e=e+i+"key="+t}return e}(e))&&function(e){if(e.includes("supportsTeamDrive"))return e;{const t=e.includes("?")?"&":"?";e=e+t+"supportsTeamDrive=true"}}(e),o||(o=Zi()));const h=t.headers||{};o&&function(e,t){t&&(e["Cache-Control"]="no-cache",e.Authorization="Bearer "+t)}(h,o);const d=t.range,u=navigator.userAgent.indexOf("Chrome")>-1;0===navigator.vendor.indexOf("Apple")&&/\sSafari\//.test(navigator.userAgent),d&&u&&!function(e){return e.indexOf("X-Amz-Signature")>-1}(e)&&(e+=e.includes("?")?"&":"?",e+="someRandomSeed="+Math.random().toString(36));const p=new XMLHttpRequest,g=t.sendData||t.body,w=t.method||(g?"POST":"GET"),m=t.responseType,b=t.contentType,y=t.mimeType;if(p.open(w,e),t.timeout&&(p.timeout=t.timeout),d){var v=d.size?d.start+d.size-1:"";p.setRequestHeader("Range","bytes="+d.start+"-"+v)}if(b&&p.setRequestHeader("Content-Type",b),y&&p.overrideMimeType(y),m&&(p.responseType=m),h)for(let e of Object.keys(h)){const t=h[e];p.setRequestHeader(e,t)}!0===t.withCredentials&&(p.withCredentials=!0),p.onload=async function(n){0===p.status||p.status>=200&&p.status<=300?d&&206!==p.status&&0!==d.start?(p.response.length>1e5&&alert(`Warning: Range header ignored for URL: ${e}.  This can have performance impacts.`),s(p.response.slice(d.start,d.start+d.size))):s(p.response):"undefined"==typeof gapi||404!==p.status&&401!==p.status&&403!==p.status||!i(e)||t.retries?403===p.status?_("Access forbidden: "+e):416===p.status?_("Unsatisfiable range"):_(p.status):k()},p.onerror=function(n){i(e)&&!t.retries&&k(),_("Error accessing resource: "+e+" Status: "+p.status)},p.ontimeout=function(e){_("Timed out")},p.onabort=function(e){l(e)};try{p.send(g)}catch(e){l(e)}function _(e){if(!l)throw e;l(e)}async function k(){try{const i=await async function(e){if(c()){const t=function(e){return r(e)?"https://www.googleapis.com/auth/drive.file":n(e)?"https://www.googleapis.com/auth/devstorage.read_only":"https://www.googleapis.com/auth/userinfo.profile"}(e),i=await f(t);return i?i.access_token:void 0}throw Error("Authorization is required, but Google oAuth has not been initalized. Contact your site administrator for assistance.")}(e);t.retries=1,t.oauthToken=i;const a=await Hi(e,t);s(a)}catch(e){if(e.error){const t=e.error.startsWith("popup_blocked")?"Google login popup blocked by browser.":e.error;alert(t)}else _(e)}}}))}async function Pi(e,t){let i=t&&t.range?e.slice(t.range.start,t.range.start+t.range.size):e;return"arraybuffer"===t.responseType?$i(i):new Promise((function(t,n){const r=new FileReader;r.onload=function(e){t(r.result)},r.onerror=function(t){console.error("reject uploading local file "+e.name),n(null,r)},r.readAsBinaryString(i),console.warn("Deprecated method used: readAsBinaryString")}))}async function $i(e){return"function"==typeof e.arrayBuffer?e.arrayBuffer():new Promise((function(t,i){const n=new FileReader;n.onload=function(e){t(n.result)},n.onerror=function(e){console.error("reject uploading local file "+localfile.name),i(null,n)},n.readAsArrayBuffer(e)}))}function Zi(){if(c()){const e=function(){let e=gapi.auth2.getAuthInstance().currentUser.get();if(e&&e.isSignedIn()){const{access_token:t,expires_at:i}=e.getAuthResponse();return{access_token:t,expires_at:i}}}();return e?e.access_token:void 0}}function Ki(e){let t;return t=function(e){const t=ArrayBuffer.isView(e)?e:new Uint8Array(e);return 31===t[0]&&139===t[1]}(e)?Ei(e):new Uint8Array(e),"TextDecoder"in function(){if("undefined"!=typeof self)return self;return"undefined"!=typeof global?global:window}()?(new TextDecoder).decode(t):function(e){var t="",i=0;for(;i<e.length;){var n=e[i],r=0,a=0;if(n<=127?(r=0,a=255&n):n<=223?(r=1,a=31&n):n<=239?(r=2,a=15&n):n<=244&&(r=3,a=7&n),e.length-i-r>0)for(var s=0;s<r;)a=a<<6|63&(n=e[i+s+1]),s+=1;else a=65533,r=e.length-i;t+=String.fromCodePoint(a),i+=r+1}return t}(t)}var qi={color:1};qi.parent=qi,qi.left=qi,qi.right=qi;let Gi={};class ji{constructor(){}subscribe(e,t){let i=Gi[e];void 0===i&&(i=[],Gi[e]=i),i.push(t)}post(e){const t=Gi[e.type];if(t)for(let i of t)"function"==typeof i.receiveEvent?i.receiveEvent(e):"function"==typeof i&&i(e)}static createEvent(e,t,i){return{type:e,data:t||{},propogate:void 0===i||i}}}function Wi(e){this.mode=Yi.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var t=0,i=this.data.length;t<i;t++){var n=[],r=this.data.charCodeAt(t);r>65536?(n[0]=240|(1835008&r)>>>18,n[1]=128|(258048&r)>>>12,n[2]=128|(4032&r)>>>6,n[3]=128|63&r):r>2048?(n[0]=224|(61440&r)>>>12,n[1]=128|(4032&r)>>>6,n[2]=128|63&r):r>128?(n[0]=192|(1984&r)>>>6,n[1]=128|63&r):n[0]=r,this.parsedData.push(n)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function Vi(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}ji.globalBus=new ji,Wi.prototype={getLength:function(e){return this.parsedData.length},write:function(e){for(var t=0,i=this.parsedData.length;t<i;t++)e.put(this.parsedData[t],8)}},Vi.prototype={addData:function(e){var t=new Wi(e);this.dataList.push(t),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++){this.modules[i]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[i][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=Vi.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var i=-1;i<=7;i++)if(!(e+i<=-1||this.moduleCount<=e+i))for(var n=-1;n<=7;n++)t+n<=-1||this.moduleCount<=t+n||(this.modules[e+i][t+n]=0<=i&&i<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==i||6==i)||2<=i&&i<=4&&2<=n&&n<=4)},getBestMaskPattern:function(){for(var e=0,t=0,i=0;i<8;i++){this.makeImpl(!0,i);var n=on.getLostPoint(this);(0==i||e>n)&&(e=n,t=i)}return t},createMovieClip:function(e,t,i){var n=e.createEmptyMovieClip(t,i);this.make();for(var r=0;r<this.modules.length;r++)for(var a=1*r,s=0;s<this.modules[r].length;s++){var o=1*s;this.modules[r][s]&&(n.beginFill(0,100),n.moveTo(o,a),n.lineTo(o+1,a),n.lineTo(o+1,a+1),n.lineTo(o,a+1),n.endFill())}return n},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=on.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var i=0;i<e.length;i++){var n=e[t],r=e[i];if(null==this.modules[n][r])for(var a=-2;a<=2;a++)for(var s=-2;s<=2;s++)this.modules[n+a][r+s]=-2==a||2==a||-2==s||2==s||0==a&&0==s}},setupTypeNumber:function(e){for(var t=on.getBCHTypeNumber(this.typeNumber),i=0;i<18;i++){var n=!e&&1==(t>>i&1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=n}for(i=0;i<18;i++){n=!e&&1==(t>>i&1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=n}},setupTypeInfo:function(e,t){for(var i=this.errorCorrectLevel<<3|t,n=on.getBCHTypeInfo(i),r=0;r<15;r++){var a=!e&&1==(n>>r&1);r<6?this.modules[r][8]=a:r<8?this.modules[r+1][8]=a:this.modules[this.moduleCount-15+r][8]=a}for(r=0;r<15;r++){a=!e&&1==(n>>r&1);r<8?this.modules[8][this.moduleCount-r-1]=a:r<9?this.modules[8][15-r-1+1]=a:this.modules[8][15-r-1]=a}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var i=-1,n=this.moduleCount-1,r=7,a=0,s=this.moduleCount-1;s>0;s-=2)for(6==s&&s--;;){for(var o=0;o<2;o++)if(null==this.modules[n][s-o]){var l=!1;a<e.length&&(l=1==(e[a]>>>r&1)),on.getMask(t,n,s-o)&&(l=!l),this.modules[n][s-o]=l,-1==--r&&(a++,r=7)}if((n+=i)<0||this.moduleCount<=n){n-=i,i=-i;break}}}},Vi.PAD0=236,Vi.PAD1=17,Vi.createData=function(e,t,i){for(var n=fn.getRSBlocks(e,t),r=new dn,a=0;a<i.length;a++){var s=i[a];r.put(s.mode,4),r.put(s.getLength(),on.getLengthInBits(s.mode,e)),s.write(r)}var o=0;for(a=0;a<n.length;a++)o+=n[a].dataCount;if(r.getLengthInBits()>8*o)throw new Error("code length overflow. ("+r.getLengthInBits()+">"+8*o+")");for(r.getLengthInBits()+4<=8*o&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(!1);for(;!(r.getLengthInBits()>=8*o||(r.put(Vi.PAD0,8),r.getLengthInBits()>=8*o));)r.put(Vi.PAD1,8);return Vi.createBytes(r,n)},Vi.createBytes=function(e,t){for(var i=0,n=0,r=0,a=new Array(t.length),s=new Array(t.length),o=0;o<t.length;o++){var l=t[o].dataCount,c=t[o].totalCount-l;n=Math.max(n,l),r=Math.max(r,c),a[o]=new Array(l);for(var h=0;h<a[o].length;h++)a[o][h]=255&e.buffer[h+i];i+=l;var f=on.getErrorCorrectPolynomial(c),d=new hn(a[o],f.getLength()-1).mod(f);s[o]=new Array(f.getLength()-1);for(h=0;h<s[o].length;h++){var u=h+d.getLength()-s[o].length;s[o][h]=u>=0?d.get(u):0}}var p=0;for(h=0;h<t.length;h++)p+=t[h].totalCount;var g=new Array(p),w=0;for(h=0;h<n;h++)for(o=0;o<t.length;o++)h<a[o].length&&(g[w++]=a[o][h]);for(h=0;h<r;h++)for(o=0;o<t.length;o++)h<s[o].length&&(g[w++]=s[o][h]);return g};for(var Yi={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},Xi={L:1,M:0,Q:3,H:2},Ji=0,Qi=1,en=2,tn=3,nn=4,rn=5,an=6,sn=7,on={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;on.getBCHDigit(t)-on.getBCHDigit(on.G15)>=0;)t^=on.G15<<on.getBCHDigit(t)-on.getBCHDigit(on.G15);return(e<<10|t)^on.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;on.getBCHDigit(t)-on.getBCHDigit(on.G18)>=0;)t^=on.G18<<on.getBCHDigit(t)-on.getBCHDigit(on.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return on.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,i){switch(e){case Ji:return(t+i)%2==0;case Qi:return t%2==0;case en:return i%3==0;case tn:return(t+i)%3==0;case nn:return(Math.floor(t/2)+Math.floor(i/3))%2==0;case rn:return t*i%2+t*i%3==0;case an:return(t*i%2+t*i%3)%2==0;case sn:return(t*i%3+(t+i)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new hn([1],0),i=0;i<e;i++)t=t.multiply(new hn([1,ln.gexp(i)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case Yi.MODE_NUMBER:return 10;case Yi.MODE_ALPHA_NUM:return 9;case Yi.MODE_8BIT_BYTE:case Yi.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case Yi.MODE_NUMBER:return 12;case Yi.MODE_ALPHA_NUM:return 11;case Yi.MODE_8BIT_BYTE:return 16;case Yi.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case Yi.MODE_NUMBER:return 14;case Yi.MODE_ALPHA_NUM:return 13;case Yi.MODE_8BIT_BYTE:return 16;case Yi.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),i=0,n=0;n<t;n++)for(var r=0;r<t;r++){for(var a=0,s=e.isDark(n,r),o=-1;o<=1;o++)if(!(n+o<0||t<=n+o))for(var l=-1;l<=1;l++)r+l<0||t<=r+l||0==o&&0==l||s==e.isDark(n+o,r+l)&&a++;a>5&&(i+=3+a-5)}for(n=0;n<t-1;n++)for(r=0;r<t-1;r++){var c=0;e.isDark(n,r)&&c++,e.isDark(n+1,r)&&c++,e.isDark(n,r+1)&&c++,e.isDark(n+1,r+1)&&c++,0!=c&&4!=c||(i+=3)}for(n=0;n<t;n++)for(r=0;r<t-6;r++)e.isDark(n,r)&&!e.isDark(n,r+1)&&e.isDark(n,r+2)&&e.isDark(n,r+3)&&e.isDark(n,r+4)&&!e.isDark(n,r+5)&&e.isDark(n,r+6)&&(i+=40);for(r=0;r<t;r++)for(n=0;n<t-6;n++)e.isDark(n,r)&&!e.isDark(n+1,r)&&e.isDark(n+2,r)&&e.isDark(n+3,r)&&e.isDark(n+4,r)&&!e.isDark(n+5,r)&&e.isDark(n+6,r)&&(i+=40);var h=0;for(r=0;r<t;r++)for(n=0;n<t;n++)e.isDark(n,r)&&h++;return i+=10*(Math.abs(100*h/t/t-50)/5)}},ln={glog:function(e){if(e<1)throw new Error("glog("+e+")");return ln.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return ln.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},cn=0;cn<8;cn++)ln.EXP_TABLE[cn]=1<<cn;for(cn=8;cn<256;cn++)ln.EXP_TABLE[cn]=ln.EXP_TABLE[cn-4]^ln.EXP_TABLE[cn-5]^ln.EXP_TABLE[cn-6]^ln.EXP_TABLE[cn-8];for(cn=0;cn<255;cn++)ln.LOG_TABLE[ln.EXP_TABLE[cn]]=cn;function hn(e,t){if(null==e.length)throw new Error(e.length+"/"+t);for(var i=0;i<e.length&&0==e[i];)i++;this.num=new Array(e.length-i+t);for(var n=0;n<e.length-i;n++)this.num[n]=e[n+i]}function fn(e,t){this.totalCount=e,this.dataCount=t}function dn(){this.buffer=[],this.length=0}hn.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),i=0;i<this.getLength();i++)for(var n=0;n<e.getLength();n++)t[i+n]^=ln.gexp(ln.glog(this.get(i))+ln.glog(e.get(n)));return new hn(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=ln.glog(this.get(0))-ln.glog(e.get(0)),i=new Array(this.getLength()),n=0;n<this.getLength();n++)i[n]=this.get(n);for(n=0;n<e.getLength();n++)i[n]^=ln.gexp(ln.glog(e.get(n))+t);return new hn(i,0).mod(e)}},fn.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],fn.getRSBlocks=function(e,t){var i=fn.getRsBlockTable(e,t);if(null==i)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var n=i.length/3,r=[],a=0;a<n;a++)for(var s=i[3*a+0],o=i[3*a+1],l=i[3*a+2],c=0;c<s;c++)r.push(new fn(o,l));return r},fn.getRsBlockTable=function(e,t){switch(t){case Xi.L:return fn.RS_BLOCK_TABLE[4*(e-1)+0];case Xi.M:return fn.RS_BLOCK_TABLE[4*(e-1)+1];case Xi.Q:return fn.RS_BLOCK_TABLE[4*(e-1)+2];case Xi.H:return fn.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},dn.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var i=0;i<t;i++)this.putBit(1==(e>>>t-i-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var un=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];let pn;function gn(e,t){for(var i=1,n=function(e){var t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=e?3:0)}(e),r=0,a=un.length;r<=a;r++){var s=0;switch(t){case Xi.L:s=un[r][0];break;case Xi.M:s=un[r][1];break;case Xi.Q:s=un[r][2];break;case Xi.H:s=un[r][3]}if(n<=s)break;i++}if(i>un.length)throw new Error("Too long data");return i}"svg"===document.documentElement.tagName.toLowerCase()?(pn=function(e,t){this._el=e,this._htOption=t},pn.prototype.draw=function(e){var t=this._htOption,i=this._el,n=e.getModuleCount();function r(e,t){var i=document.createElementNS("http://www.w3.org/2000/svg",e);for(var n in t)t.hasOwnProperty(n)&&i.setAttribute(n,t[n]);return i}Math.floor(t.width/n),Math.floor(t.height/n),this.clear();var a=r("svg",{viewBox:"0 0 "+String(n)+" "+String(n),width:"100%",height:"100%",fill:t.colorLight});a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),i.appendChild(a),a.appendChild(r("rect",{fill:t.colorLight,width:"100%",height:"100%"})),a.appendChild(r("rect",{fill:t.colorDark,width:"1",height:"1",id:"template"}));for(var s=0;s<n;s++)for(var o=0;o<n;o++)if(e.isDark(s,o)){var l=r("use",{x:String(o),y:String(s)});l.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),a.appendChild(l)}},pn.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)}):(pn=function(e,t){this._bIsPainted=!1,this._htOption=t,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=t.width,this._elCanvas.height=t.height,e.appendChild(this._elCanvas),this._el=e,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null},pn.prototype.draw=function(e){var t=this._elImage,i=this._oContext,n=this._htOption,r=e.getModuleCount(),a=n.width/r,s=n.height/r,o=Math.round(a),l=Math.round(s);t.style.display="none",this.clear();for(var c=0;c<r;c++)for(var h=0;h<r;h++){var f=e.isDark(c,h),d=h*a,u=c*s;i.strokeStyle=f?n.colorDark:n.colorLight,i.lineWidth=1,i.fillStyle=f?n.colorDark:n.colorLight,i.fillRect(d,u,a,s),i.strokeRect(Math.floor(d)+.5,Math.floor(u)+.5,o,l),i.strokeRect(Math.ceil(d)-.5,Math.ceil(u)-.5,o,l)}this._bIsPainted=!0},pn.prototype.makeImage=function(){this._bIsPainted&&(this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none")},pn.prototype.isPainted=function(){return this._bIsPainted},pn.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},pn.prototype.round=function(e){return e?Math.floor(1e3*e)/1e3:e});const wn=function(e,t){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:Xi.H},"string"==typeof t&&(t={text:t}),t)for(var i in t)this._htOption[i]=t[i];"string"==typeof e&&(e=document.getElementById(e)),this._htOption.useSVG&&(pn=svgDrawer),this._el=e,this._oQRCode=null,this._oDrawing=new pn(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)};function mn(e){return bn("div",e)}function bn(e,t){const i=document.createElement(e);return t&&(t.class&&i.classList.add(t.class),t.id&&(i.id=t.id),t.style&&function(e,t){for(let i of Object.keys(t))e.style[i]=t[i]}(i,t.style)),i}function yn(e){const t=getComputedStyle(e);"none"!==t.display&&(e._initialDisplay=t.display),e.style.display="none"}function vn(e){if("none"===getComputedStyle(e).display){const t=e._initialDisplay||"block";e.style.display=t}}function _n(e,t){return function(e,t){t=t||"currentColor";let i=kn[e];i||(console.error(`No icon named: ${e}`),i=kn.question);const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttributeNS(null,"viewBox","0 0 "+i[0]+" "+i[1]);const r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttributeNS(null,"fill",t),r.setAttributeNS(null,"d",i[4]),n.appendChild(r),n}(e,t)}wn.prototype.makeCode=function(e){this._oQRCode=new Vi(gn(e,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(e),this._oQRCode.make(),this._el.title=e,this._oDrawing.draw(this._oQRCode),this.makeImage()},wn.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&this._oDrawing.makeImage()},wn.prototype.clear=function(){this._oDrawing.clear()},wn.CorrectLevel=Xi;const kn={check:[512,512,[],"f00c","M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"],cog:[512,512,[],"f013","M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"],exclamation:[192,512,[],"f12a","M176 432c0 44.112-35.888 80-80 80s-80-35.888-80-80 35.888-80 80-80 80 35.888 80 80zM25.26 25.199l13.6 272C39.499 309.972 50.041 320 62.83 320h66.34c12.789 0 23.331-10.028 23.97-22.801l13.6-272C167.425 11.49 156.496 0 142.77 0H49.23C35.504 0 24.575 11.49 25.26 25.199z"],"exclamation-circle":[512,512,[],"f06a","M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],"exclamation-triangle":[576,512,[],"f071","M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],minus:[448,512,[],"f068","M424 318.2c13.3 0 24-10.7 24-24v-76.4c0-13.3-10.7-24-24-24H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h400z"],"minus-circle":[512,512,[],"f056","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"],"minus-square":[448,512,[],"f146","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM92 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H92z"],plus:[448,512,[],"f067","M448 294.2v-76.4c0-13.3-10.7-24-24-24H286.2V56c0-13.3-10.7-24-24-24h-76.4c-13.3 0-24 10.7-24 24v137.8H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h137.8V456c0 13.3 10.7 24 24 24h76.4c13.3 0 24-10.7 24-24V318.2H424c13.3 0 24-10.7 24-24z"],"plus-circle":[512,512,[],"f055","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],"plus-square":[448,512,[],"f0fe","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-32 252c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92H92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],question:[384,512,[],"f128","M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z"],save:[448,512,[],"f0c7","M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"],search:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"],share:[512,512,[],"f064","M503.691 189.836L327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z"],spinner:[512,512,[],"f110","M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"],square:[448,512,[],"f0c8","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"],"square-full":[512,512,[],"f45c","M512 512H0V0h512v512z"],times:[384,512,[],"f00d","M323.1 441l53.9-53.9c9.4-9.4 9.4-24.5 0-33.9L279.8 256l97.2-97.2c9.4-9.4 9.4-24.5 0-33.9L323.1 71c-9.4-9.4-24.5-9.4-33.9 0L192 168.2 94.8 71c-9.4-9.4-24.5-9.4-33.9 0L7 124.9c-9.4 9.4-9.4 24.5 0 33.9l97.2 97.2L7 353.2c-9.4 9.4-9.4 24.5 0 33.9L60.9 441c9.4 9.4 24.5 9.4 33.9 0l97.2-97.2 97.2 97.2c9.3 9.3 24.5 9.3 33.9 0z"],"times-circle":[512,512,[],"f057","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"],wrench:[512,512,[],"f0ad","M481.156 200c9.3 0 15.12 10.155 10.325 18.124C466.295 259.992 420.419 288 368 288c-79.222 0-143.501-63.974-143.997-143.079C223.505 65.469 288.548-.001 368.002 0c52.362.001 98.196 27.949 123.4 69.743C496.24 77.766 490.523 88 481.154 88H376l-40 56 40 56h105.156zm-171.649 93.003L109.255 493.255c-24.994 24.993-65.515 24.994-90.51 0-24.993-24.994-24.993-65.516 0-90.51L218.991 202.5c16.16 41.197 49.303 74.335 90.516 90.503zM104 432c0-13.255-10.745-24-24-24s-24 10.745-24 24 10.745 24 24 24 24-10.745 24-24z"]};var xn={Huffman:{},Util:{},CRC32:{},CompressionMethod:{DEFLATE:8,RESERVED:15},Zip:function(e){e=e||{},this.files=[],this.comment=e.comment,this.password}};xn.Zip.CompressionMethod={STORE:0,DEFLATE:8},xn.Zip.OperatingSystem={MSDOS:0,UNIX:3,MACINTOSH:7},xn.Zip.Flags={ENCRYPT:1,DESCRIPTOR:8,UTF8:2048},xn.Zip.FileHeaderSignature=[80,75,1,2],xn.Zip.LocalFileHeaderSignature=[80,75,3,4],xn.Zip.CentralDirectorySignature=[80,75,5,6],xn.Zip.prototype.addFile=function(e,t){var i;(t=t||{}).filename;var n=e.length,r=0;if(e instanceof Array&&(e=new Uint8Array(e)),"number"!=typeof t.compressionMethod&&(t.compressionMethod=xn.Zip.CompressionMethod.DEFLATE),t.compress)switch(t.compressionMethod){case xn.Zip.CompressionMethod.STORE:break;case xn.Zip.CompressionMethod.DEFLATE:r=xn.CRC32.calc(e),e=this.deflateWithOption(e,t),i=!0;break;default:throw new Error("unknown compression method:"+t.compressionMethod)}this.files.push({buffer:e,option:t,compressed:i,encrypted:!1,size:n,crc32:r})},xn.Zip.prototype.setPassword=function(e){this.password=e},xn.Zip.prototype.compress=function(){var e,t,i,n,r,a,s,o,l,c,h,f,d,u,p,g,w,m,b,y,v,_,k,x,E,S,R=this.files,T=0,D=0;for(k=0,x=R.length;k<x;++k){if(u=(e=R[k]).option.filename?e.option.filename.length:0,p=e.option.extraField?e.option.extraField.length:0,g=e.option.comment?e.option.comment.length:0,!e.compressed)switch(e.crc32=xn.CRC32.calc(e.buffer),e.option.compressionMethod){case xn.Zip.CompressionMethod.STORE:break;case xn.Zip.CompressionMethod.DEFLATE:e.buffer=this.deflateWithOption(e.buffer,e.option),e.compressed=!0;break;default:throw new Error("unknown compression method:"+e.option.compressionMethod)}if(void 0!==e.option.password||void 0!==this.password){for(_=this.createEncryptionKey(e.option.password||this.password),y=e.buffer,(v=new Uint8Array(y.length+12)).set(y,12),y=v,E=0;E<12;++E)y[E]=this.encode(_,11===k?255&e.crc32:256*Math.random()|0);for(S=y.length;E<S;++E)y[E]=this.encode(_,y[E]);e.buffer=y}T+=30+u+e.buffer.length,D+=46+u+g}for(a=22+(this.comment?this.comment.length:0),t=new Uint8Array(T+D+a),i=0,r=(n=T)+D,k=0,x=R.length;k<x;++k)u=(e=R[k]).option.filename?e.option.filename.length:0,p=0,g=e.option.comment?e.option.comment.length:0,s=i,t[i++]=xn.Zip.LocalFileHeaderSignature[0],t[i++]=xn.Zip.LocalFileHeaderSignature[1],t[i++]=xn.Zip.LocalFileHeaderSignature[2],t[i++]=xn.Zip.LocalFileHeaderSignature[3],t[n++]=xn.Zip.FileHeaderSignature[0],t[n++]=xn.Zip.FileHeaderSignature[1],t[n++]=xn.Zip.FileHeaderSignature[2],t[n++]=xn.Zip.FileHeaderSignature[3],20,t[n++]=20,t[n++]=e.option.os||xn.Zip.OperatingSystem.MSDOS,t[i++]=t[n++]=20,t[i++]=t[n++]=0,o=0,(e.option.password||this.password)&&(o|=xn.Zip.Flags.ENCRYPT),t[i++]=t[n++]=255&o,t[i++]=t[n++]=o>>8&255,l=e.option.compressionMethod,t[i++]=t[n++]=255&l,t[i++]=t[n++]=l>>8&255,c=e.option.date||new Date,t[i++]=t[n++]=(7&c.getMinutes())<<5|c.getSeconds()/2|0,t[i++]=t[n++]=c.getHours()<<3|c.getMinutes()>>3,t[i++]=t[n++]=(c.getMonth()+1&7)<<5|c.getDate(),t[i++]=t[n++]=(c.getFullYear()-1980&127)<<1|c.getMonth()+1>>3,h=e.crc32,t[i++]=t[n++]=255&h,t[i++]=t[n++]=h>>8&255,t[i++]=t[n++]=h>>16&255,t[i++]=t[n++]=h>>24&255,f=e.buffer.length,t[i++]=t[n++]=255&f,t[i++]=t[n++]=f>>8&255,t[i++]=t[n++]=f>>16&255,t[i++]=t[n++]=f>>24&255,d=e.size,t[i++]=t[n++]=255&d,t[i++]=t[n++]=d>>8&255,t[i++]=t[n++]=d>>16&255,t[i++]=t[n++]=d>>24&255,t[i++]=t[n++]=255&u,t[i++]=t[n++]=u>>8&255,t[i++]=t[n++]=255&p,t[i++]=t[n++]=p>>8&255,t[n++]=255&g,t[n++]=g>>8&255,t[n++]=0,t[n++]=0,t[n++]=0,t[n++]=0,t[n++]=0,t[n++]=0,t[n++]=0,t[n++]=0,t[n++]=255&s,t[n++]=s>>8&255,t[n++]=s>>16&255,t[n++]=s>>24&255,(w=e.option.filename)&&(t.set(w,i),t.set(w,n),i+=u,n+=u),(m=e.option.extraField)&&(t.set(m,i),t.set(m,n),i+=p,n+=p),(b=e.option.comment)&&(t.set(b,n),n+=g),t.set(e.buffer,i),i+=e.buffer.length;return t[r++]=xn.Zip.CentralDirectorySignature[0],t[r++]=xn.Zip.CentralDirectorySignature[1],t[r++]=xn.Zip.CentralDirectorySignature[2],t[r++]=xn.Zip.CentralDirectorySignature[3],t[r++]=0,t[r++]=0,t[r++]=0,t[r++]=0,t[r++]=255&x,t[r++]=x>>8&255,t[r++]=255&x,t[r++]=x>>8&255,t[r++]=255&D,t[r++]=D>>8&255,t[r++]=D>>16&255,t[r++]=D>>24&255,t[r++]=255&T,t[r++]=T>>8&255,t[r++]=T>>16&255,t[r++]=T>>24&255,g=this.comment?this.comment.length:0,t[r++]=255&g,t[r++]=g>>8&255,this.comment&&(t.set(this.comment,r),r+=g),t},xn.Zip.prototype.deflateWithOption=function(e,t){return new xn.RawDeflate(e,t.deflateOption).compress()},xn.Zip.prototype.getByte=function(e){var t=65535&e[2]|2;return t*(1^t)>>8&255},xn.Zip.prototype.encode=function(e,t){var i=this.getByte(e);return this.updateKeys(e,t),i^t},xn.Zip.prototype.updateKeys=function(e,t){e[0]=xn.CRC32.single(e[0],t),e[1]=1+(6681*(20173*(e[1]+(255&e[0]))>>>0)>>>0)>>>0,e[2]=xn.CRC32.single(e[2],e[1]>>>24)},xn.Zip.prototype.createEncryptionKey=function(e){var t,i,n=[305419896,591751049,878082192];for(n=new Uint32Array(n),t=0,i=e.length;t<i;++t)this.updateKeys(n,255&e[t]);return n},xn.Huffman.buildHuffmanTable=function(e){var t,i,n,r,a,s,o,l,c,h,f,d=e.length,u=0,p=Number.POSITIVE_INFINITY;for(l=0,c=d;l<c;++l)e[l]>u&&(u=e[l]),e[l]<p&&(p=e[l]);for(t=1<<u,i=new Uint32Array(t),n=1,r=0,a=2;n<=u;){for(l=0;l<d;++l)if(e[l]===n){for(s=0,o=r,h=0;h<n;++h)s=s<<1|1&o,o>>=1;for(f=n<<16|l,h=s;h<t;h+=a)i[h]=f;++r}++n,r<<=1,a<<=1}return[i,u,p]};var En=xn.Huffman.buildHuffmanTable;xn.RawInflate=function(e,t){switch(this.buffer,this.blocks=[],this.bufferSize=32768,this.totalpos=0,this.ip=0,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(e),this.output,this.op,this.bfinal=!1,this.bufferType=xn.RawInflate.BufferType.ADAPTIVE,this.resize=!1,!t&&(t={})||(t.index&&(this.ip=t.index),t.bufferSize&&(this.bufferSize=t.bufferSize),t.bufferType&&(this.bufferType=t.bufferType),t.resize&&(this.resize=t.resize)),this.bufferType){case xn.RawInflate.BufferType.BLOCK:this.op=xn.RawInflate.MaxBackwardLength,this.output=new Uint8Array(xn.RawInflate.MaxBackwardLength+this.bufferSize+xn.RawInflate.MaxCopyLength);break;case xn.RawInflate.BufferType.ADAPTIVE:this.op=0,this.output=new Uint8Array(this.bufferSize);break;default:throw new Error("invalid inflate mode")}},xn.RawInflate.BufferType={BLOCK:0,ADAPTIVE:1},xn.RawInflate.prototype.decompress=function(){for(;!this.bfinal;)this.parseBlock();switch(this.bufferType){case xn.RawInflate.BufferType.BLOCK:return this.concatBufferBlock();case xn.RawInflate.BufferType.ADAPTIVE:return this.concatBufferDynamic();default:throw new Error("invalid inflate mode")}},xn.RawInflate.MaxBackwardLength=32768,xn.RawInflate.MaxCopyLength=258,xn.RawInflate.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),xn.RawInflate.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),xn.RawInflate.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),xn.RawInflate.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),xn.RawInflate.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),xn.RawInflate.FixedLiteralLengthTable=function(){var e,t,i=new Uint8Array(288);for(e=0,t=i.length;e<t;++e)i[e]=e<=143?8:e<=255?9:e<=279?7:8;return En(i)}(),xn.RawInflate.FixedDistanceTable=function(){var e,t,i=new Uint8Array(30);for(e=0,t=i.length;e<t;++e)i[e]=5;return En(i)}(),xn.RawInflate.prototype.parseBlock=function(){var e=this.readBits(3);switch(1&e&&(this.bfinal=!0),e>>>=1){case 0:this.parseUncompressedBlock();break;case 1:this.parseFixedHuffmanBlock();break;case 2:this.parseDynamicHuffmanBlock();break;default:throw new Error("unknown BTYPE: "+e)}},xn.RawInflate.prototype.readBits=function(e){var t,i=this.bitsbuf,n=this.bitsbuflen,r=this.input,a=this.ip;if(a+(e-n+7>>3)>=r.length)throw new Error("input buffer is broken");for(;n<e;)i|=r[a++]<<n,n+=8;return t=i&(1<<e)-1,i>>>=e,n-=e,this.bitsbuf=i,this.bitsbuflen=n,this.ip=a,t},xn.RawInflate.prototype.readCodeByTable=function(e){for(var t,i,n=this.bitsbuf,r=this.bitsbuflen,a=this.input,s=this.ip,o=a.length,l=e[0],c=e[1];r<c&&!(s>=o);)n|=a[s++]<<r,r+=8;if((i=(t=l[n&(1<<c)-1])>>>16)>r)throw new Error("invalid code length: "+i);return this.bitsbuf=n>>i,this.bitsbuflen=r-i,this.ip=s,65535&t},xn.RawInflate.prototype.parseUncompressedBlock=function(){var e,t,i=this.input,n=this.ip,r=this.output,a=this.op,s=i.length,o=r.length;if(this.bitsbuf=0,this.bitsbuflen=0,n+1>=s)throw new Error("invalid uncompressed block header: LEN");if(e=i[n++]|i[n++]<<8,n+1>=s)throw new Error("invalid uncompressed block header: NLEN");if(e===~(i[n++]|i[n++]<<8))throw new Error("invalid uncompressed block header: length verify");if(n+e>i.length)throw new Error("input buffer is broken");switch(this.bufferType){case xn.RawInflate.BufferType.BLOCK:for(;a+e>r.length;)e-=t=o-a,r.set(i.subarray(n,n+t),a),a+=t,n+=t,this.op=a,r=this.expandBufferBlock(),a=this.op;break;case xn.RawInflate.BufferType.ADAPTIVE:for(;a+e>r.length;)r=this.expandBufferAdaptive({fixRatio:2});break;default:throw new Error("invalid inflate mode")}r.set(i.subarray(n,n+e),a),a+=e,n+=e,this.ip=n,this.op=a,this.output=r},xn.RawInflate.prototype.parseFixedHuffmanBlock=function(){switch(this.bufferType){case xn.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(xn.RawInflate.FixedLiteralLengthTable,xn.RawInflate.FixedDistanceTable);break;case xn.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(xn.RawInflate.FixedLiteralLengthTable,xn.RawInflate.FixedDistanceTable);break;default:throw new Error("invalid inflate mode")}},xn.RawInflate.prototype.parseDynamicHuffmanBlock=function(){var e,t,i,n,r,a,s,o,l,c=this.readBits(5)+257,h=this.readBits(5)+1,f=this.readBits(4)+4,d=new Uint8Array(xn.RawInflate.Order.length);for(o=0;o<f;++o)d[xn.RawInflate.Order[o]]=this.readBits(3);for(e=En(d),n=new Uint8Array(c+h),o=0,l=c+h;o<l;)switch(r=this.readCodeByTable(e)){case 16:for(s=3+this.readBits(2);s--;)n[o++]=a;break;case 17:for(s=3+this.readBits(3);s--;)n[o++]=0;a=0;break;case 18:for(s=11+this.readBits(7);s--;)n[o++]=0;a=0;break;default:n[o++]=r,a=r}switch(t=En(n.subarray(0,c)),i=En(n.subarray(c)),this.bufferType){case xn.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(t,i);break;case xn.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(t,i);break;default:throw new Error("invalid inflate mode")}},xn.RawInflate.prototype.decodeHuffmanBlock=function(e,t){var i=this.output,n=this.op;this.currentLitlenTable=e;for(var r,a,s,o,l=i.length-xn.RawInflate.MaxCopyLength,c=xn.RawInflate.LengthCodeTable,h=xn.RawInflate.LengthExtraTable,f=xn.RawInflate.DistCodeTable,d=xn.RawInflate.DistExtraTable;256!==(r=this.readCodeByTable(e));)if(r<256)n>=l&&(this.op=n,i=this.expandBufferBlock(),n=this.op),i[n++]=r;else for(o=c[a=r-257],h[a]>0&&(o+=this.readBits(h[a])),s=f[r=this.readCodeByTable(t)],d[r]>0&&(s+=this.readBits(d[r])),n>=l&&(this.op=n,i=this.expandBufferBlock(),n=this.op);o--;)i[n]=i[n++-s];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=n},xn.RawInflate.prototype.decodeHuffmanAdaptive=function(e,t){var i=this.output,n=this.op;this.currentLitlenTable=e;for(var r,a,s,o,l=i.length,c=xn.RawInflate.LengthCodeTable,h=xn.RawInflate.LengthExtraTable,f=xn.RawInflate.DistCodeTable,d=xn.RawInflate.DistExtraTable;256!==(r=this.readCodeByTable(e));)if(r<256)n>=l&&(l=(i=this.expandBufferAdaptive()).length),i[n++]=r;else for(o=c[a=r-257],h[a]>0&&(o+=this.readBits(h[a])),s=f[r=this.readCodeByTable(t)],d[r]>0&&(s+=this.readBits(d[r])),n+o>l&&(l=(i=this.expandBufferAdaptive()).length);o--;)i[n]=i[n++-s];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=n},xn.RawInflate.prototype.expandBufferBlock=function(e){var t=new Uint8Array(this.op-xn.RawInflate.MaxBackwardLength),i=this.op-xn.RawInflate.MaxBackwardLength,n=this.output;return t.set(n.subarray(xn.RawInflate.MaxBackwardLength,t.length)),this.blocks.push(t),this.totalpos+=t.length,n.set(n.subarray(i,i+xn.RawInflate.MaxBackwardLength)),this.op=xn.RawInflate.MaxBackwardLength,n},xn.RawInflate.prototype.expandBufferAdaptive=function(e){var t,i,n,r=this.input.length/this.ip+1|0,a=this.input,s=this.output;return e&&("number"==typeof e.fixRatio&&(r=e.fixRatio),"number"==typeof e.addRatio&&(r+=e.addRatio)),i=r<2?(n=(a.length-this.ip)/this.currentLitlenTable[2]/2*258|0)<s.length?s.length+n:s.length<<1:s.length*r,(t=new Uint8Array(i)).set(s),this.output=t,this.output},xn.RawInflate.prototype.concatBufferBlock=function(){var e,t,i,n,r,a=0,s=this.totalpos+(this.op-xn.RawInflate.MaxBackwardLength),o=this.output,l=this.blocks,c=new Uint8Array(s);if(0===l.length)return this.output.subarray(xn.RawInflate.MaxBackwardLength,this.op);for(t=0,i=l.length;t<i;++t)for(n=0,r=(e=l[t]).length;n<r;++n)c[a++]=e[n];for(t=xn.RawInflate.MaxBackwardLength,i=this.op;t<i;++t)c[a++]=o[t];return this.blocks=[],this.buffer=c,this.buffer},xn.RawInflate.prototype.concatBufferDynamic=function(){var e,t=this.op;return this.resize?(e=new Uint8Array(t)).set(this.output.subarray(0,t)):e=this.output.subarray(0,t),this.buffer=e,this.buffer};var Sn;En=xn.Huffman.buildHuffmanTable;function Rn(e){return"string"==typeof e||e instanceof String}function Tn(e){return e.includes("googleapis")&&!e.includes("urlshortener")||Dn(e)||Cn(e)}function Dn(e){return e.startsWith("gs://")||e.startsWith("https://www.googleapis.com/storage")||e.startsWith("https://storage.cloud.google.com")||e.startsWith("https://storage.googleapis.com")}function Cn(e){return e.indexOf("drive.google.com")>=0||e.indexOf("www.googleapis.com/drive")>0}function An(e){let{bucket:t,object:i}=function(e){let t,i;if(e.startsWith("gs://")){const n=e.indexOf("/",5);if(n>=0){t=e.substring(5,n);const r=e.indexOf("?");i=r<0?e.substring(n+1):e.substring(n+1,r)}}else if(e.startsWith("https://storage.googleapis.com")||e.startsWith("https://storage.cloud.google.com")){const n=e.indexOf("/v1/b/",8);if(n>0){const r=e.indexOf("/o/",n);if(r>0){const a=e.indexOf("?",r);t=e.substring(n+6,r),i=a>0?e.substring(r+3,a):e.substring(r+3)}}else{const n=e.indexOf("/",8),r=e.indexOf("/",n+1),a=e.indexOf("?",r);r>0&&(t=e.substring(n+1,r),i=a<0?e.substring(r+1):e.substring(r+1,a))}}else if(e.startsWith("https://www.googleapis.com/storage/v1/b")){const n=e.indexOf("/v1/b/",8),r=e.indexOf("/o/",n);if(r>0){const a=e.indexOf("?",r);t=e.substring(n+6,r),i=a>0?e.substring(r+3,a):e.substring(r+3)}}if(t&&i)return{bucket:t,object:i};throw Error(`Unrecognized Google Storage URI: ${e}`)}(e);i=function(e){let t="";return e.split("").forEach((function(e){In.has(e)?t+=In.get(e):t+=e})),t}(i);const n=e.indexOf("?");return`https://storage.googleapis.com/storage/v1/b/${t}/o/${i}${n>0?e.substring(n)+"&alt=media":"?alt=media"}`}function Ln(e){var t=Bn(e);return t?"https://www.googleapis.com/drive/v3/files/"+t+"?alt=media&supportsTeamDrives=true":e}function Bn(e){if(e.includes("/open?id=")){const t=e.indexOf("/open?id=")+9,i=e.indexOf("&");if(t>0&&i>t)return e.substring(t,i);if(t>0)return e.substring(t)}else{if(e.includes("/file/d/")){const t=e.indexOf("/file/d/")+8,i=e.lastIndexOf("/");return e.substring(t,i)}if(e.startsWith("https://www.googleapis.com/drive")){let t=e.indexOf("/files/");const i=e.indexOf("?");if(t>0)return t+=7,i>0?e.substring(t,i):e.substring(t)}}throw Error("Unknown Google Drive url format: "+e)}xn.RawInflateStream=function(e,t,i){this.blocks=[],this.bufferSize=i||65e3,this.totalpos=0,this.ip=void 0===t?0:t,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(e),this.output=new Uint8Array(this.bufferSize),this.op=0,this.bfinal=!1,this.blockLength,this.resize=!1,this.litlenTable,this.distTable,this.sp=0,this.status=xn.RawInflateStream.Status.INITIALIZED,this.ip_,this.bitsbuflen_,this.bitsbuf_},xn.RawInflateStream.BlockType={UNCOMPRESSED:0,FIXED:1,DYNAMIC:2},xn.RawInflateStream.Status={INITIALIZED:0,BLOCK_HEADER_START:1,BLOCK_HEADER_END:2,BLOCK_BODY_START:3,BLOCK_BODY_END:4,DECODE_BLOCK_START:5,DECODE_BLOCK_END:6},xn.RawInflateStream.prototype.decompress=function(e,t){var i=!1;for(void 0!==e&&(this.input=e),void 0!==t&&(this.ip=t);!i;)switch(this.status){case xn.RawInflateStream.Status.INITIALIZED:case xn.RawInflateStream.Status.BLOCK_HEADER_START:this.readBlockHeader()<0&&(i=!0);break;case xn.RawInflateStream.Status.BLOCK_HEADER_END:case xn.RawInflateStream.Status.BLOCK_BODY_START:switch(this.currentBlockType){case xn.RawInflateStream.BlockType.UNCOMPRESSED:this.readUncompressedBlockHeader()<0&&(i=!0);break;case xn.RawInflateStream.BlockType.FIXED:this.parseFixedHuffmanBlock()<0&&(i=!0);break;case xn.RawInflateStream.BlockType.DYNAMIC:this.parseDynamicHuffmanBlock()<0&&(i=!0)}break;case xn.RawInflateStream.Status.BLOCK_BODY_END:case xn.RawInflateStream.Status.DECODE_BLOCK_START:switch(this.currentBlockType){case xn.RawInflateStream.BlockType.UNCOMPRESSED:this.parseUncompressedBlock()<0&&(i=!0);break;case xn.RawInflateStream.BlockType.FIXED:case xn.RawInflateStream.BlockType.DYNAMIC:this.decodeHuffman()<0&&(i=!0)}break;case xn.RawInflateStream.Status.DECODE_BLOCK_END:this.bfinal?i=!0:this.status=xn.RawInflateStream.Status.INITIALIZED}return this.concatBuffer()},xn.RawInflateStream.MaxBackwardLength=32768,xn.RawInflateStream.MaxCopyLength=258,xn.RawInflateStream.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),xn.RawInflateStream.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),xn.RawInflateStream.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),xn.RawInflateStream.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),xn.RawInflateStream.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),xn.RawInflateStream.FixedLiteralLengthTable=function(){var e,t,i=new Uint8Array(288);for(e=0,t=i.length;e<t;++e)i[e]=e<=143?8:e<=255?9:e<=279?7:8;return En(i)}(),xn.RawInflateStream.FixedDistanceTable=function(){var e,t,i=new Uint8Array(30);for(e=0,t=i.length;e<t;++e)i[e]=5;return En(i)}(),xn.RawInflateStream.prototype.readBlockHeader=function(){var e;if(this.status=xn.RawInflateStream.Status.BLOCK_HEADER_START,this.save_(),(e=this.readBits(3))<0)return this.restore_(),-1;switch(1&e&&(this.bfinal=!0),e>>>=1){case 0:this.currentBlockType=xn.RawInflateStream.BlockType.UNCOMPRESSED;break;case 1:this.currentBlockType=xn.RawInflateStream.BlockType.FIXED;break;case 2:this.currentBlockType=xn.RawInflateStream.BlockType.DYNAMIC;break;default:throw new Error("unknown BTYPE: "+e)}this.status=xn.RawInflateStream.Status.BLOCK_HEADER_END},xn.RawInflateStream.prototype.readBits=function(e){for(var t,i=this.bitsbuf,n=this.bitsbuflen,r=this.input,a=this.ip;n<e;){if(r.length<=a)return-1;i|=(t=r[a++])<<n,n+=8}return t=i&(1<<e)-1,i>>>=e,n-=e,this.bitsbuf=i,this.bitsbuflen=n,this.ip=a,t},xn.RawInflateStream.prototype.readCodeByTable=function(e){for(var t,i,n=this.bitsbuf,r=this.bitsbuflen,a=this.input,s=this.ip,o=e[0],l=e[1];r<l;){if(a.length<=s)return-1;n|=a[s++]<<r,r+=8}if((i=(t=o[n&(1<<l)-1])>>>16)>r)throw new Error("invalid code length: "+i);return this.bitsbuf=n>>i,this.bitsbuflen=r-i,this.ip=s,65535&t},xn.RawInflateStream.prototype.readUncompressedBlockHeader=function(){var e,t=this.input,i=this.ip;if(this.status=xn.RawInflateStream.Status.BLOCK_BODY_START,i+4>=t.length)return-1;if((e=t[i++]|t[i++]<<8)===~(t[i++]|t[i++]<<8))throw new Error("invalid uncompressed block header: length verify");this.bitsbuf=0,this.bitsbuflen=0,this.ip=i,this.blockLength=e,this.status=xn.RawInflateStream.Status.BLOCK_BODY_END},xn.RawInflateStream.prototype.parseUncompressedBlock=function(){var e=this.input,t=this.ip,i=this.output,n=this.op,r=this.blockLength;for(this.status=xn.RawInflateStream.Status.DECODE_BLOCK_START;r--;){if(n===i.length&&(i=this.expandBuffer({fixRatio:2})),t>=e.length)return this.ip=t,this.op=n,this.blockLength=r+1,-1;i[n++]=e[t++]}return r<0&&(this.status=xn.RawInflateStream.Status.DECODE_BLOCK_END),this.ip=t,this.op=n,0},xn.RawInflateStream.prototype.parseFixedHuffmanBlock=function(){return this.status=xn.RawInflateStream.Status.BLOCK_BODY_START,this.litlenTable=xn.RawInflateStream.FixedLiteralLengthTable,this.distTable=xn.RawInflateStream.FixedDistanceTable,this.status=xn.RawInflateStream.Status.BLOCK_BODY_END,0},xn.RawInflateStream.prototype.save_=function(){this.ip_=this.ip,this.bitsbuflen_=this.bitsbuflen,this.bitsbuf_=this.bitsbuf},xn.RawInflateStream.prototype.restore_=function(){this.ip=this.ip_,this.bitsbuflen=this.bitsbuflen_,this.bitsbuf=this.bitsbuf_},xn.RawInflateStream.prototype.parseDynamicHuffmanBlock=function(){var e,t,i,n,r=new Uint8Array(xn.RawInflateStream.Order.length);if(this.status=xn.RawInflateStream.Status.BLOCK_BODY_START,this.save_(),e=this.readBits(5)+257,t=this.readBits(5)+1,i=this.readBits(4)+4,e<0||t<0||i<0)return this.restore_(),-1;try{(function(){var a,s,o,l,c,h,f=0;for(c=0;c<i;++c){if((a=this.readBits(3))<0)throw new Error("not enough input");r[xn.RawInflateStream.Order[c]]=a}for(n=En(r),l=new Uint8Array(e+t),c=0,h=e+t;c<h;){if((s=this.readCodeByTable(n))<0)throw new Error("not enough input");switch(s){case 16:if((a=this.readBits(2))<0)throw new Error("not enough input");for(o=3+a;o--;)l[c++]=f;break;case 17:if((a=this.readBits(3))<0)throw new Error("not enough input");for(o=3+a;o--;)l[c++]=0;f=0;break;case 18:if((a=this.readBits(7))<0)throw new Error("not enough input");for(o=11+a;o--;)l[c++]=0;f=0;break;default:l[c++]=s,f=s}}this.litlenTable=En(l.subarray(0,e)),this.distTable=En(l.subarray(e))}).call(this)}catch(e){return this.restore_(),-1}return this.status=xn.RawInflateStream.Status.BLOCK_BODY_END,0},xn.RawInflateStream.prototype.decodeHuffman=function(){var e,t,i,n,r,a=this.output,s=this.op,o=this.litlenTable,l=this.distTable,c=a.length;for(this.status=xn.RawInflateStream.Status.DECODE_BLOCK_START;;){if(this.save_(),(e=this.readCodeByTable(o))<0)return this.op=s,this.restore_(),-1;if(256===e)break;if(e<256)s===c&&(c=(a=this.expandBuffer()).length),a[s++]=e;else{if(t=e-257,n=xn.RawInflateStream.LengthCodeTable[t],xn.RawInflateStream.LengthExtraTable[t]>0){if((r=this.readBits(xn.RawInflateStream.LengthExtraTable[t]))<0)return this.op=s,this.restore_(),-1;n+=r}if((e=this.readCodeByTable(l))<0)return this.op=s,this.restore_(),-1;if(i=xn.RawInflateStream.DistCodeTable[e],xn.RawInflateStream.DistExtraTable[e]>0){if((r=this.readBits(xn.RawInflateStream.DistExtraTable[e]))<0)return this.op=s,this.restore_(),-1;i+=r}for(s+n>=c&&(c=(a=this.expandBuffer()).length);n--;)a[s]=a[s++-i];if(this.ip===this.input.length)return this.op=s,-1}}for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=s,this.status=xn.RawInflateStream.Status.DECODE_BLOCK_END},xn.RawInflateStream.prototype.expandBuffer=function(e){var t,i,n,r=this.input.length/this.ip+1|0,a=this.input,s=this.output;return e&&("number"==typeof e.fixRatio&&(r=e.fixRatio),"number"==typeof e.addRatio&&(r+=e.addRatio)),i=r<2?(n=(a.length-this.ip)/this.litlenTable[2]/2*258|0)<s.length?s.length+n:s.length<<1:s.length*r,(t=new Uint8Array(i)).set(s),this.output=t,this.output},xn.RawInflateStream.prototype.concatBuffer=function(){var e,t,i=this.op;return e=this.resize?new Uint8Array(this.output.subarray(this.sp,i)):this.output.subarray(this.sp,i),this.sp=i,i>xn.RawInflateStream.MaxBackwardLength+this.bufferSize&&(this.op=this.sp=xn.RawInflateStream.MaxBackwardLength,t=this.output,this.output=new Uint8Array(this.bufferSize+xn.RawInflateStream.MaxBackwardLength),this.output.set(t.subarray(i-xn.RawInflateStream.MaxBackwardLength,i))),e},xn.Inflate=function(e,t){var i,n;if(this.input=e,this.ip=0,this.rawinflate,this.verify,!t&&(t={})||(t.index&&(this.ip=t.index),t.verify&&(this.verify=t.verify)),i=e[this.ip++],n=e[this.ip++],(15&i)!==xn.CompressionMethod.DEFLATE)throw new Error("unsupported compression method");if(this.method=xn.CompressionMethod.DEFLATE,((i<<8)+n)%31!=0)throw new Error("invalid fcheck flag:"+((i<<8)+n)%31);if(32&n)throw new Error("fdict flag is not supported");this.rawinflate=new xn.RawInflate(e,{index:this.ip,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})},xn.Inflate.BufferType=xn.RawInflate.BufferType,xn.Inflate.prototype.decompress=function(){var e,t=this.input;if(e=this.rawinflate.decompress(),this.ip=this.rawinflate.ip,this.verify&&(t[this.ip++]<<24|t[this.ip++]<<16|t[this.ip++]<<8|t[this.ip++])>>>0!==xn.Adler32(e))throw new Error("invalid adler-32 checksum");return e},xn.InflateStream=function(e){this.input=void 0===e?new Uint8Array:e,this.ip=0,this.rawinflate=new xn.RawInflateStream(this.input,this.ip),this.method,this.output=this.rawinflate.output},xn.InflateStream.prototype.decompress=function(e){var t;if(void 0!==e){var i=new Uint8Array(this.input.length+e.length);i.set(this.input,0),i.set(e,this.input.length),this.input=i}return void 0===this.method&&this.readHeader()<0?new Uint8Array:(t=this.rawinflate.decompress(this.input,this.ip),0!==this.rawinflate.ip&&(this.input=this.input.subarray(this.rawinflate.ip),this.ip=0),t)},xn.InflateStream.prototype.readHeader=function(){var e=this.ip,t=this.input,i=t[e++],n=t[e++];if(void 0===i||void 0===n)return-1;if((15&i)!==xn.CompressionMethod.DEFLATE)throw new Error("unsupported compression method");if(this.method=xn.CompressionMethod.DEFLATE,((i<<8)+n)%31!=0)throw new Error("invalid fcheck flag:"+((i<<8)+n)%31);if(32&n)throw new Error("fdict flag is not supported");this.ip=e},xn.Gunzip=function(e,t){this.input=e,this.ip=0,this.member=[],this.decompressed=!1},xn.Gunzip.prototype.getMembers=function(){return this.decompressed||this.decompress(),this.member.slice()},xn.Gunzip.prototype.decompress=function(){for(var e=this.input.length;this.ip<e;)this.decodeMember();return this.decompressed=!0,this.concatMember()},xn.Gunzip.prototype.decodeMember=function(){var e,t,i,n,r,a,s,o,l,c=new xn.GunzipMember,h=this.input,f=this.ip;if(c.id1=h[f++],c.id2=h[f++],31!==c.id1||139!==c.id2)throw new Error("invalid file signature:"+c.id1+","+c.id2);if(c.cm=h[f++],8!==c.cm)throw new Error("unknown compression method: "+c.cm);if(c.flg=h[f++],o=h[f++]|h[f++]<<8|h[f++]<<16|h[f++]<<24,c.mtime=new Date(1e3*o),c.xfl=h[f++],c.os=h[f++],(c.flg&xn.Gzip.FlagsMask.FEXTRA)>0&&(c.xlen=h[f++]|h[f++]<<8,f=this.decodeSubField(f,c.xlen)),(c.flg&xn.Gzip.FlagsMask.FNAME)>0){for(s=[],a=0;(r=h[f++])>0;)s[a++]=String.fromCharCode(r);c.name=s.join("")}if((c.flg&xn.Gzip.FlagsMask.FCOMMENT)>0){for(s=[],a=0;(r=h[f++])>0;)s[a++]=String.fromCharCode(r);c.comment=s.join("")}if((c.flg&xn.Gzip.FlagsMask.FHCRC)>0&&(c.crc16=65535&xn.CRC32.calc(h,0,f),c.crc16!==(h[f++]|h[f++]<<8)))throw new Error("invalid header crc16");if(e=h[h.length-4]|h[h.length-3]<<8|h[h.length-2]<<16|h[h.length-1]<<24,h.length-f-4-4<512*e&&(n=e),t=new xn.RawInflate(h,{index:f,bufferSize:n}),c.data=i=t.decompress(),f=t.ip,c.crc32=l=(h[f++]|h[f++]<<8|h[f++]<<16|h[f++]<<24)>>>0,xn.CRC32.calc(i)!==l)throw new Error("invalid CRC-32 checksum: 0x"+xn.CRC32.calc(i).toString(16)+" / 0x"+l.toString(16));if(c.isize=e=(h[f++]|h[f++]<<8|h[f++]<<16|h[f++]<<24)>>>0,(4294967295&i.length)!==e)throw new Error("invalid input size: "+(4294967295&i.length)+" / "+e);this.member.push(c),this.ip=f},xn.Gunzip.prototype.decodeSubField=function(e,t){return e+t},xn.Gunzip.prototype.concatMember=function(){var e,t,i,n=this.member,r=0,a=0;for(e=0,t=n.length;e<t;++e)a+=n[e].data.length;for(i=new Uint8Array(a),e=0;e<t;++e)i.set(n[e].data,r),r+=n[e].data.length;return i},xn.GunzipMember=function(){this.id1,this.id2,this.cm,this.flg,this.mtime,this.xfl,this.os,this.crc16,this.xlen,this.crc32,this.isize,this.name,this.comment,this.data},xn.GunzipMember.prototype.getName=function(){return this.name},xn.GunzipMember.prototype.getData=function(){return this.data},xn.GunzipMember.prototype.getMtime=function(){return this.mtime},xn.Gzip=function(e,t){this.input=e,this.ip=0,this.output,this.op=0,this.flags={},this.filename,this.comment,this.deflateOptions,t&&(t.flags&&(this.flags=t.flags),"string"==typeof t.filename&&(this.filename=t.filename),"string"==typeof t.comment&&(this.comment=t.comment),t.deflateOptions&&(this.deflateOptions=t.deflateOptions)),this.deflateOptions||(this.deflateOptions={})},xn.Gzip.DefaultBufferSize=32768,xn.Gzip.prototype.compress=function(){var e,t,i,n,r,a,s,o,l=new Uint8Array(xn.Gzip.DefaultBufferSize),c=0,h=this.input,f=this.ip,d=this.filename,u=this.comment;if(l[c++]=31,l[c++]=139,l[c++]=8,e=0,this.flags.fname&&(e|=xn.Gzip.FlagsMask.FNAME),this.flags.fcomment&&(e|=xn.Gzip.FlagsMask.FCOMMENT),this.flags.fhcrc&&(e|=xn.Gzip.FlagsMask.FHCRC),l[c++]=e,t=(Date.now?Date.now():+new Date)/1e3|0,l[c++]=255&t,l[c++]=t>>>8&255,l[c++]=t>>>16&255,l[c++]=t>>>24&255,l[c++]=0,l[c++]=xn.Gzip.OperatingSystem.UNKNOWN,void 0!==this.flags.fname){for(s=0,o=d.length;s<o;++s)(a=d.charCodeAt(s))>255&&(l[c++]=a>>>8&255),l[c++]=255&a;l[c++]=0}if(this.flags.comment){for(s=0,o=u.length;s<o;++s)(a=u.charCodeAt(s))>255&&(l[c++]=a>>>8&255),l[c++]=255&a;l[c++]=0}return this.flags.fhcrc&&(i=65535&xn.CRC32.calc(l,0,c),l[c++]=255&i,l[c++]=i>>>8&255),this.deflateOptions.outputBuffer=l,this.deflateOptions.outputIndex=c,l=(r=new xn.RawDeflate(h,this.deflateOptions)).compress(),(c=r.op)+8>l.buffer.byteLength?(this.output=new Uint8Array(c+8),this.output.set(new Uint8Array(l.buffer)),l=this.output):l=new Uint8Array(l.buffer),n=xn.CRC32.calc(h),l[c++]=255&n,l[c++]=n>>>8&255,l[c++]=n>>>16&255,l[c++]=n>>>24&255,o=h.length,l[c++]=255&o,l[c++]=o>>>8&255,l[c++]=o>>>16&255,l[c++]=o>>>24&255,this.ip=f,c<l.length&&(this.output=l=l.subarray(0,c)),l},xn.Gzip.OperatingSystem={FAT:0,AMIGA:1,VMS:2,UNIX:3,VM_CMS:4,ATARI_TOS:5,HPFS:6,MACINTOSH:7,Z_SYSTEM:8,CP_M:9,TOPS_20:10,NTFS:11,QDOS:12,ACORN_RISCOS:13,UNKNOWN:255},xn.Gzip.FlagsMask={FTEXT:1,FHCRC:2,FEXTRA:4,FNAME:8,FCOMMENT:16},xn.Heap=function(e){this.buffer=new Uint16Array(2*e),this.length=0},xn.Heap.prototype.getParent=function(e){return 2*((e-2)/4|0)},xn.Heap.prototype.getChild=function(e){return 2*e+2},xn.Heap.prototype.push=function(e,t){var i,n,r,a=this.buffer;for(i=this.length,a[this.length++]=t,a[this.length++]=e;i>0&&(n=this.getParent(i),a[i]>a[n]);)r=a[i],a[i]=a[n],a[n]=r,r=a[i+1],a[i+1]=a[n+1],a[n+1]=r,i=n;return this.length},xn.Heap.prototype.pop=function(){var e,t,i,n,r,a=this.buffer;for(t=a[0],e=a[1],this.length-=2,a[0]=a[this.length],a[1]=a[this.length+1],r=0;!((n=this.getChild(r))>=this.length)&&(n+2<this.length&&a[n+2]>a[n]&&(n+=2),a[n]>a[r]);)i=a[r],a[r]=a[n],a[n]=i,i=a[r+1],a[r+1]=a[n+1],a[n+1]=i,r=n;return{index:e,value:t,length:this.length}},xn.RawDeflate=function(e,t){this.compressionType=xn.RawDeflate.CompressionType.DYNAMIC,this.lazy=0,this.freqsLitLen,this.freqsDist,this.input=e instanceof Array?new Uint8Array(e):e,this.output,this.op=0,t&&(t.lazy&&(this.lazy=t.lazy),"number"==typeof t.compressionType&&(this.compressionType=t.compressionType),t.outputBuffer&&(this.output=t.outputBuffer instanceof Array?new Uint8Array(t.outputBuffer):t.outputBuffer),"number"==typeof t.outputIndex&&(this.op=t.outputIndex)),this.output||(this.output=new Uint8Array(32768))},xn.RawDeflate.CompressionType={NONE:0,FIXED:1,DYNAMIC:2,RESERVED:3},xn.RawDeflate.Lz77MinLength=3,xn.RawDeflate.Lz77MaxLength=258,xn.RawDeflate.WindowSize=32768,xn.RawDeflate.MaxCodeLength=16,xn.RawDeflate.HUFMAX=286,xn.RawDeflate.FixedHuffmanTable=function(){var e,t=[];for(e=0;e<288;e++)switch(!0){case e<=143:t.push([e+48,8]);break;case e<=255:t.push([e-144+400,9]);break;case e<=279:t.push([e-256+0,7]);break;case e<=287:t.push([e-280+192,8]);break;default:throw"invalid literal: "+e}return t}(),xn.RawDeflate.prototype.compress=function(){var e,t,i,n=this.input;switch(this.compressionType){case xn.RawDeflate.CompressionType.NONE:for(t=0,i=n.length;t<i;)t+=(e=n.subarray(t,t+65535)).length,this.makeNocompressBlock(e,t===i);break;case xn.RawDeflate.CompressionType.FIXED:this.output=this.makeFixedHuffmanBlock(n,!0),this.op=this.output.length;break;case xn.RawDeflate.CompressionType.DYNAMIC:this.output=this.makeDynamicHuffmanBlock(n,!0),this.op=this.output.length;break;default:throw"invalid compression type"}return this.output},xn.RawDeflate.prototype.makeNocompressBlock=function(e,t){var i,n,r,a,s=this.output,o=this.op;for(s=new Uint8Array(this.output.buffer);s.length<=o+e.length+5;)s=new Uint8Array(s.length<<1);return s.set(this.output),i=t?1:0,n=xn.RawDeflate.CompressionType.NONE,s[o++]=i|n<<1,a=65536+~(r=e.length)&65535,s[o++]=255&r,s[o++]=r>>>8&255,s[o++]=255&a,s[o++]=a>>>8&255,s.set(e,o),o+=e.length,s=s.subarray(0,o),this.op=o,this.output=s,s},xn.RawDeflate.prototype.makeFixedHuffmanBlock=function(e,t){var i,n,r,a=new xn.BitStream(new Uint8Array(this.output.buffer),this.op);return i=t?1:0,n=xn.RawDeflate.CompressionType.FIXED,a.writeBits(i,1,!0),a.writeBits(n,2,!0),r=this.lz77(e),this.fixedHuffman(r,a),a.finish()},xn.RawDeflate.prototype.makeDynamicHuffmanBlock=function(e,t){var i,n,r,a,s,o,l,c,h,f,d,u,p,g,w,m,b,y=new xn.BitStream(new Uint8Array(this.output.buffer),this.op),v=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],_=new Array(19);for(i=t?1:0,n=xn.RawDeflate.CompressionType.DYNAMIC,y.writeBits(i,1,!0),y.writeBits(n,2,!0),r=this.lz77(e),l=this.getLengths_(this.freqsLitLen,15),c=this.getCodesFromLengths_(l),h=this.getLengths_(this.freqsDist,7),f=this.getCodesFromLengths_(h),a=286;a>257&&0===l[a-1];a--);for(s=30;s>1&&0===h[s-1];s--);for(d=this.getTreeSymbols_(a,l,s,h),u=this.getLengths_(d.freqs,7),m=0;m<19;m++)_[m]=u[v[m]];for(o=19;o>4&&0===_[o-1];o--);for(p=this.getCodesFromLengths_(u),y.writeBits(a-257,5,!0),y.writeBits(s-1,5,!0),y.writeBits(o-4,4,!0),m=0;m<o;m++)y.writeBits(_[m],3,!0);for(m=0,b=d.codes.length;m<b;m++)if(g=d.codes[m],y.writeBits(p[g],u[g],!0),g>=16){switch(m++,g){case 16:w=2;break;case 17:w=3;break;case 18:w=7;break;default:throw"invalid code: "+g}y.writeBits(d.codes[m],w,!0)}return this.dynamicHuffman(r,[c,l],[f,h],y),y.finish()},xn.RawDeflate.prototype.dynamicHuffman=function(e,t,i,n){var r,a,s,o,l,c,h,f;for(l=t[0],c=t[1],h=i[0],f=i[1],r=0,a=e.length;r<a;++r)if(s=e[r],n.writeBits(l[s],c[s],!0),s>256)n.writeBits(e[++r],e[++r],!0),o=e[++r],n.writeBits(h[o],f[o],!0),n.writeBits(e[++r],e[++r],!0);else if(256===s)break;return n},xn.RawDeflate.prototype.fixedHuffman=function(e,t){var i,n,r;for(i=0,n=e.length;i<n;i++)if(r=e[i],xn.BitStream.prototype.writeBits.apply(t,xn.RawDeflate.FixedHuffmanTable[r]),r>256)t.writeBits(e[++i],e[++i],!0),t.writeBits(e[++i],5),t.writeBits(e[++i],e[++i],!0);else if(256===r)break;return t},xn.RawDeflate.Lz77Match=function(e,t){this.length=e,this.backwardDistance=t},xn.RawDeflate.Lz77Match.LengthCodeTable=(Sn=function(){var e,t,i=[];for(e=3;e<=258;e++)t=n(e),i[e]=t[2]<<24|t[1]<<16|t[0];function n(e){switch(!0){case 3===e:return[257,e-3,0];case 4===e:return[258,e-4,0];case 5===e:return[259,e-5,0];case 6===e:return[260,e-6,0];case 7===e:return[261,e-7,0];case 8===e:return[262,e-8,0];case 9===e:return[263,e-9,0];case 10===e:return[264,e-10,0];case e<=12:return[265,e-11,1];case e<=14:return[266,e-13,1];case e<=16:return[267,e-15,1];case e<=18:return[268,e-17,1];case e<=22:return[269,e-19,2];case e<=26:return[270,e-23,2];case e<=30:return[271,e-27,2];case e<=34:return[272,e-31,2];case e<=42:return[273,e-35,3];case e<=50:return[274,e-43,3];case e<=58:return[275,e-51,3];case e<=66:return[276,e-59,3];case e<=82:return[277,e-67,4];case e<=98:return[278,e-83,4];case e<=114:return[279,e-99,4];case e<=130:return[280,e-115,4];case e<=162:return[281,e-131,5];case e<=194:return[282,e-163,5];case e<=226:return[283,e-195,5];case e<=257:return[284,e-227,5];case 258===e:return[285,e-258,0];default:throw"invalid length: "+e}}return i}(),new Uint32Array(Sn)),xn.RawDeflate.Lz77Match.prototype.getDistanceCode_=function(e){var t;switch(!0){case 1===e:t=[0,e-1,0];break;case 2===e:t=[1,e-2,0];break;case 3===e:t=[2,e-3,0];break;case 4===e:t=[3,e-4,0];break;case e<=6:t=[4,e-5,1];break;case e<=8:t=[5,e-7,1];break;case e<=12:t=[6,e-9,2];break;case e<=16:t=[7,e-13,2];break;case e<=24:t=[8,e-17,3];break;case e<=32:t=[9,e-25,3];break;case e<=48:t=[10,e-33,4];break;case e<=64:t=[11,e-49,4];break;case e<=96:t=[12,e-65,5];break;case e<=128:t=[13,e-97,5];break;case e<=192:t=[14,e-129,6];break;case e<=256:t=[15,e-193,6];break;case e<=384:t=[16,e-257,7];break;case e<=512:t=[17,e-385,7];break;case e<=768:t=[18,e-513,8];break;case e<=1024:t=[19,e-769,8];break;case e<=1536:t=[20,e-1025,9];break;case e<=2048:t=[21,e-1537,9];break;case e<=3072:t=[22,e-2049,10];break;case e<=4096:t=[23,e-3073,10];break;case e<=6144:t=[24,e-4097,11];break;case e<=8192:t=[25,e-6145,11];break;case e<=12288:t=[26,e-8193,12];break;case e<=16384:t=[27,e-12289,12];break;case e<=24576:t=[28,e-16385,13];break;case e<=32768:t=[29,e-24577,13];break;default:throw"invalid distance"}return t},xn.RawDeflate.Lz77Match.prototype.toLz77Array=function(){var e,t=this.length,i=this.backwardDistance,n=[],r=0;return e=xn.RawDeflate.Lz77Match.LengthCodeTable[t],n[r++]=65535&e,n[r++]=e>>16&255,n[r++]=e>>24,e=this.getDistanceCode_(i),n[r++]=e[0],n[r++]=e[1],n[r++]=e[2],n},xn.RawDeflate.prototype.lz77=function(e){var t,i,n,r,a,s,o,l,c,h={},f=xn.RawDeflate.WindowSize,d=new Uint16Array(2*e.length),u=0,p=0,g=new Uint32Array(286),w=new Uint32Array(30),m=this.lazy;function b(e,t){var i,n,r=e.toLz77Array();for(i=0,n=r.length;i<n;++i)d[u++]=r[i];g[r[0]]++,w[r[3]]++,p=e.length+t-1,l=null}for(g[256]=1,t=0,i=e.length;t<i;++t){for(a=0,n=0,r=xn.RawDeflate.Lz77MinLength;n<r&&t+n!==i;++n)a=a<<8|e[t+n];if(void 0===h[a]&&(h[a]=[]),s=h[a],p-- >0)s.push(t);else{for(;s.length>0&&t-s[0]>f;)s.shift();if(t+xn.RawDeflate.Lz77MinLength>=i){for(l&&b(l,-1),n=0,r=i-t;n<r;++n)c=e[t+n],d[u++]=c,++g[c];break}s.length>0?(o=this.searchLongestMatch_(e,t,s),l?l.length<o.length?(c=e[t-1],d[u++]=c,++g[c],b(o,0)):b(l,-1):o.length<m?l=o:b(o,0)):l?b(l,-1):(c=e[t],d[u++]=c,++g[c]),s.push(t)}}return d[u++]=256,g[256]++,this.freqsLitLen=g,this.freqsDist=w,d.subarray(0,u)},xn.RawDeflate.prototype.searchLongestMatch_=function(e,t,i){var n,r,a,s,o,l,c=0,h=e.length;e:for(s=0,l=i.length;s<l;s++){if(n=i[l-s-1],a=xn.RawDeflate.Lz77MinLength,c>xn.RawDeflate.Lz77MinLength){for(o=c;o>xn.RawDeflate.Lz77MinLength;o--)if(e[n+o-1]!==e[t+o-1])continue e;a=c}for(;a<xn.RawDeflate.Lz77MaxLength&&t+a<h&&e[n+a]===e[t+a];)++a;if(a>c&&(r=n,c=a),a===xn.RawDeflate.Lz77MaxLength)break}return new xn.RawDeflate.Lz77Match(c,t-r)},xn.RawDeflate.prototype.getTreeSymbols_=function(e,t,i,n){var r,a,s,o,l,c,h=new Uint32Array(e+i),f=new Uint32Array(316),d=new Uint8Array(19);for(a=0,r=0;r<e;r++)h[a++]=t[r];for(r=0;r<i;r++)h[a++]=n[r];for(l=0,r=0,o=h.length;r<o;r+=a){for(a=1;r+a<o&&h[r+a]===h[r];++a);if(s=a,0===h[r])if(s<3)for(;s-- >0;)f[l++]=0,d[0]++;else for(;s>0;)(c=s<138?s:138)>s-3&&c<s&&(c=s-3),c<=10?(f[l++]=17,f[l++]=c-3,d[17]++):(f[l++]=18,f[l++]=c-11,d[18]++),s-=c;else if(f[l++]=h[r],d[h[r]]++,--s<3)for(;s-- >0;)f[l++]=h[r],d[h[r]]++;else for(;s>0;)(c=s<6?s:6)>s-3&&c<s&&(c=s-3),f[l++]=16,f[l++]=c-3,d[16]++,s-=c}return{codes:f.subarray(0,l),freqs:d}},xn.RawDeflate.prototype.getLengths_=function(e,t){var i,n,r,a,s,o=e.length,l=new xn.Heap(2*xn.RawDeflate.HUFMAX),c=new Uint8Array(o);for(a=0;a<o;++a)e[a]>0&&l.push(a,e[a]);if(i=new Array(l.length/2),n=new Uint32Array(l.length/2),1===i.length)return c[l.pop().index]=1,c;for(a=0,s=l.length/2;a<s;++a)i[a]=l.pop(),n[a]=i[a].value;for(r=this.reversePackageMerge_(n,n.length,t),a=0,s=i.length;a<s;++a)c[i[a].index]=r[a];return c},xn.RawDeflate.prototype.reversePackageMerge_=function(e,t,i){var n,r,a,s,o,l=new Uint16Array(i),c=new Uint8Array(i),h=new Uint8Array(t),f=new Array(i),d=new Array(i),u=new Array(i),p=(1<<i)-t,g=1<<i-1;function w(e){var i=d[e][u[e]];i===t?(w(e+1),w(e+1)):--h[i],++u[e]}for(l[i-1]=t,r=0;r<i;++r)p<g?c[r]=0:(c[r]=1,p-=g),p<<=1,l[i-2-r]=(l[i-1-r]/2|0)+t;for(l[0]=c[0],f[0]=new Array(l[0]),d[0]=new Array(l[0]),r=1;r<i;++r)l[r]>2*l[r-1]+c[r]&&(l[r]=2*l[r-1]+c[r]),f[r]=new Array(l[r]),d[r]=new Array(l[r]);for(n=0;n<t;++n)h[n]=i;for(a=0;a<l[i-1];++a)f[i-1][a]=e[a],d[i-1][a]=a;for(n=0;n<i;++n)u[n]=0;for(1===c[i-1]&&(--h[0],++u[i-1]),r=i-2;r>=0;--r){for(n=0,s=0,o=u[r+1],a=0;a<l[r];a++)(s=f[r+1][o]+f[r+1][o+1])>e[n]?(f[r][a]=s,d[r][a]=t,o+=2):(f[r][a]=e[n],d[r][a]=n,++n);u[r]=0,1===c[r]&&w(r)}return h},xn.RawDeflate.prototype.getCodesFromLengths_=function(e){var t,i,n,r,a=new Uint16Array(e.length),s=[],o=[],l=0;for(t=0,i=e.length;t<i;t++)s[e[t]]=1+(0|s[e[t]]);for(t=1,i=xn.RawDeflate.MaxCodeLength;t<=i;t++)o[t]=l,l+=0|s[t],l<<=1;for(t=0,i=e.length;t<i;t++)for(l=o[e[t]],o[e[t]]+=1,a[t]=0,n=0,r=e[t];n<r;n++)a[t]=a[t]<<1|1&l,l>>>=1;return a},xn.Unzip=function(e,t){t=t||{},this.input=e instanceof Array?new Uint8Array(e):e,this.ip=0,this.eocdrOffset,this.numberOfThisDisk,this.startDisk,this.totalEntriesThisDisk,this.totalEntries,this.centralDirectorySize,this.centralDirectoryOffset,this.commentLength,this.comment,this.fileHeaderList,this.filenameToIndex,this.verify=t.verify||!1,this.password=t.password},xn.Unzip.CompressionMethod=xn.Zip.CompressionMethod,xn.Unzip.FileHeaderSignature=xn.Zip.FileHeaderSignature,xn.Unzip.LocalFileHeaderSignature=xn.Zip.LocalFileHeaderSignature,xn.Unzip.CentralDirectorySignature=xn.Zip.CentralDirectorySignature,xn.Unzip.FileHeader=function(e,t){this.input=e,this.offset=t,this.length,this.version,this.os,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.fileCommentLength,this.diskNumberStart,this.internalFileAttributes,this.externalFileAttributes,this.relativeOffset,this.filename,this.extraField,this.comment},xn.Unzip.FileHeader.prototype.parse=function(){var e=this.input,t=this.offset;if(e[t++]!==xn.Unzip.FileHeaderSignature[0]||e[t++]!==xn.Unzip.FileHeaderSignature[1]||e[t++]!==xn.Unzip.FileHeaderSignature[2]||e[t++]!==xn.Unzip.FileHeaderSignature[3])throw new Error("invalid file header signature");this.version=e[t++],this.os=e[t++],this.needVersion=e[t++]|e[t++]<<8,this.flags=e[t++]|e[t++]<<8,this.compression=e[t++]|e[t++]<<8,this.time=e[t++]|e[t++]<<8,this.date=e[t++]|e[t++]<<8,this.crc32=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.compressedSize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.plainSize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.fileNameLength=e[t++]|e[t++]<<8,this.extraFieldLength=e[t++]|e[t++]<<8,this.fileCommentLength=e[t++]|e[t++]<<8,this.diskNumberStart=e[t++]|e[t++]<<8,this.internalFileAttributes=e[t++]|e[t++]<<8,this.externalFileAttributes=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,this.relativeOffset=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.filename=String.fromCharCode.apply(null,e.subarray(t,t+=this.fileNameLength)),this.extraField=e.subarray(t,t+=this.extraFieldLength),this.comment=e.subarray(t,t+this.fileCommentLength),this.length=t-this.offset},xn.Unzip.LocalFileHeader=function(e,t){this.input=e,this.offset=t,this.length,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.filename,this.extraField},xn.Unzip.LocalFileHeader.Flags=xn.Zip.Flags,xn.Unzip.LocalFileHeader.prototype.parse=function(){var e=this.input,t=this.offset;if(e[t++]!==xn.Unzip.LocalFileHeaderSignature[0]||e[t++]!==xn.Unzip.LocalFileHeaderSignature[1]||e[t++]!==xn.Unzip.LocalFileHeaderSignature[2]||e[t++]!==xn.Unzip.LocalFileHeaderSignature[3])throw new Error("invalid local file header signature");this.needVersion=e[t++]|e[t++]<<8,this.flags=e[t++]|e[t++]<<8,this.compression=e[t++]|e[t++]<<8,this.time=e[t++]|e[t++]<<8,this.date=e[t++]|e[t++]<<8,this.crc32=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.compressedSize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.plainSize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.fileNameLength=e[t++]|e[t++]<<8,this.extraFieldLength=e[t++]|e[t++]<<8,this.filename=String.fromCharCode.apply(null,e.subarray(t,t+=this.fileNameLength)),this.extraField=e.subarray(t,t+=this.extraFieldLength),this.length=t-this.offset},xn.Unzip.prototype.searchEndOfCentralDirectoryRecord=function(){var e,t=this.input;for(e=t.length-12;e>0;--e)if(t[e]===xn.Unzip.CentralDirectorySignature[0]&&t[e+1]===xn.Unzip.CentralDirectorySignature[1]&&t[e+2]===xn.Unzip.CentralDirectorySignature[2]&&t[e+3]===xn.Unzip.CentralDirectorySignature[3])return void(this.eocdrOffset=e);throw new Error("End of Central Directory Record not found")},xn.Unzip.prototype.parseEndOfCentralDirectoryRecord=function(){var e,t=this.input;if(this.eocdrOffset||this.searchEndOfCentralDirectoryRecord(),e=this.eocdrOffset,t[e++]!==xn.Unzip.CentralDirectorySignature[0]||t[e++]!==xn.Unzip.CentralDirectorySignature[1]||t[e++]!==xn.Unzip.CentralDirectorySignature[2]||t[e++]!==xn.Unzip.CentralDirectorySignature[3])throw new Error("invalid signature");this.numberOfThisDisk=t[e++]|t[e++]<<8,this.startDisk=t[e++]|t[e++]<<8,this.totalEntriesThisDisk=t[e++]|t[e++]<<8,this.totalEntries=t[e++]|t[e++]<<8,this.centralDirectorySize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.centralDirectoryOffset=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.commentLength=t[e++]|t[e++]<<8,this.comment=t.subarray(e,e+this.commentLength)},xn.Unzip.prototype.parseFileHeader=function(){var e,t,i,n,r=[],a={};if(!this.fileHeaderList){for(void 0===this.centralDirectoryOffset&&this.parseEndOfCentralDirectoryRecord(),e=this.centralDirectoryOffset,i=0,n=this.totalEntries;i<n;++i)(t=new xn.Unzip.FileHeader(this.input,e)).parse(),e+=t.length,r[i]=t,a[t.filename]=i;if(this.centralDirectorySize<e-this.centralDirectoryOffset)throw new Error("invalid file header size");this.fileHeaderList=r,this.filenameToIndex=a}},xn.Unzip.prototype.getFileData=function(e,t){t=t||{};var i,n,r,a,s,o,l,c,h=this.input,f=this.fileHeaderList;if(f||this.parseFileHeader(),void 0===f[e])throw new Error("wrong index");if(n=f[e].relativeOffset,(i=new xn.Unzip.LocalFileHeader(this.input,n)).parse(),n+=i.length,r=i.compressedSize,0!=(i.flags&xn.Unzip.LocalFileHeader.Flags.ENCRYPT)){if(!t.password&&!this.password)throw new Error("please set password");for(o=this.createDecryptionKey(t.password||this.password),l=n,c=n+12;l<c;++l)this.decode(o,h[l]);for(l=n+=12,c=n+(r-=12);l<c;++l)h[l]=this.decode(o,h[l])}switch(i.compression){case xn.Unzip.CompressionMethod.STORE:a=this.input.subarray(n,n+r);break;case xn.Unzip.CompressionMethod.DEFLATE:a=new xn.RawInflate(this.input,{index:n,bufferSize:i.plainSize}).decompress();break;default:throw new Error("unknown compression type")}if(this.verify&&(s=xn.CRC32.calc(a),i.crc32!==s))throw new Error("wrong crc: file=0x"+i.crc32.toString(16)+", data=0x"+s.toString(16));return a},xn.Unzip.prototype.getFilenames=function(){var e,t,i,n=[];for(this.fileHeaderList||this.parseFileHeader(),e=0,t=(i=this.fileHeaderList).length;e<t;++e)n[e]=i[e].filename;return n},xn.Unzip.prototype.decompress=function(e,t){var i;if(this.filenameToIndex||this.parseFileHeader(),void 0===(i=this.filenameToIndex[e]))throw new Error(e+" not found");return this.getFileData(i,t)},xn.Unzip.prototype.setPassword=function(e){this.password=e},xn.Unzip.prototype.decode=function(e,t){return t^=this.getByte(e),this.updateKeys(e,t),t},xn.Unzip.prototype.updateKeys=xn.Zip.prototype.updateKeys,xn.Unzip.prototype.createDecryptionKey=xn.Zip.prototype.createEncryptionKey,xn.Unzip.prototype.getByte=xn.Zip.prototype.getByte,xn.Util.stringToByteArray=function(e){var t,i,n=e.split("");for(t=0,i=n.length;t<i;t++)n[t]=(255&n[t].charCodeAt(0))>>>0;return n},xn.Adler32=function(e){return"string"==typeof e&&(e=xn.Util.stringToByteArray(e)),xn.Adler32.update(1,e)},xn.Adler32.update=function(e,t){for(var i,n=65535&e,r=e>>>16&65535,a=t.length,s=0;a>0;){a-=i=a>xn.Adler32.OptimizationParameter?xn.Adler32.OptimizationParameter:a;do{r+=n+=t[s++]}while(--i);n%=65521,r%=65521}return(r<<16|n)>>>0},xn.Adler32.OptimizationParameter=1024,xn.BitStream=function(e,t){if(this.index="number"==typeof t?t:0,this.bitindex=0,this.buffer=e instanceof Uint8Array?e:new Uint8Array(xn.BitStream.DefaultBlockSize),2*this.buffer.length<=this.index)throw new Error("invalid index");this.buffer.length<=this.index&&this.expandBuffer()},xn.BitStream.DefaultBlockSize=32768,xn.BitStream.prototype.expandBuffer=function(){var e=this.buffer,t=e.length,i=new Uint8Array(t<<1);return i.set(e),this.buffer=i},xn.BitStream.prototype.writeBits=function(e,t,i){var n,r=this.buffer,a=this.index,s=this.bitindex,o=r[a];if(i&&t>1&&(e=t>8?function(e){return xn.BitStream.ReverseTable[255&e]<<24|xn.BitStream.ReverseTable[e>>>8&255]<<16|xn.BitStream.ReverseTable[e>>>16&255]<<8|xn.BitStream.ReverseTable[e>>>24&255]}(e)>>32-t:xn.BitStream.ReverseTable[e]>>8-t),t+s<8)o=o<<t|e,s+=t;else for(n=0;n<t;++n)o=o<<1|e>>t-n-1&1,8==++s&&(s=0,r[a++]=xn.BitStream.ReverseTable[o],o=0,a===r.length&&(r=this.expandBuffer()));r[a]=o,this.buffer=r,this.bitindex=s,this.index=a},xn.BitStream.prototype.finish=function(){var e=this.buffer,t=this.index;return this.bitindex>0&&(e[t]<<=8-this.bitindex,e[t]=xn.BitStream.ReverseTable[e[t]],t++),e.subarray(0,t)},xn.BitStream.ReverseTable=function(){var e,t=new Uint8Array(256);for(e=0;e<256;++e)t[e]=function(e){var t=e,i=7;for(e>>>=1;e;e>>>=1)t<<=1,t|=1&e,--i;return(t<<i&255)>>>0}(e);return t}(),xn.CRC32.calc=function(e,t,i){return xn.CRC32.update(e,0,t,i)},xn.CRC32.update=function(e,t,i,n){var r=xn.CRC32.Table,a="number"==typeof i?i:i=0,s="number"==typeof n?n:e.length;for(t^=4294967295,a=7&s;a--;++i)t=t>>>8^r[255&(t^e[i])];for(a=s>>3;a--;i+=8)t=(t=(t=(t=(t=(t=(t=(t=t>>>8^r[255&(t^e[i])])>>>8^r[255&(t^e[i+1])])>>>8^r[255&(t^e[i+2])])>>>8^r[255&(t^e[i+3])])>>>8^r[255&(t^e[i+4])])>>>8^r[255&(t^e[i+5])])>>>8^r[255&(t^e[i+6])])>>>8^r[255&(t^e[i+7])];return(4294967295^t)>>>0},xn.CRC32.single=function(e,t){return(xn.CRC32.Table[255&(e^t)]^e>>>8)>>>0},xn.CRC32.Table_=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],xn.CRC32.Table=new Uint32Array(xn.CRC32.Table_),xn.Deflate=function(e,t){this.input=e,this.output=new Uint8Array(xn.Deflate.DefaultBufferSize),this.compressionType=xn.Deflate.CompressionType.DYNAMIC,this.rawDeflate;var i,n={};for(i in!t&&(t={})||"number"==typeof t.compressionType&&(this.compressionType=t.compressionType),t)n[i]=t[i];n.outputBuffer=this.output,this.rawDeflate=new xn.RawDeflate(this.input,n)},xn.Deflate.DefaultBufferSize=32768,xn.Deflate.CompressionType=xn.RawDeflate.CompressionType,xn.Deflate.compress=function(e,t){return new xn.Deflate(e,t).compress()},xn.Deflate.prototype.compress=function(){var e,t,i,n,r,a,s=0;if(a=this.output,(e=xn.CompressionMethod.DEFLATE)!==xn.CompressionMethod.DEFLATE)throw new Error("invalid compression method");if(t=Math.LOG2E*Math.log(xn.RawDeflate.WindowSize)-8<<4|e,a[s++]=t,0,e!==xn.CompressionMethod.DEFLATE)throw new Error("invalid compression method");switch(this.compressionType){case xn.Deflate.CompressionType.NONE:n=0;break;case xn.Deflate.CompressionType.FIXED:n=1;break;case xn.Deflate.CompressionType.DYNAMIC:n=2;break;default:throw new Error("unsupported compression type")}return i=n<<6|0,i|=31-(256*t+i)%31,a[s++]=i,r=xn.Adler32(this.input),this.rawDeflate.op=s,s=(a=this.rawDeflate.compress()).length,(a=new Uint8Array(a.buffer)).length<=s+4&&(this.output=new Uint8Array(a.length+4),this.output.set(a),a=this.output),(a=a.subarray(0,s+4))[s++]=r>>24&255,a[s++]=r>>16&255,a[s++]=r>>8&255,a[s++]=255&r,a};const In=new Map;In.set("!","%21"),In.set("#","%23"),In.set("$","%24"),In.set("%","%25"),In.set("&","%26"),In.set("'","%27"),In.set("(","%28"),In.set(")","%29"),In.set("*","%2A"),In.set("+","%2B"),In.set(",","%2C"),In.set("/","%2F"),In.set(":","%3A"),In.set(";","%3B"),In.set("=","%3D"),In.set("?","%3F"),In.set("@","%40"),In.set("[","%5B"),In.set("]","%5D"),In.set(" ","%20");function zn(){return"undefined"!=typeof gapi&&gapi.auth2&&gapi.auth2.getAuthInstance()}let On=!1;async function Un(e){if("undefined"==typeof gapi)throw Error("Google authentication requires the 'gapi' library");if(!gapi.auth2)throw Error("Google 'auth2' has not been initialized");if(On)return new Promise((function(t,i){let n;n=setInterval((()=>{try{!1===On&&(t(Un(e)),clearInterval(n))}catch(e){clearInterval(n),i(e)}}),100)}));On=!0;try{let t,i=gapi.auth2.getAuthInstance().currentUser.get();if(i.isSignedIn()){i.hasGrantedScopes(e)||await i.grant({scope:e});const{access_token:n,expires_at:r}=i.getAuthResponse();if(Date.now()<r-3e5)t={access_token:n,expires_at:r};else{const{access_token:e,expires_at:n}=i.reloadAuthResponse();t={access_token:e,expires_at:n}}}else{i=await async function(e){const t=new gapi.auth2.SigninOptionsBuilder;return t.setPrompt("select_account"),t.setScope(e),gapi.auth2.getAuthInstance().signIn(t)}(e);const{access_token:n,expires_at:r}=i.getAuthResponse();t={access_token:n,expires_at:r}}return t}finally{On=!1}}function Mn(){return gapi.apiKey}async function Fn(e){let t="https://www.googleapis.com/drive/v3/files/"+Bn(e)+"?supportsTeamDrives=true";const i=Mn();i&&(t+="&key="+i);const n=await fetch(t);let r=await n.json();if(r.error&&404===r.error.code){const{access_token:e}=await Un("https://www.googleapis.com/auth/drive.readonly");if(!e)throw Error(r.error);{const i=await fetch(t,{headers:{Authorization:`Bearer ${e}`}});if(r=await i.json(),r.error)throw Error(r.error)}}return r}function Hn(e){for(var t=Nn,i=t.parser.loose.exec(e),n={},r=14;r--;)n[t.key[r]]=i[r]||"";return n[t.q.name]={},n[t.key[12]].replace(t.q.parser,(function(e,i,r){i&&(n[t.q.name][i]=r)})),n}"object"==typeof process&&"undefined"==typeof window&&(global.atob=function(e){return Buffer.from(e,"base64").toString("binary")});const Nn={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};function Pn(e){if(void 0===e)return;let t=($n(e)||e.google_url?e.name:e).toLowerCase(),i=t.indexOf("?");return i>0&&(t=t.substr(0,i)),t.endsWith(".gz")?t=t.substr(0,t.length-3):(t.endsWith(".txt")||t.endsWith(".tab")||t.endsWith(".bgz"))&&(t=t.substr(0,t.length-4)),i=t.lastIndexOf("."),i<0?t:t.substr(1+i)}function $n(e){return e instanceof File}async function Zn(e,t){if("undefined"==typeof gapi)throw Error("Google authentication requires the 'gapi' library");"undefined"!=typeof google&&google.picker||await async function(){return new Promise((function(e,t){gapi.load("picker",{callback:e,onerror:t})}))}();const{access_token:i}=await Un("https://www.googleapis.com/auth/drive.file");if(!i)throw Error("Sign into Google before using picker");{const n=new google.picker.DocsView(google.picker.ViewId.DOCS);n.setIncludeFolders(!0);const r=new google.picker.DocsView(google.picker.ViewId.DOCS);let a;r.setEnableTeamDrives(!0),r.setIncludeFolders(!0),a=e?(new google.picker.PickerBuilder).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).setOAuthToken(i).addView(n).addView(r).enableFeature(google.picker.Feature.SUPPORT_TEAM_DRIVES).setCallback((function(e){e[google.picker.Response.ACTION]===google.picker.Action.PICKED&&t(e[google.picker.Response.DOCUMENTS])})).build():(new google.picker.PickerBuilder).disableFeature(google.picker.Feature.MULTISELECT_ENABLED).setOAuthToken(i).addView(n).addView(r).enableFeature(google.picker.Feature.SUPPORT_TEAM_DRIVES).setCallback((function(e){e[google.picker.Response.ACTION]===google.picker.Action.PICKED&&t(e[google.picker.Response.DOCUMENTS])})).build(),a.setVisible(!0)}}const Kn="function"==typeof new Uint8Array(1).subarray;function qn(e,t,i,n,r){if(0!==r){if(!e)throw"Undef src";if(!i)throw"Undef dest";0===t&&r===e.length?Gn(e,i,n):Kn?Gn(e.subarray(t,t+r),i,n):1===e.BYTES_PER_ELEMENT&&r>100?Gn(new Uint8Array(e.buffer,e.byteOffset+t,r),i,n):function(e,t,i,n,r){for(let a=0;a<r;++a)i[n+a]=e[t+a]}(e,t,i,n,r)}}function Gn(e,t,i){t.set(e,i)}let jn;function Wn(e,t){t.addEventListener("mousedown",Vn.bind(e))}function Vn(e){e.stopPropagation(),e.preventDefault(),function(e){if(!e.getClientRects().length)return{top:0,left:0};const t=e.getBoundingClientRect(),i=e.ownerDocument.defaultView;t.top,i.pageYOffset,t.left,i.pageXOffset}(this);const t=Yn.bind(this),i=Xn.bind(this),n=getComputedStyle(this),r=parseInt(n.top.replace("px","")),a=parseInt(n.left.replace("px",""));jn={dragFunction:t,dragEndFunction:i,screenX:e.screenX,screenY:e.screenY,top:r,left:a},document.addEventListener("mousemove",t),document.addEventListener("mouseup",i),document.addEventListener("mouseleave",i),document.addEventListener("mouseexit",i)}function Yn(e){if(!jn)return;e.stopPropagation(),e.preventDefault();const t=e.screenX-jn.screenX,i=e.screenY-jn.screenY;this.style.left=`${jn.left+t}px`,this.style.top=`${jn.top+i}px`}function Xn(e){if(!jn)return;e.stopPropagation(),e.preventDefault();const t=jn.dragFunction,i=jn.dragEndFunction;document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",i),document.removeEventListener("mouseleave",i),document.removeEventListener("mouseexit",i),jn=void 0}const Jn="googleapis",Qn={oauthTokens:{},setToken:function(e,t){t=t||Jn,this.oauthTokens[t]=e,t===Jn&&(this.google.access_token=e)},getToken:function(e){let t;e=e||Jn;for(let i of Object.keys(this.oauthTokens)){if(er(i).test(e)){t=this.oauthTokens[i];break}}return t},removeToken:function(e){e=e||Jn;for(let t of Object.keys(this.oauthTokens)){er(t).test(e)&&(this.oauthTokens[t]=void 0)}e===Jn&&(this.google.access_token=void 0)},google:{setToken:function(e){Qn.setToken(e)}}};function er(e){return new RegExp("^"+e.split(/\*+/).map(tr).join(".*")+"$")}function tr(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}const ir=new class{constructor(e){this.requestsPerSecond=e.requestsPerSecond||10,this.lastStartTime=0,this.queued=[]}add(e,t){var i=this;return new Promise((function(t,n){i.queued.push({resolve:t,reject:n,asyncFunction:e}),i.dequeue()}))}addAll(e,t){var i=e.map(function(e){return this.add(e,t)}.bind(this));return Promise.all(i)}dequeue(){if(this.queued.length>0){var e=new Date,t=1e3/this.requestsPerSecond+1,i=e-this.lastStartTime;i>=t?this._execute():setTimeout(function(){this.dequeue()}.bind(this),t-i)}}async _execute(){this.lastStartTime=new Date;var e=this.queued.shift();const t=e.asyncFunction;try{const i=await t();e.resolve(i)}catch(t){e.reject(t)}}}({requestsPerSecond:8}),nr={apiKey:void 0,setApiKey:function(e){this.apiKey=e},load:rr,loadArrayBuffer:async function(e,t){return(t=t||{}).responseType||(t.responseType="arraybuffer"),e instanceof File?sr(e,t):rr(e,t)},loadJson:async function(e,t){"POST"===((t=t||{}).method||(t.sendData?"POST":"GET"))&&(t.contentType="application/json");const i=await this.loadString(e,t);return i?JSON.parse(i):i},loadString:async function(e,t){return t=t||{},e instanceof File?async function(e,t){const i=t.range?e.slice(t.range.start,t.range.start+t.range.size):e;let n=0;t&&t.bgz||e.name.endsWith(".bgz")?n=2:e.name.endsWith(".gz")&&(n=1);if(0===n)return lr(i);return hr(await or(i),n)}(e,t):async function(e,t){const i=(t=t||{}).filename||await async function(e){if(Rn(e)&&e.startsWith("https://drive.google.com")){if(void 0===Mn())throw Error("Google drive is referenced, but API key is not defined.  An API key is required for Google Drive access");const t=await Fn(e);return t.originalFileName||t.name}return function(e){if(e instanceof File)return e.name;if(Rn(e)){let t=e.lastIndexOf("/"),i=t<0?e:e.substr(t+1);return t=i.indexOf("?"),t>0&&(i=i.substr(0,t)),i}throw Error("Expected File or string, got "+typeof e)}(e)}(e);let n=3;t.bgz?n=2:i.endsWith(".gz")&&(n=1);t.responseType="arraybuffer";return hr(await nr.load(e,t),n)}(e,t)}};async function rr(e,t){t=t||{};const i=typeof e;if((e=await("function"==typeof e?e():e))instanceof File)return sr(e,t);if("function"==typeof e.startsWith)return e.startsWith("data:")?function(e){const t=e.split(","),i=t[0].split(":")[1];let n=t[1];n=i.indexOf("base64")>=0?atob(n):decodeURI(n);const r=new Uint8Array(n.length);for(let e=0;e<n.length;e++)r[e]=n.charCodeAt(e);let a;a=i.indexOf("gzip")>0?new xn.Gunzip(r).decompress():r;return a}(e):(e.startsWith("https://drive.google.com")&&(e=Ln(e)),Cn(e)||e.startsWith("https://www.dropbox.com")?ir.add((async function(){return ar(e,t)})):ar(e,t));throw Error(`url must be either a 'File', 'string', 'function', or 'Promise'.  Actual type: ${i}`)}async function ar(e,t){e=function(e){return e.includes("//www.dropbox.com")?e.replace("//www.dropbox.com","//dl.dropboxusercontent.com"):e.includes("//drive.google.com")?Ln(e):e.includes("//www.broadinstitute.org/igvdata")?e.replace("//www.broadinstitute.org/igvdata","//data.broadinstitute.org/igvdata"):e.includes("//igvdata.broadinstitute.org")?e.replace("//igvdata.broadinstitute.org","https://dn7ywbm9isq8j.cloudfront.net"):e.startsWith("ftp://ftp.ncbi.nlm.nih.gov/geo")?e.replace("ftp://","https://"):e}(e);let i=(t=t||{}).oauthToken||function(e){const t=Tn(e)?void 0:Hn(e).host;let i=Qn.getToken(t);if(i)return i;if(void 0===t){const e=cr();if(e&&e.expires_at>Date.now())return e.access_token}}(e);return i&&(i=await("function"==typeof i?i():i)),new Promise((function(n,r){Tn(e)&&(Dn(e)&&(e=An(e)),Cn(e=function(e){let t=nr.apiKey;t||"undefined"==typeof gapi||(t=gapi.apiKey);if(void 0!==t&&!e.includes("key=")){const i=e.includes("?")?"&":"?";e=e+i+"key="+t}return e}(e))&&function(e){if(e.includes("supportsTeamDrive"))return e;{const t=e.includes("?")?"&":"?";e=e+t+"supportsTeamDrive=true"}}(e),i||(i=cr()));const a=t.headers||{};i&&function(e,t){t&&(e["Cache-Control"]="no-cache",e.Authorization="Bearer "+t)}(a,i);const s=t.range,o=navigator.userAgent.indexOf("Chrome")>-1;0===navigator.vendor.indexOf("Apple")&&/\sSafari\//.test(navigator.userAgent),s&&o&&!function(e){return e.indexOf("X-Amz-Signature")>-1}(e)&&(e+=e.includes("?")?"&":"?",e+="someRandomSeed="+Math.random().toString(36));const l=new XMLHttpRequest,c=t.sendData||t.body,h=t.method||(c?"POST":"GET"),f=t.responseType,d=t.contentType,u=t.mimeType;if(l.open(h,e),t.timeout&&(l.timeout=t.timeout),s){var p=s.size?s.start+s.size-1:"";l.setRequestHeader("Range","bytes="+s.start+"-"+p)}if(d&&l.setRequestHeader("Content-Type",d),u&&l.overrideMimeType(u),f&&(l.responseType=f),a)for(let e of Object.keys(a)){const t=a[e];l.setRequestHeader(e,t)}!0===t.withCredentials&&(l.withCredentials=!0),l.onload=async function(i){0===l.status||l.status>=200&&l.status<=300?s&&206!==l.status&&0!==s.start?(l.response.length>1e5&&alert(`Warning: Range header ignored for URL: ${e}.  This can have performance impacts.`),n(l.response.slice(s.start,s.start+s.size))):n(l.response):"undefined"==typeof gapi||404!==l.status&&401!==l.status&&403!==l.status||!Tn(e)||t.retries?403===l.status?g("Access forbidden: "+e):416===l.status?g("Unsatisfiable range"):g(l.status):w()},l.onerror=function(i){Tn(e)&&!t.retries&&w(),g("Error accessing resource: "+e+" Status: "+l.status)},l.ontimeout=function(e){g("Timed out")},l.onabort=function(e){r(e)};try{l.send(c)}catch(e){r(e)}function g(e){if(!r)throw e;r(e)}async function w(){try{const i=await async function(e){if(zn()){const t=function(e){return Cn(e)?"https://www.googleapis.com/auth/drive.file":Dn(e)?"https://www.googleapis.com/auth/devstorage.read_only":"https://www.googleapis.com/auth/userinfo.profile"}(e),i=await Un(t);return i?i.access_token:void 0}throw Error("Authorization is required, but Google oAuth has not been initalized. Contact your site administrator for assistance.")}(e);t.retries=1,t.oauthToken=i;const r=await rr(e,t);n(r)}catch(e){if(e.error){const t=e.error.startsWith("popup_blocked")?"Google login popup blocked by browser.":e.error;alert(t)}else g(e)}}}))}async function sr(e,t){let i=t&&t.range?e.slice(t.range.start,t.range.start+t.range.size):e;return"arraybuffer"===t.responseType?or(i):new Promise((function(t,n){const r=new FileReader;r.onload=function(e){t(r.result)},r.onerror=function(t){console.error("reject uploading local file "+e.name),n(null,r)},r.readAsBinaryString(i),console.warn("Deprecated method used: readAsBinaryString")}))}async function or(e){return"function"==typeof e.arrayBuffer?e.arrayBuffer():new Promise((function(t,i){const n=new FileReader;n.onload=function(e){t(n.result)},n.onerror=function(e){console.error("reject uploading local file "+localfile.name),i(null,n)},n.readAsArrayBuffer(e)}))}async function lr(e){return"function"==typeof e.text?e.text():new Promise((function(t,i){const n=new FileReader;n.onload=function(e){t(n.result)},n.onerror=function(e){console.error("reject uploading local file "+localfile.name),i(null,n)},n.readAsText(e)}))}function cr(){if(zn()){const e=function(){let e=gapi.auth2.getAuthInstance().currentUser.get();if(e&&e.isSignedIn()){const{access_token:t,expires_at:i}=e.getAuthResponse();return{access_token:t,expires_at:i}}}();return e?e.access_token:void 0}}function hr(e,t){if(3===t&&e.byteLength>2){const i=new Uint8Array(e,0,2);31===i[0]&&139===i[1]&&(t=1)}let i;if(1===t){i=new xn.Gunzip(new Uint8Array(e)).decompress()}else i=2===t?function(e,t){const i=[];let n=0,r=0;for(t=t||e.byteLength-18;n<t;)try{const t=new Uint8Array(e,n,18),a=t[11]<<8|t[10],s=(t[12],t[13],t[15],t[14],1+(t[17]<<8|t[16])),o=12+a+n,l=e.byteLength-o,c=s-a-19;if(l<c||c<=0)break;const h=new Uint8Array(e,o,c),f=new xn.RawInflate(h),d=f.decompress();n+=f.ip+26,r+=d.byteLength,i.push(d)}catch(e){console.error(e);break}if(1===i.length)return i[0];{const e=new Uint8Array(r);let t=0;for(let n=0;n<i.length;++n){var a=new Uint8Array(i[n]);qn(a,0,e,t,a.length),t+=a.length}return e}}(e):new Uint8Array(e);return"TextDecoder"in function(){if("undefined"!=typeof self)return self;return"undefined"!=typeof global?global:window}()?(new TextDecoder).decode(i):function(e){var t="",i=0;for(;i<e.length;){var n=e[i],r=0,a=0;if(n<=127?(r=0,a=255&n):n<=223?(r=1,a=31&n):n<=239?(r=2,a=15&n):n<=244&&(r=3,a=7&n),e.length-i-r>0)for(var s=0;s<r;)a=a<<6|63&(n=e[i+s+1]),s+=1;else a=65533,r=e.length-i;t+=String.fromCodePoint(a),i+=r+1}return t}(i)}var fr={color:1};fr.parent=fr,fr.left=fr,fr.right=fr;const dr={401:"Access unauthorized",403:"Access forbidden",404:"Not found"};class ur{constructor(e){this.container=mn({class:"igv-ui-alert-dialog-container"}),e.appendChild(this.container),this.container.setAttribute("tabIndex","-1");const t=mn();this.container.appendChild(t),this.errorHeadline=mn(),t.appendChild(this.errorHeadline),this.errorHeadline.textContent="";let i=mn({id:"igv-ui-alert-dialog-body"});this.container.appendChild(i),this.body=mn({id:"igv-ui-alert-dialog-body-copy"}),i.appendChild(this.body);let n=mn();this.container.appendChild(n),this.ok=mn(),n.appendChild(this.ok),this.ok.textContent="OK";const r=()=>{"function"==typeof this.callback&&(this.callback("OK"),this.callback=void 0),this.body.innerHTML="",yn(this.container)};this.ok.addEventListener("click",(e=>{e.stopPropagation(),r()})),this.container.addEventListener("keypress",(e=>{e.stopPropagation(),"Enter"===e.key&&r()})),Wn(this.container,t),yn(this.container)}present(e,t){this.errorHeadline.textContent=e.message?"ERROR":"";let i=e.message||e;dr.hasOwnProperty(i)&&(i=dr[i]),this.body.innerHTML=i,this.callback=t,vn(this.container),this.container.focus()}}var pr=new class{constructor(e){e&&(this.alertDialog=void 0)}init(e){this.alertDialog=new ur(e)}present(e,t){this.alertDialog.present(e,t)}};class gr{constructor(){this.dictionary={}}inputHandler(e,t){this.ingestPath(e,t)}ingestPath(e,t){let i=!0===t?"index":"data";this.dictionary[i]=e.trim()}didDragDrop(e){var t;return(t=e.files)&&t.length>0}dragDropHandler(e,t){var i,n;i=e.getData("text/uri-list"),(n=e.files)&&n.length>0?this.ingestPath(n[0],t):i&&""!==i&&this.ingestPath(i,t)}indexName(){return wr(this.dictionary.index)}dataName(){return wr(this.dictionary.data)}reset(){this.dictionary={}}}function wr(e){return $n(e)?e.name:e}class mr{constructor({widgetParent:e,dataTitle:t,indexTitle:i,mode:n,fileLoadManager:r,dataOnly:a,doURL:s}){let o;var l,c,h;t=t||"Data",i=i||"Index",this.fileLoadManager=r,a=a||!1,s=s||!1,this.container=mn({class:"igv-file-load-widget-container"}),e.appendChild(this.container),o="localFile"===n?{parent:this.container,doURL:!1,dataTitle:t+" file",indexTitle:i+" file",dataOnly:a}:{parent:this.container,doURL:!0,dataTitle:t+" URL",indexTitle:i+" URL",dataOnly:a},this.createInputContainer(o),this.error_message=mn({class:"igv-flw-error-message-container"}),this.container.appendChild(this.error_message),this.error_message.appendChild(mn({class:"igv-flw-error-message"})),l=this.error_message,c=()=>{this.dismissErrorMessage()},h=document.createElement("div"),l.appendChild(h),h.appendChild(_n("times")),h.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),c()})),this.dismissErrorMessage()}retrievePaths(){this.fileLoadManager.ingestPath(this.inputData.value,!1),this.inputIndex&&this.fileLoadManager.ingestPath(this.inputIndex.value,!0);let e=[];return this.fileLoadManager.dictionary&&(this.fileLoadManager.dictionary.data&&e.push(this.fileLoadManager.dictionary.data),this.fileLoadManager.dictionary.index&&e.push(this.fileLoadManager.dictionary.index)),this.container.querySelectorAll(".igv-flw-input-row").forEach((e=>{e.querySelector("input").value=""})),e}presentErrorMessage(e){this.error_message.querySelector(".igv-flw-error-message").textContent=e,vn(this.error_message)}dismissErrorMessage(){yn(this.error_message),this.error_message.querySelector(".igv-flw-error-message").textContent=""}present(){vn(this.container)}dismiss(){this.dismissErrorMessage(),this.container.querySelectorAll(".igv-flw-input-row").forEach((e=>{e.querySelector("input").value=""})),this.fileLoadManager.reset()}createInputContainer({parent:e,doURL:t,dataTitle:i,indexTitle:n,dataOnly:r}){const a=mn({class:"igv-flw-input-container"});e.appendChild(a);const s=mn({class:"igv-flw-input-row"});let o;if(a.appendChild(s),o=mn({class:"igv-flw-input-label"}),s.appendChild(o),o.textContent=i,!0===t?this.createURLContainer(s,"igv-flw-data-url",!1):this.createLocalFileContainer(s,"igv-flw-local-data-file",!1),!0===r)return;const l=mn({class:"igv-flw-input-row"});a.appendChild(l),o=mn({class:"igv-flw-input-label"}),l.appendChild(o),o.textContent=n,!0===t?this.createURLContainer(l,"igv-flw-index-url",!0):this.createLocalFileContainer(l,"igv-flw-local-index-file",!0)}createURLContainer(e,t,i){const n=bn("input");n.setAttribute("type","text"),e.appendChild(n),i?this.inputIndex=n:this.inputData=n}createLocalFileContainer(e,t,i){const n=mn({class:"igv-flw-file-chooser-container"});e.appendChild(n);const r=`${t}${("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}`,a=bn("label");a.setAttribute("for",r),n.appendChild(a),a.textContent="Choose file";const s=bn("input",{class:"igv-flw-file-chooser-input"});s.setAttribute("id",r),s.setAttribute("name",r),s.setAttribute("type","file"),n.appendChild(s);const o=mn({class:"igv-flw-local-file-name-container"});e.appendChild(o),yn(o),s.addEventListener("change",(e=>{this.dismissErrorMessage();const t=e.target.files[0];this.fileLoadManager.inputHandler(t,i);const{name:n}=t;o.textContent=n,o.setAttribute("title",n),vn(o)}))}}class br{constructor({localFileInput:e,initializeDropbox:t,dropboxButton:i,googleEnabled:n,googleDriveButton:r}){e.addEventListener("change",(async()=>{if(!0===br.isValidLocalFileInput(e)){try{await this.loadPaths(Array.from(e.files))}catch(e){console.error(e),pr.present(e)}e.value=""}})),i&&i.addEventListener("click",(async()=>{if(!0===await t()){const e={success:async e=>{try{await this.loadPaths(e.map((e=>e.link)))}catch(e){console.error(e),pr.present(e)}},cancel:()=>{},linkType:"preview",multiselect:!0,folderselect:!1};Dropbox.choose(e)}else pr.present("Cannot connect to Dropbox")})),!1===n&&yn(r.parentElement),!0===n&&r&&r.addEventListener("click",(()=>{Zn(!0,(async e=>{try{await this.loadPaths(e.map((({url:e})=>e)))}catch(e){console.error(e),pr.present(e)}}))}))}async loadPaths(e){}static isValidLocalFileInput(e){return e.files&&e.files.length>0}}class yr{constructor({$localFileInput:e,initializeDropbox:t,$dropboxButton:i,$googleDriveButton:n,fileLoadHandler:r,multipleFileSelection:a}){this.fileLoadHandler=r;const s=e.get(0),o=i?i.get(0):void 0,l=n?n.get(0):void 0;s.addEventListener("change",(async()=>{if(!0===yr.isValidLocalFileInput(s)){const{files:e}=s,t=Array.from(e);s.value="",await this.loadPaths(t)}})),o&&o.addEventListener("click",(async()=>{if(!0===await t()){const e={success:e=>this.loadPaths(e.map((({link:e})=>e))),cancel:()=>{},linkType:"preview",multiselect:a,folderselect:!1};Dropbox.choose(e)}else pr.present("Cannot connect to Dropbox")})),l&&l.addEventListener("click",(()=>{Zn(a,(async e=>await this.loadPaths(e.map((({name:e,url:t})=>t)))))}))}async loadPaths(e){await async function({paths:e,fileLoadHandler:t}){try{await async function({paths:e,fileLoadHandler:t}){const i=new Map,n=[];for(let t of e){const e=await yr.getFilename(t),r=Pn(e);if(vr.has(r)){const n=kr(e,r);i.set(n,{indexURL:t,indexFilename:yr.isGoogleDrivePath(t)?e:void 0})}else n.push(t)}const r=[];for(let e of n){const t=await yr.getFilename(e);if(i.has(t)){const{indexURL:n,indexFilename:a}=i.get(t);r.push({url:e,name:t,indexURL:n,indexFilename:a,derivedName:!0})}else{if(_r.has(Pn(t)))throw new Error(`Unable to load track file ${t} - you must select both ${t} and its corresponding index file`);r.push({url:e,name:t,derivedName:!0})}}r&&t(r)}({paths:e,fileLoadHandler:t})}catch(e){console.error(e),pr.present(e.message)}}({paths:e,fileLoadHandler:this.fileLoadHandler})}static isValidLocalFileInput(e){return e.files&&e.files.length>0}static async getFilename(e){if(e instanceof File)return e.name;if(Cn(e)){const t=await Fn(e);return t.name||t.originalFileName}return Hn(e).file}static isGoogleDrivePath(e){return!(e instanceof File)&&Cn(e)}}const vr=new Set(["bai","csi","tbi","idx","crai"]),_r=new Set(["bam","cram"]);const kr=(e,t)=>{let i=e.substring(0,e.length-(t.length+1));return"bai"!==t||i.endsWith("bam")?"crai"!==t||i.endsWith("cram")?i:`${i}.cram`:`${i}.bam`},xr=new Set(["json"]),Er=new Set(["fai"]);class Sr extends br{constructor({localFileInput:e,initializeDropbox:t,dropboxButton:i,googleEnabled:n,googleDriveButton:r,loadHandler:a}){super({localFileInput:e,initializeDropbox:t,dropboxButton:i,googleEnabled:n,googleDriveButton:r}),this.loadHandler=a}async loadPaths(e){if(!0===await Sr.isGZip(e))throw new Error("Genome did not load - gzip file is not allowed");{const t=e.filter((e=>xr.has(Pn(e))));let i;if(t.length>=1)i=await nr.loadJson(t[0]);else if(2===e.length){const[t,n]=await Sr.getExtension(e);Er.has(t)?i={fastaURL:e[1],indexURL:e[0]}:Er.has(n)&&(i={fastaURL:e[0],indexURL:e[1]})}if(void 0===i)throw new Error("Genome requires either a single JSON file or a FASTA file & index file");this.loadHandler(i)}}static async isGZip(e){for(let t of e){if(!0===(await yr.getFilename(t)).endsWith(".gz"))return!0}return!1}static async getExtension(e){return[await yr.getFilename(e[0]),await yr.getFilename(e[1])].map((e=>Pn(e)))}}class Rr extends br{constructor({localFileInput:e,initializeDropbox:t,dropboxButton:i,googleEnabled:n,googleDriveButton:r,loadHandler:a}){super({localFileInput:e,initializeDropbox:t,dropboxButton:i,googleEnabled:n,googleDriveButton:r}),this.loadHandler=a}async loadPaths(e){const t=e[0];if("json"===Pn(t)){const e=await nr.loadJson(t.google_url||t);this.loadHandler(e)}else{if("xml"!==Pn(t))throw new Error("Session file did not load - invalid format");{const e={};e[!0===$n(t)?"file":"url"]=t,this.loadHandler(e)}}}}function Tr(e,t,i){const n=()=>{e.dismiss(),$(t).modal("hide")},r=async()=>{!0===await i(e)&&(e.dismiss(),$(t).modal("hide"))};let a;a=t.querySelector(".modal-header button"),a.addEventListener("click",n),a=t.querySelector(".modal-footer button:nth-child(1)"),a.addEventListener("click",n);t.querySelector(".modal-footer button:nth-child(2)").addEventListener("click",r),t.addEventListener("keypress",(e=>{"Enter"===e.key&&r()}))}var Dr=Object.freeze({__proto__:null,configureModal:Tr});function Cr(e,t){const i=`<div id="${e}" class="modal">\n\n            <div class="modal-dialog modal-lg">\n    \n                <div class="modal-content">\n    \n                    <div class="modal-header">\n                        <div class="modal-title">${t}</div>\n    \n                        <button type="button" class="close" data-dismiss="modal">\n                            <span>&times;</span>\n                        </button>\n    \n                    </div>\n    \n                    <div class="modal-body">\n                    </div>\n    \n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-sm btn-outline-secondary" data-dismiss="modal">Cancel</button>\n                        <button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal">OK</button>\n                    </div>\n    \n                </div>\n    \n            </div>\n\n        </div>`;return document.createRange().createContextualFragment(i).firstChild}let Ar;function Lr(e,t,i,n,r,a,s,o,l,c,h){const f=Cr(s,"Session URL");e.get(0).appendChild(f),l||$(`#${a}`).parent().hide();const d={widgetParent:f.querySelector(".modal-body"),dataTitle:"Session",indexTitle:void 0,mode:"url",fileLoadManager:new gr,dataOnly:!0,doURL:void 0};Ar=new mr(d);const u={localFileInput:document.querySelector(`#${i}`),initializeDropbox:n,dropboxButton:r?document.querySelector(`#${r}`):void 0,googleEnabled:l,googleDriveButton:document.querySelector(`#${a}`),loadHandler:c},p=new Rr(u);Tr(Ar,f,(async e=>(await p.loadPaths(e.retrievePaths()),!0))),function(e,t,i,n){const r=$(`<div id="${n}" class="modal fade igv-app-file-save-modal">\n\n            <div class="modal-dialog modal-lg">\n    \n                <div class="modal-content">\n    \n                    <div class="modal-header">\n    \n                        <div class="modal-title">\n                            <div>\n                                Save Session File\n                            </div>\n                        </div>\n    \n                        <button type="button" class="close" data-dismiss="modal">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n    \n                    <div class="modal-body">\n                        <input class="form-control" type="text" placeholder="igv-app-session.json">\n    \n                        <div>\n                            Enter session filename with .json suffix\n                        </div>\n    \n                    </div>\n    \n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-sm btn-outline-secondary" data-dismiss="modal">Cancel</button>\n                        <button type="button" class="btn btn-sm btn-secondary">OK</button>\n                    </div>\n    \n                </div>\n    \n            </div>\n    \n        </div>`);e.append(r);let a=r.find("input"),s=()=>{const e=new Set(["json","xml"]);let t=a.val();void 0===t||""===t?t=a.attr("placeholder"):!1===e.has(Pn(t))&&(t+=".json");const n=i();if(n){const e=JSON.stringify(n,null,"\t");!function(e,t){const i=document.createElement("a");i.setAttribute("href",t),i.setAttribute("download",e),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}(t,URL.createObjectURL(new Blob([e],{type:"application/octet-stream"})))}r.modal("hide")};r.find(".modal-footer button:nth-child(2)").on("click",s),r.on("show.bs.modal",(e=>{a.val(`${t}-session.json`)})),a.on("keyup",(e=>{13===e.keyCode&&s()}))}(e,t,h,o)}var Br=function(e){this.data=e,this.ptr=0};Br.prototype.nextLine=function(){var e=this.ptr,t=this.data.indexOf("\n",e);return t>0?(this.ptr=t+1,t===e?void 0:this.data.substring(e,t).trim()):(this.ptr=this.data.length,e>=this.data.length?void 0:this.data.substring(e).trim())},Br.prototype.nextLineNoTrim=function(){var e=this.ptr,t=this.data.indexOf("\n",e),i=this.data;if(t>0)return this.ptr=t+1,t>e&&"\r"===i.charAt(t-1)?i.substring(e,t-1):i.substring(e,t);var n=i.length;return this.ptr=n,e>=n?void 0:i.substring(e)};var Ir=function(e){this.data=e,this.length=this.data.length,this.ptr=0};Ir.prototype.nextLine=function(){var e,t;if(t="",!(this.ptr>=this.length)){for(var i=this.ptr;i<this.length;i++)if("\r"!==(e=String.fromCharCode(this.data[i]))){if("\n"===e)break;t+=e}return this.ptr=i+1,t}},Ir.prototype.nextLineNoTrim=Ir.prototype.nextLine;var zr={Huffman:{},Util:{},CRC32:{},CompressionMethod:{DEFLATE:8,RESERVED:15},Zip:function(e){e=e||{},this.files=[],this.comment=e.comment,this.password}};zr.Zip.CompressionMethod={STORE:0,DEFLATE:8},zr.Zip.OperatingSystem={MSDOS:0,UNIX:3,MACINTOSH:7},zr.Zip.Flags={ENCRYPT:1,DESCRIPTOR:8,UTF8:2048},zr.Zip.FileHeaderSignature=[80,75,1,2],zr.Zip.LocalFileHeaderSignature=[80,75,3,4],zr.Zip.CentralDirectorySignature=[80,75,5,6],zr.Zip.prototype.addFile=function(e,t){var i;(t=t||{}).filename;var n=e.length,r=0;if(e instanceof Array&&(e=new Uint8Array(e)),"number"!=typeof t.compressionMethod&&(t.compressionMethod=zr.Zip.CompressionMethod.DEFLATE),t.compress)switch(t.compressionMethod){case zr.Zip.CompressionMethod.STORE:break;case zr.Zip.CompressionMethod.DEFLATE:r=zr.CRC32.calc(e),e=this.deflateWithOption(e,t),i=!0;break;default:throw new Error("unknown compression method:"+t.compressionMethod)}this.files.push({buffer:e,option:t,compressed:i,encrypted:!1,size:n,crc32:r})},zr.Zip.prototype.setPassword=function(e){this.password=e},zr.Zip.prototype.compress=function(){var e,t,i,n,r,a,s,o,l,c,h,f,d,u,p,g,w,m,b,y,v,_,k,x,E,S,R=this.files,T=0,D=0;for(k=0,x=R.length;k<x;++k){if(u=(e=R[k]).option.filename?e.option.filename.length:0,p=e.option.extraField?e.option.extraField.length:0,g=e.option.comment?e.option.comment.length:0,!e.compressed)switch(e.crc32=zr.CRC32.calc(e.buffer),e.option.compressionMethod){case zr.Zip.CompressionMethod.STORE:break;case zr.Zip.CompressionMethod.DEFLATE:e.buffer=this.deflateWithOption(e.buffer,e.option),e.compressed=!0;break;default:throw new Error("unknown compression method:"+e.option.compressionMethod)}if(void 0!==e.option.password||void 0!==this.password){for(_=this.createEncryptionKey(e.option.password||this.password),y=e.buffer,(v=new Uint8Array(y.length+12)).set(y,12),y=v,E=0;E<12;++E)y[E]=this.encode(_,11===k?255&e.crc32:256*Math.random()|0);for(S=y.length;E<S;++E)y[E]=this.encode(_,y[E]);e.buffer=y}T+=30+u+e.buffer.length,D+=46+u+g}for(a=22+(this.comment?this.comment.length:0),t=new Uint8Array(T+D+a),i=0,r=(n=T)+D,k=0,x=R.length;k<x;++k)u=(e=R[k]).option.filename?e.option.filename.length:0,p=0,g=e.option.comment?e.option.comment.length:0,s=i,t[i++]=zr.Zip.LocalFileHeaderSignature[0],t[i++]=zr.Zip.LocalFileHeaderSignature[1],t[i++]=zr.Zip.LocalFileHeaderSignature[2],t[i++]=zr.Zip.LocalFileHeaderSignature[3],t[n++]=zr.Zip.FileHeaderSignature[0],t[n++]=zr.Zip.FileHeaderSignature[1],t[n++]=zr.Zip.FileHeaderSignature[2],t[n++]=zr.Zip.FileHeaderSignature[3],20,t[n++]=20,t[n++]=e.option.os||zr.Zip.OperatingSystem.MSDOS,t[i++]=t[n++]=20,t[i++]=t[n++]=0,o=0,(e.option.password||this.password)&&(o|=zr.Zip.Flags.ENCRYPT),t[i++]=t[n++]=255&o,t[i++]=t[n++]=o>>8&255,l=e.option.compressionMethod,t[i++]=t[n++]=255&l,t[i++]=t[n++]=l>>8&255,c=e.option.date||new Date,t[i++]=t[n++]=(7&c.getMinutes())<<5|c.getSeconds()/2|0,t[i++]=t[n++]=c.getHours()<<3|c.getMinutes()>>3,t[i++]=t[n++]=(c.getMonth()+1&7)<<5|c.getDate(),t[i++]=t[n++]=(c.getFullYear()-1980&127)<<1|c.getMonth()+1>>3,h=e.crc32,t[i++]=t[n++]=255&h,t[i++]=t[n++]=h>>8&255,t[i++]=t[n++]=h>>16&255,t[i++]=t[n++]=h>>24&255,f=e.buffer.length,t[i++]=t[n++]=255&f,t[i++]=t[n++]=f>>8&255,t[i++]=t[n++]=f>>16&255,t[i++]=t[n++]=f>>24&255,d=e.size,t[i++]=t[n++]=255&d,t[i++]=t[n++]=d>>8&255,t[i++]=t[n++]=d>>16&255,t[i++]=t[n++]=d>>24&255,t[i++]=t[n++]=255&u,t[i++]=t[n++]=u>>8&255,t[i++]=t[n++]=255&p,t[i++]=t[n++]=p>>8&255,t[n++]=255&g,t[n++]=g>>8&255,t[n++]=0,t[n++]=0,t[n++]=0,t[n++]=0,t[n++]=0,t[n++]=0,t[n++]=0,t[n++]=0,t[n++]=255&s,t[n++]=s>>8&255,t[n++]=s>>16&255,t[n++]=s>>24&255,(w=e.option.filename)&&(t.set(w,i),t.set(w,n),i+=u,n+=u),(m=e.option.extraField)&&(t.set(m,i),t.set(m,n),i+=p,n+=p),(b=e.option.comment)&&(t.set(b,n),n+=g),t.set(e.buffer,i),i+=e.buffer.length;return t[r++]=zr.Zip.CentralDirectorySignature[0],t[r++]=zr.Zip.CentralDirectorySignature[1],t[r++]=zr.Zip.CentralDirectorySignature[2],t[r++]=zr.Zip.CentralDirectorySignature[3],t[r++]=0,t[r++]=0,t[r++]=0,t[r++]=0,t[r++]=255&x,t[r++]=x>>8&255,t[r++]=255&x,t[r++]=x>>8&255,t[r++]=255&D,t[r++]=D>>8&255,t[r++]=D>>16&255,t[r++]=D>>24&255,t[r++]=255&T,t[r++]=T>>8&255,t[r++]=T>>16&255,t[r++]=T>>24&255,g=this.comment?this.comment.length:0,t[r++]=255&g,t[r++]=g>>8&255,this.comment&&(t.set(this.comment,r),r+=g),t},zr.Zip.prototype.deflateWithOption=function(e,t){return new zr.RawDeflate(e,t.deflateOption).compress()},zr.Zip.prototype.getByte=function(e){var t=65535&e[2]|2;return t*(1^t)>>8&255},zr.Zip.prototype.encode=function(e,t){var i=this.getByte(e);return this.updateKeys(e,t),i^t},zr.Zip.prototype.updateKeys=function(e,t){e[0]=zr.CRC32.single(e[0],t),e[1]=1+(6681*(20173*(e[1]+(255&e[0]))>>>0)>>>0)>>>0,e[2]=zr.CRC32.single(e[2],e[1]>>>24)},zr.Zip.prototype.createEncryptionKey=function(e){var t,i,n=[305419896,591751049,878082192];for(n=new Uint32Array(n),t=0,i=e.length;t<i;++t)this.updateKeys(n,255&e[t]);return n},zr.Huffman.buildHuffmanTable=function(e){var t,i,n,r,a,s,o,l,c,h,f,d=e.length,u=0,p=Number.POSITIVE_INFINITY;for(l=0,c=d;l<c;++l)e[l]>u&&(u=e[l]),e[l]<p&&(p=e[l]);for(t=1<<u,i=new Uint32Array(t),n=1,r=0,a=2;n<=u;){for(l=0;l<d;++l)if(e[l]===n){for(s=0,o=r,h=0;h<n;++h)s=s<<1|1&o,o>>=1;for(f=n<<16|l,h=s;h<t;h+=a)i[h]=f;++r}++n,r<<=1,a<<=1}return[i,u,p]};var Or=zr.Huffman.buildHuffmanTable;zr.RawInflate=function(e,t){switch(this.buffer,this.blocks=[],this.bufferSize=32768,this.totalpos=0,this.ip=0,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(e),this.output,this.op,this.bfinal=!1,this.bufferType=zr.RawInflate.BufferType.ADAPTIVE,this.resize=!1,!t&&(t={})||(t.index&&(this.ip=t.index),t.bufferSize&&(this.bufferSize=t.bufferSize),t.bufferType&&(this.bufferType=t.bufferType),t.resize&&(this.resize=t.resize)),this.bufferType){case zr.RawInflate.BufferType.BLOCK:this.op=zr.RawInflate.MaxBackwardLength,this.output=new Uint8Array(zr.RawInflate.MaxBackwardLength+this.bufferSize+zr.RawInflate.MaxCopyLength);break;case zr.RawInflate.BufferType.ADAPTIVE:this.op=0,this.output=new Uint8Array(this.bufferSize);break;default:throw new Error("invalid inflate mode")}},zr.RawInflate.BufferType={BLOCK:0,ADAPTIVE:1},zr.RawInflate.prototype.decompress=function(){for(;!this.bfinal;)this.parseBlock();switch(this.bufferType){case zr.RawInflate.BufferType.BLOCK:return this.concatBufferBlock();case zr.RawInflate.BufferType.ADAPTIVE:return this.concatBufferDynamic();default:throw new Error("invalid inflate mode")}},zr.RawInflate.MaxBackwardLength=32768,zr.RawInflate.MaxCopyLength=258,zr.RawInflate.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),zr.RawInflate.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),zr.RawInflate.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),zr.RawInflate.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),zr.RawInflate.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),zr.RawInflate.FixedLiteralLengthTable=function(){var e,t,i=new Uint8Array(288);for(e=0,t=i.length;e<t;++e)i[e]=e<=143?8:e<=255?9:e<=279?7:8;return Or(i)}(),zr.RawInflate.FixedDistanceTable=function(){var e,t,i=new Uint8Array(30);for(e=0,t=i.length;e<t;++e)i[e]=5;return Or(i)}(),zr.RawInflate.prototype.parseBlock=function(){var e=this.readBits(3);switch(1&e&&(this.bfinal=!0),e>>>=1){case 0:this.parseUncompressedBlock();break;case 1:this.parseFixedHuffmanBlock();break;case 2:this.parseDynamicHuffmanBlock();break;default:throw new Error("unknown BTYPE: "+e)}},zr.RawInflate.prototype.readBits=function(e){var t,i=this.bitsbuf,n=this.bitsbuflen,r=this.input,a=this.ip;if(a+(e-n+7>>3)>=r.length)throw new Error("input buffer is broken");for(;n<e;)i|=r[a++]<<n,n+=8;return t=i&(1<<e)-1,i>>>=e,n-=e,this.bitsbuf=i,this.bitsbuflen=n,this.ip=a,t},zr.RawInflate.prototype.readCodeByTable=function(e){for(var t,i,n=this.bitsbuf,r=this.bitsbuflen,a=this.input,s=this.ip,o=a.length,l=e[0],c=e[1];r<c&&!(s>=o);)n|=a[s++]<<r,r+=8;if((i=(t=l[n&(1<<c)-1])>>>16)>r)throw new Error("invalid code length: "+i);return this.bitsbuf=n>>i,this.bitsbuflen=r-i,this.ip=s,65535&t},zr.RawInflate.prototype.parseUncompressedBlock=function(){var e,t,i=this.input,n=this.ip,r=this.output,a=this.op,s=i.length,o=r.length;if(this.bitsbuf=0,this.bitsbuflen=0,n+1>=s)throw new Error("invalid uncompressed block header: LEN");if(e=i[n++]|i[n++]<<8,n+1>=s)throw new Error("invalid uncompressed block header: NLEN");if(e===~(i[n++]|i[n++]<<8))throw new Error("invalid uncompressed block header: length verify");if(n+e>i.length)throw new Error("input buffer is broken");switch(this.bufferType){case zr.RawInflate.BufferType.BLOCK:for(;a+e>r.length;)e-=t=o-a,r.set(i.subarray(n,n+t),a),a+=t,n+=t,this.op=a,r=this.expandBufferBlock(),a=this.op;break;case zr.RawInflate.BufferType.ADAPTIVE:for(;a+e>r.length;)r=this.expandBufferAdaptive({fixRatio:2});break;default:throw new Error("invalid inflate mode")}r.set(i.subarray(n,n+e),a),a+=e,n+=e,this.ip=n,this.op=a,this.output=r},zr.RawInflate.prototype.parseFixedHuffmanBlock=function(){switch(this.bufferType){case zr.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(zr.RawInflate.FixedLiteralLengthTable,zr.RawInflate.FixedDistanceTable);break;case zr.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(zr.RawInflate.FixedLiteralLengthTable,zr.RawInflate.FixedDistanceTable);break;default:throw new Error("invalid inflate mode")}},zr.RawInflate.prototype.parseDynamicHuffmanBlock=function(){var e,t,i,n,r,a,s,o,l,c=this.readBits(5)+257,h=this.readBits(5)+1,f=this.readBits(4)+4,d=new Uint8Array(zr.RawInflate.Order.length);for(o=0;o<f;++o)d[zr.RawInflate.Order[o]]=this.readBits(3);for(e=Or(d),n=new Uint8Array(c+h),o=0,l=c+h;o<l;)switch(r=this.readCodeByTable(e)){case 16:for(s=3+this.readBits(2);s--;)n[o++]=a;break;case 17:for(s=3+this.readBits(3);s--;)n[o++]=0;a=0;break;case 18:for(s=11+this.readBits(7);s--;)n[o++]=0;a=0;break;default:n[o++]=r,a=r}switch(t=Or(n.subarray(0,c)),i=Or(n.subarray(c)),this.bufferType){case zr.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(t,i);break;case zr.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(t,i);break;default:throw new Error("invalid inflate mode")}},zr.RawInflate.prototype.decodeHuffmanBlock=function(e,t){var i=this.output,n=this.op;this.currentLitlenTable=e;for(var r,a,s,o,l=i.length-zr.RawInflate.MaxCopyLength,c=zr.RawInflate.LengthCodeTable,h=zr.RawInflate.LengthExtraTable,f=zr.RawInflate.DistCodeTable,d=zr.RawInflate.DistExtraTable;256!==(r=this.readCodeByTable(e));)if(r<256)n>=l&&(this.op=n,i=this.expandBufferBlock(),n=this.op),i[n++]=r;else for(o=c[a=r-257],h[a]>0&&(o+=this.readBits(h[a])),s=f[r=this.readCodeByTable(t)],d[r]>0&&(s+=this.readBits(d[r])),n>=l&&(this.op=n,i=this.expandBufferBlock(),n=this.op);o--;)i[n]=i[n++-s];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=n},zr.RawInflate.prototype.decodeHuffmanAdaptive=function(e,t){var i=this.output,n=this.op;this.currentLitlenTable=e;for(var r,a,s,o,l=i.length,c=zr.RawInflate.LengthCodeTable,h=zr.RawInflate.LengthExtraTable,f=zr.RawInflate.DistCodeTable,d=zr.RawInflate.DistExtraTable;256!==(r=this.readCodeByTable(e));)if(r<256)n>=l&&(l=(i=this.expandBufferAdaptive()).length),i[n++]=r;else for(o=c[a=r-257],h[a]>0&&(o+=this.readBits(h[a])),s=f[r=this.readCodeByTable(t)],d[r]>0&&(s+=this.readBits(d[r])),n+o>l&&(l=(i=this.expandBufferAdaptive()).length);o--;)i[n]=i[n++-s];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=n},zr.RawInflate.prototype.expandBufferBlock=function(e){var t=new Uint8Array(this.op-zr.RawInflate.MaxBackwardLength),i=this.op-zr.RawInflate.MaxBackwardLength,n=this.output;return t.set(n.subarray(zr.RawInflate.MaxBackwardLength,t.length)),this.blocks.push(t),this.totalpos+=t.length,n.set(n.subarray(i,i+zr.RawInflate.MaxBackwardLength)),this.op=zr.RawInflate.MaxBackwardLength,n},zr.RawInflate.prototype.expandBufferAdaptive=function(e){var t,i,n,r=this.input.length/this.ip+1|0,a=this.input,s=this.output;return e&&("number"==typeof e.fixRatio&&(r=e.fixRatio),"number"==typeof e.addRatio&&(r+=e.addRatio)),i=r<2?(n=(a.length-this.ip)/this.currentLitlenTable[2]/2*258|0)<s.length?s.length+n:s.length<<1:s.length*r,(t=new Uint8Array(i)).set(s),this.output=t,this.output},zr.RawInflate.prototype.concatBufferBlock=function(){var e,t,i,n,r,a=0,s=this.totalpos+(this.op-zr.RawInflate.MaxBackwardLength),o=this.output,l=this.blocks,c=new Uint8Array(s);if(0===l.length)return this.output.subarray(zr.RawInflate.MaxBackwardLength,this.op);for(t=0,i=l.length;t<i;++t)for(n=0,r=(e=l[t]).length;n<r;++n)c[a++]=e[n];for(t=zr.RawInflate.MaxBackwardLength,i=this.op;t<i;++t)c[a++]=o[t];return this.blocks=[],this.buffer=c,this.buffer},zr.RawInflate.prototype.concatBufferDynamic=function(){var e,t=this.op;return this.resize?(e=new Uint8Array(t)).set(this.output.subarray(0,t)):e=this.output.subarray(0,t),this.buffer=e,this.buffer};Or=zr.Huffman.buildHuffmanTable;function Ur(e){return"string"==typeof e||e instanceof String}function Mr(e){return e.includes("googleapis")&&!e.includes("urlshortener")||Fr(e)||Hr(e)}function Fr(e){return e.startsWith("gs://")||e.startsWith("https://www.googleapis.com/storage")||e.startsWith("https://storage.cloud.google.com")||e.startsWith("https://storage.googleapis.com")}function Hr(e){return e.indexOf("drive.google.com")>=0||e.indexOf("www.googleapis.com/drive")>0}function Nr(e){let{bucket:t,object:i}=function(e){let t,i;if(e.startsWith("gs://")){const n=e.indexOf("/",5);if(n>=0){t=e.substring(5,n);const r=e.indexOf("?");i=r<0?e.substring(n+1):e.substring(n+1,r)}}else if(e.startsWith("https://storage.googleapis.com")||e.startsWith("https://storage.cloud.google.com")){const n=e.indexOf("/v1/b/",8);if(n>0){const r=e.indexOf("/o/",n);if(r>0){const a=e.indexOf("?",r);t=e.substring(n+6,r),i=a>0?e.substring(r+3,a):e.substring(r+3)}}else{const n=e.indexOf("/",8),r=e.indexOf("/",n+1),a=e.indexOf("?",r);r>0&&(t=e.substring(n+1,r),i=a<0?e.substring(r+1):e.substring(r+1,a))}}else if(e.startsWith("https://www.googleapis.com/storage/v1/b")){const n=e.indexOf("/v1/b/",8),r=e.indexOf("/o/",n);if(r>0){const a=e.indexOf("?",r);t=e.substring(n+6,r),i=a>0?e.substring(r+3,a):e.substring(r+3)}}if(t&&i)return{bucket:t,object:i};throw Error(`Unrecognized Google Storage URI: ${e}`)}(e);i=function(e){let t="";return e.split("").forEach((function(e){Zr.has(e)?t+=Zr.get(e):t+=e})),t}(i);const n=e.indexOf("?");return`https://storage.googleapis.com/storage/v1/b/${t}/o/${i}${n>0?e.substring(n)+"&alt=media":"?alt=media"}`}function Pr(e){var t=$r(e);return t?"https://www.googleapis.com/drive/v3/files/"+t+"?alt=media&supportsTeamDrives=true":e}function $r(e){if(e.includes("/open?id=")){const t=e.indexOf("/open?id=")+9,i=e.indexOf("&");if(t>0&&i>t)return e.substring(t,i);if(t>0)return e.substring(t)}else{if(e.includes("/file/d/")){const t=e.indexOf("/file/d/")+8,i=e.lastIndexOf("/");return e.substring(t,i)}if(e.startsWith("https://www.googleapis.com/drive")){let t=e.indexOf("/files/");const i=e.indexOf("?");if(t>0)return t+=7,i>0?e.substring(t,i):e.substring(t)}}throw Error("Unknown Google Drive url format: "+e)}zr.RawInflateStream=function(e,t,i){this.blocks=[],this.bufferSize=i||65e3,this.totalpos=0,this.ip=void 0===t?0:t,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(e),this.output=new Uint8Array(this.bufferSize),this.op=0,this.bfinal=!1,this.blockLength,this.resize=!1,this.litlenTable,this.distTable,this.sp=0,this.status=zr.RawInflateStream.Status.INITIALIZED,this.ip_,this.bitsbuflen_,this.bitsbuf_},zr.RawInflateStream.BlockType={UNCOMPRESSED:0,FIXED:1,DYNAMIC:2},zr.RawInflateStream.Status={INITIALIZED:0,BLOCK_HEADER_START:1,BLOCK_HEADER_END:2,BLOCK_BODY_START:3,BLOCK_BODY_END:4,DECODE_BLOCK_START:5,DECODE_BLOCK_END:6},zr.RawInflateStream.prototype.decompress=function(e,t){var i=!1;for(void 0!==e&&(this.input=e),void 0!==t&&(this.ip=t);!i;)switch(this.status){case zr.RawInflateStream.Status.INITIALIZED:case zr.RawInflateStream.Status.BLOCK_HEADER_START:this.readBlockHeader()<0&&(i=!0);break;case zr.RawInflateStream.Status.BLOCK_HEADER_END:case zr.RawInflateStream.Status.BLOCK_BODY_START:switch(this.currentBlockType){case zr.RawInflateStream.BlockType.UNCOMPRESSED:this.readUncompressedBlockHeader()<0&&(i=!0);break;case zr.RawInflateStream.BlockType.FIXED:this.parseFixedHuffmanBlock()<0&&(i=!0);break;case zr.RawInflateStream.BlockType.DYNAMIC:this.parseDynamicHuffmanBlock()<0&&(i=!0)}break;case zr.RawInflateStream.Status.BLOCK_BODY_END:case zr.RawInflateStream.Status.DECODE_BLOCK_START:switch(this.currentBlockType){case zr.RawInflateStream.BlockType.UNCOMPRESSED:this.parseUncompressedBlock()<0&&(i=!0);break;case zr.RawInflateStream.BlockType.FIXED:case zr.RawInflateStream.BlockType.DYNAMIC:this.decodeHuffman()<0&&(i=!0)}break;case zr.RawInflateStream.Status.DECODE_BLOCK_END:this.bfinal?i=!0:this.status=zr.RawInflateStream.Status.INITIALIZED}return this.concatBuffer()},zr.RawInflateStream.MaxBackwardLength=32768,zr.RawInflateStream.MaxCopyLength=258,zr.RawInflateStream.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),zr.RawInflateStream.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),zr.RawInflateStream.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),zr.RawInflateStream.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),zr.RawInflateStream.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),zr.RawInflateStream.FixedLiteralLengthTable=function(){var e,t,i=new Uint8Array(288);for(e=0,t=i.length;e<t;++e)i[e]=e<=143?8:e<=255?9:e<=279?7:8;return Or(i)}(),zr.RawInflateStream.FixedDistanceTable=function(){var e,t,i=new Uint8Array(30);for(e=0,t=i.length;e<t;++e)i[e]=5;return Or(i)}(),zr.RawInflateStream.prototype.readBlockHeader=function(){var e;if(this.status=zr.RawInflateStream.Status.BLOCK_HEADER_START,this.save_(),(e=this.readBits(3))<0)return this.restore_(),-1;switch(1&e&&(this.bfinal=!0),e>>>=1){case 0:this.currentBlockType=zr.RawInflateStream.BlockType.UNCOMPRESSED;break;case 1:this.currentBlockType=zr.RawInflateStream.BlockType.FIXED;break;case 2:this.currentBlockType=zr.RawInflateStream.BlockType.DYNAMIC;break;default:throw new Error("unknown BTYPE: "+e)}this.status=zr.RawInflateStream.Status.BLOCK_HEADER_END},zr.RawInflateStream.prototype.readBits=function(e){for(var t,i=this.bitsbuf,n=this.bitsbuflen,r=this.input,a=this.ip;n<e;){if(r.length<=a)return-1;i|=(t=r[a++])<<n,n+=8}return t=i&(1<<e)-1,i>>>=e,n-=e,this.bitsbuf=i,this.bitsbuflen=n,this.ip=a,t},zr.RawInflateStream.prototype.readCodeByTable=function(e){for(var t,i,n=this.bitsbuf,r=this.bitsbuflen,a=this.input,s=this.ip,o=e[0],l=e[1];r<l;){if(a.length<=s)return-1;n|=a[s++]<<r,r+=8}if((i=(t=o[n&(1<<l)-1])>>>16)>r)throw new Error("invalid code length: "+i);return this.bitsbuf=n>>i,this.bitsbuflen=r-i,this.ip=s,65535&t},zr.RawInflateStream.prototype.readUncompressedBlockHeader=function(){var e,t=this.input,i=this.ip;if(this.status=zr.RawInflateStream.Status.BLOCK_BODY_START,i+4>=t.length)return-1;if((e=t[i++]|t[i++]<<8)===~(t[i++]|t[i++]<<8))throw new Error("invalid uncompressed block header: length verify");this.bitsbuf=0,this.bitsbuflen=0,this.ip=i,this.blockLength=e,this.status=zr.RawInflateStream.Status.BLOCK_BODY_END},zr.RawInflateStream.prototype.parseUncompressedBlock=function(){var e=this.input,t=this.ip,i=this.output,n=this.op,r=this.blockLength;for(this.status=zr.RawInflateStream.Status.DECODE_BLOCK_START;r--;){if(n===i.length&&(i=this.expandBuffer({fixRatio:2})),t>=e.length)return this.ip=t,this.op=n,this.blockLength=r+1,-1;i[n++]=e[t++]}return r<0&&(this.status=zr.RawInflateStream.Status.DECODE_BLOCK_END),this.ip=t,this.op=n,0},zr.RawInflateStream.prototype.parseFixedHuffmanBlock=function(){return this.status=zr.RawInflateStream.Status.BLOCK_BODY_START,this.litlenTable=zr.RawInflateStream.FixedLiteralLengthTable,this.distTable=zr.RawInflateStream.FixedDistanceTable,this.status=zr.RawInflateStream.Status.BLOCK_BODY_END,0},zr.RawInflateStream.prototype.save_=function(){this.ip_=this.ip,this.bitsbuflen_=this.bitsbuflen,this.bitsbuf_=this.bitsbuf},zr.RawInflateStream.prototype.restore_=function(){this.ip=this.ip_,this.bitsbuflen=this.bitsbuflen_,this.bitsbuf=this.bitsbuf_},zr.RawInflateStream.prototype.parseDynamicHuffmanBlock=function(){var e,t,i,n,r=new Uint8Array(zr.RawInflateStream.Order.length);if(this.status=zr.RawInflateStream.Status.BLOCK_BODY_START,this.save_(),e=this.readBits(5)+257,t=this.readBits(5)+1,i=this.readBits(4)+4,e<0||t<0||i<0)return this.restore_(),-1;try{(function(){var a,s,o,l,c,h,f=0;for(c=0;c<i;++c){if((a=this.readBits(3))<0)throw new Error("not enough input");r[zr.RawInflateStream.Order[c]]=a}for(n=Or(r),l=new Uint8Array(e+t),c=0,h=e+t;c<h;){if((s=this.readCodeByTable(n))<0)throw new Error("not enough input");switch(s){case 16:if((a=this.readBits(2))<0)throw new Error("not enough input");for(o=3+a;o--;)l[c++]=f;break;case 17:if((a=this.readBits(3))<0)throw new Error("not enough input");for(o=3+a;o--;)l[c++]=0;f=0;break;case 18:if((a=this.readBits(7))<0)throw new Error("not enough input");for(o=11+a;o--;)l[c++]=0;f=0;break;default:l[c++]=s,f=s}}this.litlenTable=Or(l.subarray(0,e)),this.distTable=Or(l.subarray(e))}).call(this)}catch(e){return this.restore_(),-1}return this.status=zr.RawInflateStream.Status.BLOCK_BODY_END,0},zr.RawInflateStream.prototype.decodeHuffman=function(){var e,t,i,n,r,a=this.output,s=this.op,o=this.litlenTable,l=this.distTable,c=a.length;for(this.status=zr.RawInflateStream.Status.DECODE_BLOCK_START;;){if(this.save_(),(e=this.readCodeByTable(o))<0)return this.op=s,this.restore_(),-1;if(256===e)break;if(e<256)s===c&&(c=(a=this.expandBuffer()).length),a[s++]=e;else{if(t=e-257,n=zr.RawInflateStream.LengthCodeTable[t],zr.RawInflateStream.LengthExtraTable[t]>0){if((r=this.readBits(zr.RawInflateStream.LengthExtraTable[t]))<0)return this.op=s,this.restore_(),-1;n+=r}if((e=this.readCodeByTable(l))<0)return this.op=s,this.restore_(),-1;if(i=zr.RawInflateStream.DistCodeTable[e],zr.RawInflateStream.DistExtraTable[e]>0){if((r=this.readBits(zr.RawInflateStream.DistExtraTable[e]))<0)return this.op=s,this.restore_(),-1;i+=r}for(s+n>=c&&(c=(a=this.expandBuffer()).length);n--;)a[s]=a[s++-i];if(this.ip===this.input.length)return this.op=s,-1}}for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=s,this.status=zr.RawInflateStream.Status.DECODE_BLOCK_END},zr.RawInflateStream.prototype.expandBuffer=function(e){var t,i,n,r=this.input.length/this.ip+1|0,a=this.input,s=this.output;return e&&("number"==typeof e.fixRatio&&(r=e.fixRatio),"number"==typeof e.addRatio&&(r+=e.addRatio)),i=r<2?(n=(a.length-this.ip)/this.litlenTable[2]/2*258|0)<s.length?s.length+n:s.length<<1:s.length*r,(t=new Uint8Array(i)).set(s),this.output=t,this.output},zr.RawInflateStream.prototype.concatBuffer=function(){var e,t,i=this.op;return e=this.resize?new Uint8Array(this.output.subarray(this.sp,i)):this.output.subarray(this.sp,i),this.sp=i,i>zr.RawInflateStream.MaxBackwardLength+this.bufferSize&&(this.op=this.sp=zr.RawInflateStream.MaxBackwardLength,t=this.output,this.output=new Uint8Array(this.bufferSize+zr.RawInflateStream.MaxBackwardLength),this.output.set(t.subarray(i-zr.RawInflateStream.MaxBackwardLength,i))),e},zr.Inflate=function(e,t){var i,n;if(this.input=e,this.ip=0,this.rawinflate,this.verify,!t&&(t={})||(t.index&&(this.ip=t.index),t.verify&&(this.verify=t.verify)),i=e[this.ip++],n=e[this.ip++],(15&i)!==zr.CompressionMethod.DEFLATE)throw new Error("unsupported compression method");if(this.method=zr.CompressionMethod.DEFLATE,((i<<8)+n)%31!=0)throw new Error("invalid fcheck flag:"+((i<<8)+n)%31);if(32&n)throw new Error("fdict flag is not supported");this.rawinflate=new zr.RawInflate(e,{index:this.ip,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})},zr.Inflate.BufferType=zr.RawInflate.BufferType,zr.Inflate.prototype.decompress=function(){var e,t=this.input;if(e=this.rawinflate.decompress(),this.ip=this.rawinflate.ip,this.verify&&(t[this.ip++]<<24|t[this.ip++]<<16|t[this.ip++]<<8|t[this.ip++])>>>0!==zr.Adler32(e))throw new Error("invalid adler-32 checksum");return e},zr.InflateStream=function(e){this.input=void 0===e?new Uint8Array:e,this.ip=0,this.rawinflate=new zr.RawInflateStream(this.input,this.ip),this.method,this.output=this.rawinflate.output},zr.InflateStream.prototype.decompress=function(e){var t;if(void 0!==e){var i=new Uint8Array(this.input.length+e.length);i.set(this.input,0),i.set(e,this.input.length),this.input=i}return void 0===this.method&&this.readHeader()<0?new Uint8Array:(t=this.rawinflate.decompress(this.input,this.ip),0!==this.rawinflate.ip&&(this.input=this.input.subarray(this.rawinflate.ip),this.ip=0),t)},zr.InflateStream.prototype.readHeader=function(){var e=this.ip,t=this.input,i=t[e++],n=t[e++];if(void 0===i||void 0===n)return-1;if((15&i)!==zr.CompressionMethod.DEFLATE)throw new Error("unsupported compression method");if(this.method=zr.CompressionMethod.DEFLATE,((i<<8)+n)%31!=0)throw new Error("invalid fcheck flag:"+((i<<8)+n)%31);if(32&n)throw new Error("fdict flag is not supported");this.ip=e},zr.Gunzip=function(e,t){this.input=e,this.ip=0,this.member=[],this.decompressed=!1},zr.Gunzip.prototype.getMembers=function(){return this.decompressed||this.decompress(),this.member.slice()},zr.Gunzip.prototype.decompress=function(){for(var e=this.input.length;this.ip<e;)this.decodeMember();return this.decompressed=!0,this.concatMember()},zr.Gunzip.prototype.decodeMember=function(){var e,t,i,n,r,a,s,o,l,c=new zr.GunzipMember,h=this.input,f=this.ip;if(c.id1=h[f++],c.id2=h[f++],31!==c.id1||139!==c.id2)throw new Error("invalid file signature:"+c.id1+","+c.id2);if(c.cm=h[f++],8!==c.cm)throw new Error("unknown compression method: "+c.cm);if(c.flg=h[f++],o=h[f++]|h[f++]<<8|h[f++]<<16|h[f++]<<24,c.mtime=new Date(1e3*o),c.xfl=h[f++],c.os=h[f++],(c.flg&zr.Gzip.FlagsMask.FEXTRA)>0&&(c.xlen=h[f++]|h[f++]<<8,f=this.decodeSubField(f,c.xlen)),(c.flg&zr.Gzip.FlagsMask.FNAME)>0){for(s=[],a=0;(r=h[f++])>0;)s[a++]=String.fromCharCode(r);c.name=s.join("")}if((c.flg&zr.Gzip.FlagsMask.FCOMMENT)>0){for(s=[],a=0;(r=h[f++])>0;)s[a++]=String.fromCharCode(r);c.comment=s.join("")}if((c.flg&zr.Gzip.FlagsMask.FHCRC)>0&&(c.crc16=65535&zr.CRC32.calc(h,0,f),c.crc16!==(h[f++]|h[f++]<<8)))throw new Error("invalid header crc16");if(e=h[h.length-4]|h[h.length-3]<<8|h[h.length-2]<<16|h[h.length-1]<<24,h.length-f-4-4<512*e&&(n=e),t=new zr.RawInflate(h,{index:f,bufferSize:n}),c.data=i=t.decompress(),f=t.ip,c.crc32=l=(h[f++]|h[f++]<<8|h[f++]<<16|h[f++]<<24)>>>0,zr.CRC32.calc(i)!==l)throw new Error("invalid CRC-32 checksum: 0x"+zr.CRC32.calc(i).toString(16)+" / 0x"+l.toString(16));if(c.isize=e=(h[f++]|h[f++]<<8|h[f++]<<16|h[f++]<<24)>>>0,(4294967295&i.length)!==e)throw new Error("invalid input size: "+(4294967295&i.length)+" / "+e);this.member.push(c),this.ip=f},zr.Gunzip.prototype.decodeSubField=function(e,t){return e+t},zr.Gunzip.prototype.concatMember=function(){var e,t,i,n=this.member,r=0,a=0;for(e=0,t=n.length;e<t;++e)a+=n[e].data.length;for(i=new Uint8Array(a),e=0;e<t;++e)i.set(n[e].data,r),r+=n[e].data.length;return i},zr.GunzipMember=function(){this.id1,this.id2,this.cm,this.flg,this.mtime,this.xfl,this.os,this.crc16,this.xlen,this.crc32,this.isize,this.name,this.comment,this.data},zr.GunzipMember.prototype.getName=function(){return this.name},zr.GunzipMember.prototype.getData=function(){return this.data},zr.GunzipMember.prototype.getMtime=function(){return this.mtime},zr.Gzip=function(e,t){this.input=e,this.ip=0,this.output,this.op=0,this.flags={},this.filename,this.comment,this.deflateOptions,t&&(t.flags&&(this.flags=t.flags),"string"==typeof t.filename&&(this.filename=t.filename),"string"==typeof t.comment&&(this.comment=t.comment),t.deflateOptions&&(this.deflateOptions=t.deflateOptions)),this.deflateOptions||(this.deflateOptions={})},zr.Gzip.DefaultBufferSize=32768,zr.Gzip.prototype.compress=function(){var e,t,i,n,r,a,s,o,l=new Uint8Array(zr.Gzip.DefaultBufferSize),c=0,h=this.input,f=this.ip,d=this.filename,u=this.comment;if(l[c++]=31,l[c++]=139,l[c++]=8,e=0,this.flags.fname&&(e|=zr.Gzip.FlagsMask.FNAME),this.flags.fcomment&&(e|=zr.Gzip.FlagsMask.FCOMMENT),this.flags.fhcrc&&(e|=zr.Gzip.FlagsMask.FHCRC),l[c++]=e,t=(Date.now?Date.now():+new Date)/1e3|0,l[c++]=255&t,l[c++]=t>>>8&255,l[c++]=t>>>16&255,l[c++]=t>>>24&255,l[c++]=0,l[c++]=zr.Gzip.OperatingSystem.UNKNOWN,void 0!==this.flags.fname){for(s=0,o=d.length;s<o;++s)(a=d.charCodeAt(s))>255&&(l[c++]=a>>>8&255),l[c++]=255&a;l[c++]=0}if(this.flags.comment){for(s=0,o=u.length;s<o;++s)(a=u.charCodeAt(s))>255&&(l[c++]=a>>>8&255),l[c++]=255&a;l[c++]=0}return this.flags.fhcrc&&(i=65535&zr.CRC32.calc(l,0,c),l[c++]=255&i,l[c++]=i>>>8&255),this.deflateOptions.outputBuffer=l,this.deflateOptions.outputIndex=c,l=(r=new zr.RawDeflate(h,this.deflateOptions)).compress(),(c=r.op)+8>l.buffer.byteLength?(this.output=new Uint8Array(c+8),this.output.set(new Uint8Array(l.buffer)),l=this.output):l=new Uint8Array(l.buffer),n=zr.CRC32.calc(h),l[c++]=255&n,l[c++]=n>>>8&255,l[c++]=n>>>16&255,l[c++]=n>>>24&255,o=h.length,l[c++]=255&o,l[c++]=o>>>8&255,l[c++]=o>>>16&255,l[c++]=o>>>24&255,this.ip=f,c<l.length&&(this.output=l=l.subarray(0,c)),l},zr.Gzip.OperatingSystem={FAT:0,AMIGA:1,VMS:2,UNIX:3,VM_CMS:4,ATARI_TOS:5,HPFS:6,MACINTOSH:7,Z_SYSTEM:8,CP_M:9,TOPS_20:10,NTFS:11,QDOS:12,ACORN_RISCOS:13,UNKNOWN:255},zr.Gzip.FlagsMask={FTEXT:1,FHCRC:2,FEXTRA:4,FNAME:8,FCOMMENT:16},zr.Heap=function(e){this.buffer=new Uint16Array(2*e),this.length=0},zr.Heap.prototype.getParent=function(e){return 2*((e-2)/4|0)},zr.Heap.prototype.getChild=function(e){return 2*e+2},zr.Heap.prototype.push=function(e,t){var i,n,r,a=this.buffer;for(i=this.length,a[this.length++]=t,a[this.length++]=e;i>0&&(n=this.getParent(i),a[i]>a[n]);)r=a[i],a[i]=a[n],a[n]=r,r=a[i+1],a[i+1]=a[n+1],a[n+1]=r,i=n;return this.length},zr.Heap.prototype.pop=function(){var e,t,i,n,r,a=this.buffer;for(t=a[0],e=a[1],this.length-=2,a[0]=a[this.length],a[1]=a[this.length+1],r=0;!((n=this.getChild(r))>=this.length)&&(n+2<this.length&&a[n+2]>a[n]&&(n+=2),a[n]>a[r]);)i=a[r],a[r]=a[n],a[n]=i,i=a[r+1],a[r+1]=a[n+1],a[n+1]=i,r=n;return{index:e,value:t,length:this.length}},zr.RawDeflate=function(e,t){this.compressionType=zr.RawDeflate.CompressionType.DYNAMIC,this.lazy=0,this.freqsLitLen,this.freqsDist,this.input=e instanceof Array?new Uint8Array(e):e,this.output,this.op=0,t&&(t.lazy&&(this.lazy=t.lazy),"number"==typeof t.compressionType&&(this.compressionType=t.compressionType),t.outputBuffer&&(this.output=t.outputBuffer instanceof Array?new Uint8Array(t.outputBuffer):t.outputBuffer),"number"==typeof t.outputIndex&&(this.op=t.outputIndex)),this.output||(this.output=new Uint8Array(32768))},zr.RawDeflate.CompressionType={NONE:0,FIXED:1,DYNAMIC:2,RESERVED:3},zr.RawDeflate.Lz77MinLength=3,zr.RawDeflate.Lz77MaxLength=258,zr.RawDeflate.WindowSize=32768,zr.RawDeflate.MaxCodeLength=16,zr.RawDeflate.HUFMAX=286,zr.RawDeflate.FixedHuffmanTable=function(){var e,t=[];for(e=0;e<288;e++)switch(!0){case e<=143:t.push([e+48,8]);break;case e<=255:t.push([e-144+400,9]);break;case e<=279:t.push([e-256+0,7]);break;case e<=287:t.push([e-280+192,8]);break;default:throw"invalid literal: "+e}return t}(),zr.RawDeflate.prototype.compress=function(){var e,t,i,n=this.input;switch(this.compressionType){case zr.RawDeflate.CompressionType.NONE:for(t=0,i=n.length;t<i;)t+=(e=n.subarray(t,t+65535)).length,this.makeNocompressBlock(e,t===i);break;case zr.RawDeflate.CompressionType.FIXED:this.output=this.makeFixedHuffmanBlock(n,!0),this.op=this.output.length;break;case zr.RawDeflate.CompressionType.DYNAMIC:this.output=this.makeDynamicHuffmanBlock(n,!0),this.op=this.output.length;break;default:throw"invalid compression type"}return this.output},zr.RawDeflate.prototype.makeNocompressBlock=function(e,t){var i,n,r,a,s=this.output,o=this.op;for(s=new Uint8Array(this.output.buffer);s.length<=o+e.length+5;)s=new Uint8Array(s.length<<1);return s.set(this.output),i=t?1:0,n=zr.RawDeflate.CompressionType.NONE,s[o++]=i|n<<1,a=65536+~(r=e.length)&65535,s[o++]=255&r,s[o++]=r>>>8&255,s[o++]=255&a,s[o++]=a>>>8&255,s.set(e,o),o+=e.length,s=s.subarray(0,o),this.op=o,this.output=s,s},zr.RawDeflate.prototype.makeFixedHuffmanBlock=function(e,t){var i,n,r,a=new zr.BitStream(new Uint8Array(this.output.buffer),this.op);return i=t?1:0,n=zr.RawDeflate.CompressionType.FIXED,a.writeBits(i,1,!0),a.writeBits(n,2,!0),r=this.lz77(e),this.fixedHuffman(r,a),a.finish()},zr.RawDeflate.prototype.makeDynamicHuffmanBlock=function(e,t){var i,n,r,a,s,o,l,c,h,f,d,u,p,g,w,m,b,y=new zr.BitStream(new Uint8Array(this.output.buffer),this.op),v=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],_=new Array(19);for(i=t?1:0,n=zr.RawDeflate.CompressionType.DYNAMIC,y.writeBits(i,1,!0),y.writeBits(n,2,!0),r=this.lz77(e),l=this.getLengths_(this.freqsLitLen,15),c=this.getCodesFromLengths_(l),h=this.getLengths_(this.freqsDist,7),f=this.getCodesFromLengths_(h),a=286;a>257&&0===l[a-1];a--);for(s=30;s>1&&0===h[s-1];s--);for(d=this.getTreeSymbols_(a,l,s,h),u=this.getLengths_(d.freqs,7),m=0;m<19;m++)_[m]=u[v[m]];for(o=19;o>4&&0===_[o-1];o--);for(p=this.getCodesFromLengths_(u),y.writeBits(a-257,5,!0),y.writeBits(s-1,5,!0),y.writeBits(o-4,4,!0),m=0;m<o;m++)y.writeBits(_[m],3,!0);for(m=0,b=d.codes.length;m<b;m++)if(g=d.codes[m],y.writeBits(p[g],u[g],!0),g>=16){switch(m++,g){case 16:w=2;break;case 17:w=3;break;case 18:w=7;break;default:throw"invalid code: "+g}y.writeBits(d.codes[m],w,!0)}return this.dynamicHuffman(r,[c,l],[f,h],y),y.finish()},zr.RawDeflate.prototype.dynamicHuffman=function(e,t,i,n){var r,a,s,o,l,c,h,f;for(l=t[0],c=t[1],h=i[0],f=i[1],r=0,a=e.length;r<a;++r)if(s=e[r],n.writeBits(l[s],c[s],!0),s>256)n.writeBits(e[++r],e[++r],!0),o=e[++r],n.writeBits(h[o],f[o],!0),n.writeBits(e[++r],e[++r],!0);else if(256===s)break;return n},zr.RawDeflate.prototype.fixedHuffman=function(e,t){var i,n,r;for(i=0,n=e.length;i<n;i++)if(r=e[i],zr.BitStream.prototype.writeBits.apply(t,zr.RawDeflate.FixedHuffmanTable[r]),r>256)t.writeBits(e[++i],e[++i],!0),t.writeBits(e[++i],5),t.writeBits(e[++i],e[++i],!0);else if(256===r)break;return t},zr.RawDeflate.Lz77Match=function(e,t){this.length=e,this.backwardDistance=t},zr.RawDeflate.Lz77Match.LengthCodeTable=function(e){return new Uint32Array(e)}(function(){var e,t,i=[];for(e=3;e<=258;e++)t=n(e),i[e]=t[2]<<24|t[1]<<16|t[0];function n(e){switch(!0){case 3===e:return[257,e-3,0];case 4===e:return[258,e-4,0];case 5===e:return[259,e-5,0];case 6===e:return[260,e-6,0];case 7===e:return[261,e-7,0];case 8===e:return[262,e-8,0];case 9===e:return[263,e-9,0];case 10===e:return[264,e-10,0];case e<=12:return[265,e-11,1];case e<=14:return[266,e-13,1];case e<=16:return[267,e-15,1];case e<=18:return[268,e-17,1];case e<=22:return[269,e-19,2];case e<=26:return[270,e-23,2];case e<=30:return[271,e-27,2];case e<=34:return[272,e-31,2];case e<=42:return[273,e-35,3];case e<=50:return[274,e-43,3];case e<=58:return[275,e-51,3];case e<=66:return[276,e-59,3];case e<=82:return[277,e-67,4];case e<=98:return[278,e-83,4];case e<=114:return[279,e-99,4];case e<=130:return[280,e-115,4];case e<=162:return[281,e-131,5];case e<=194:return[282,e-163,5];case e<=226:return[283,e-195,5];case e<=257:return[284,e-227,5];case 258===e:return[285,e-258,0];default:throw"invalid length: "+e}}return i}()),zr.RawDeflate.Lz77Match.prototype.getDistanceCode_=function(e){var t;switch(!0){case 1===e:t=[0,e-1,0];break;case 2===e:t=[1,e-2,0];break;case 3===e:t=[2,e-3,0];break;case 4===e:t=[3,e-4,0];break;case e<=6:t=[4,e-5,1];break;case e<=8:t=[5,e-7,1];break;case e<=12:t=[6,e-9,2];break;case e<=16:t=[7,e-13,2];break;case e<=24:t=[8,e-17,3];break;case e<=32:t=[9,e-25,3];break;case e<=48:t=[10,e-33,4];break;case e<=64:t=[11,e-49,4];break;case e<=96:t=[12,e-65,5];break;case e<=128:t=[13,e-97,5];break;case e<=192:t=[14,e-129,6];break;case e<=256:t=[15,e-193,6];break;case e<=384:t=[16,e-257,7];break;case e<=512:t=[17,e-385,7];break;case e<=768:t=[18,e-513,8];break;case e<=1024:t=[19,e-769,8];break;case e<=1536:t=[20,e-1025,9];break;case e<=2048:t=[21,e-1537,9];break;case e<=3072:t=[22,e-2049,10];break;case e<=4096:t=[23,e-3073,10];break;case e<=6144:t=[24,e-4097,11];break;case e<=8192:t=[25,e-6145,11];break;case e<=12288:t=[26,e-8193,12];break;case e<=16384:t=[27,e-12289,12];break;case e<=24576:t=[28,e-16385,13];break;case e<=32768:t=[29,e-24577,13];break;default:throw"invalid distance"}return t},zr.RawDeflate.Lz77Match.prototype.toLz77Array=function(){var e,t=this.length,i=this.backwardDistance,n=[],r=0;return e=zr.RawDeflate.Lz77Match.LengthCodeTable[t],n[r++]=65535&e,n[r++]=e>>16&255,n[r++]=e>>24,e=this.getDistanceCode_(i),n[r++]=e[0],n[r++]=e[1],n[r++]=e[2],n},zr.RawDeflate.prototype.lz77=function(e){var t,i,n,r,a,s,o,l,c,h={},f=zr.RawDeflate.WindowSize,d=new Uint16Array(2*e.length),u=0,p=0,g=new Uint32Array(286),w=new Uint32Array(30),m=this.lazy;function b(e,t){var i,n,r=e.toLz77Array();for(i=0,n=r.length;i<n;++i)d[u++]=r[i];g[r[0]]++,w[r[3]]++,p=e.length+t-1,l=null}for(g[256]=1,t=0,i=e.length;t<i;++t){for(a=0,n=0,r=zr.RawDeflate.Lz77MinLength;n<r&&t+n!==i;++n)a=a<<8|e[t+n];if(void 0===h[a]&&(h[a]=[]),s=h[a],p-- >0)s.push(t);else{for(;s.length>0&&t-s[0]>f;)s.shift();if(t+zr.RawDeflate.Lz77MinLength>=i){for(l&&b(l,-1),n=0,r=i-t;n<r;++n)c=e[t+n],d[u++]=c,++g[c];break}s.length>0?(o=this.searchLongestMatch_(e,t,s),l?l.length<o.length?(c=e[t-1],d[u++]=c,++g[c],b(o,0)):b(l,-1):o.length<m?l=o:b(o,0)):l?b(l,-1):(c=e[t],d[u++]=c,++g[c]),s.push(t)}}return d[u++]=256,g[256]++,this.freqsLitLen=g,this.freqsDist=w,d.subarray(0,u)},zr.RawDeflate.prototype.searchLongestMatch_=function(e,t,i){var n,r,a,s,o,l,c=0,h=e.length;e:for(s=0,l=i.length;s<l;s++){if(n=i[l-s-1],a=zr.RawDeflate.Lz77MinLength,c>zr.RawDeflate.Lz77MinLength){for(o=c;o>zr.RawDeflate.Lz77MinLength;o--)if(e[n+o-1]!==e[t+o-1])continue e;a=c}for(;a<zr.RawDeflate.Lz77MaxLength&&t+a<h&&e[n+a]===e[t+a];)++a;if(a>c&&(r=n,c=a),a===zr.RawDeflate.Lz77MaxLength)break}return new zr.RawDeflate.Lz77Match(c,t-r)},zr.RawDeflate.prototype.getTreeSymbols_=function(e,t,i,n){var r,a,s,o,l,c,h=new Uint32Array(e+i),f=new Uint32Array(316),d=new Uint8Array(19);for(a=0,r=0;r<e;r++)h[a++]=t[r];for(r=0;r<i;r++)h[a++]=n[r];for(l=0,r=0,o=h.length;r<o;r+=a){for(a=1;r+a<o&&h[r+a]===h[r];++a);if(s=a,0===h[r])if(s<3)for(;s-- >0;)f[l++]=0,d[0]++;else for(;s>0;)(c=s<138?s:138)>s-3&&c<s&&(c=s-3),c<=10?(f[l++]=17,f[l++]=c-3,d[17]++):(f[l++]=18,f[l++]=c-11,d[18]++),s-=c;else if(f[l++]=h[r],d[h[r]]++,--s<3)for(;s-- >0;)f[l++]=h[r],d[h[r]]++;else for(;s>0;)(c=s<6?s:6)>s-3&&c<s&&(c=s-3),f[l++]=16,f[l++]=c-3,d[16]++,s-=c}return{codes:f.subarray(0,l),freqs:d}},zr.RawDeflate.prototype.getLengths_=function(e,t){var i,n,r,a,s,o=e.length,l=new zr.Heap(2*zr.RawDeflate.HUFMAX),c=new Uint8Array(o);for(a=0;a<o;++a)e[a]>0&&l.push(a,e[a]);if(i=new Array(l.length/2),n=new Uint32Array(l.length/2),1===i.length)return c[l.pop().index]=1,c;for(a=0,s=l.length/2;a<s;++a)i[a]=l.pop(),n[a]=i[a].value;for(r=this.reversePackageMerge_(n,n.length,t),a=0,s=i.length;a<s;++a)c[i[a].index]=r[a];return c},zr.RawDeflate.prototype.reversePackageMerge_=function(e,t,i){var n,r,a,s,o,l=new Uint16Array(i),c=new Uint8Array(i),h=new Uint8Array(t),f=new Array(i),d=new Array(i),u=new Array(i),p=(1<<i)-t,g=1<<i-1;function w(e){var i=d[e][u[e]];i===t?(w(e+1),w(e+1)):--h[i],++u[e]}for(l[i-1]=t,r=0;r<i;++r)p<g?c[r]=0:(c[r]=1,p-=g),p<<=1,l[i-2-r]=(l[i-1-r]/2|0)+t;for(l[0]=c[0],f[0]=new Array(l[0]),d[0]=new Array(l[0]),r=1;r<i;++r)l[r]>2*l[r-1]+c[r]&&(l[r]=2*l[r-1]+c[r]),f[r]=new Array(l[r]),d[r]=new Array(l[r]);for(n=0;n<t;++n)h[n]=i;for(a=0;a<l[i-1];++a)f[i-1][a]=e[a],d[i-1][a]=a;for(n=0;n<i;++n)u[n]=0;for(1===c[i-1]&&(--h[0],++u[i-1]),r=i-2;r>=0;--r){for(n=0,s=0,o=u[r+1],a=0;a<l[r];a++)(s=f[r+1][o]+f[r+1][o+1])>e[n]?(f[r][a]=s,d[r][a]=t,o+=2):(f[r][a]=e[n],d[r][a]=n,++n);u[r]=0,1===c[r]&&w(r)}return h},zr.RawDeflate.prototype.getCodesFromLengths_=function(e){var t,i,n,r,a=new Uint16Array(e.length),s=[],o=[],l=0;for(t=0,i=e.length;t<i;t++)s[e[t]]=1+(0|s[e[t]]);for(t=1,i=zr.RawDeflate.MaxCodeLength;t<=i;t++)o[t]=l,l+=0|s[t],l<<=1;for(t=0,i=e.length;t<i;t++)for(l=o[e[t]],o[e[t]]+=1,a[t]=0,n=0,r=e[t];n<r;n++)a[t]=a[t]<<1|1&l,l>>>=1;return a},zr.Unzip=function(e,t){t=t||{},this.input=e instanceof Array?new Uint8Array(e):e,this.ip=0,this.eocdrOffset,this.numberOfThisDisk,this.startDisk,this.totalEntriesThisDisk,this.totalEntries,this.centralDirectorySize,this.centralDirectoryOffset,this.commentLength,this.comment,this.fileHeaderList,this.filenameToIndex,this.verify=t.verify||!1,this.password=t.password},zr.Unzip.CompressionMethod=zr.Zip.CompressionMethod,zr.Unzip.FileHeaderSignature=zr.Zip.FileHeaderSignature,zr.Unzip.LocalFileHeaderSignature=zr.Zip.LocalFileHeaderSignature,zr.Unzip.CentralDirectorySignature=zr.Zip.CentralDirectorySignature,zr.Unzip.FileHeader=function(e,t){this.input=e,this.offset=t,this.length,this.version,this.os,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.fileCommentLength,this.diskNumberStart,this.internalFileAttributes,this.externalFileAttributes,this.relativeOffset,this.filename,this.extraField,this.comment},zr.Unzip.FileHeader.prototype.parse=function(){var e=this.input,t=this.offset;if(e[t++]!==zr.Unzip.FileHeaderSignature[0]||e[t++]!==zr.Unzip.FileHeaderSignature[1]||e[t++]!==zr.Unzip.FileHeaderSignature[2]||e[t++]!==zr.Unzip.FileHeaderSignature[3])throw new Error("invalid file header signature");this.version=e[t++],this.os=e[t++],this.needVersion=e[t++]|e[t++]<<8,this.flags=e[t++]|e[t++]<<8,this.compression=e[t++]|e[t++]<<8,this.time=e[t++]|e[t++]<<8,this.date=e[t++]|e[t++]<<8,this.crc32=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.compressedSize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.plainSize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.fileNameLength=e[t++]|e[t++]<<8,this.extraFieldLength=e[t++]|e[t++]<<8,this.fileCommentLength=e[t++]|e[t++]<<8,this.diskNumberStart=e[t++]|e[t++]<<8,this.internalFileAttributes=e[t++]|e[t++]<<8,this.externalFileAttributes=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,this.relativeOffset=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.filename=String.fromCharCode.apply(null,e.subarray(t,t+=this.fileNameLength)),this.extraField=e.subarray(t,t+=this.extraFieldLength),this.comment=e.subarray(t,t+this.fileCommentLength),this.length=t-this.offset},zr.Unzip.LocalFileHeader=function(e,t){this.input=e,this.offset=t,this.length,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.filename,this.extraField},zr.Unzip.LocalFileHeader.Flags=zr.Zip.Flags,zr.Unzip.LocalFileHeader.prototype.parse=function(){var e=this.input,t=this.offset;if(e[t++]!==zr.Unzip.LocalFileHeaderSignature[0]||e[t++]!==zr.Unzip.LocalFileHeaderSignature[1]||e[t++]!==zr.Unzip.LocalFileHeaderSignature[2]||e[t++]!==zr.Unzip.LocalFileHeaderSignature[3])throw new Error("invalid local file header signature");this.needVersion=e[t++]|e[t++]<<8,this.flags=e[t++]|e[t++]<<8,this.compression=e[t++]|e[t++]<<8,this.time=e[t++]|e[t++]<<8,this.date=e[t++]|e[t++]<<8,this.crc32=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.compressedSize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.plainSize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.fileNameLength=e[t++]|e[t++]<<8,this.extraFieldLength=e[t++]|e[t++]<<8,this.filename=String.fromCharCode.apply(null,e.subarray(t,t+=this.fileNameLength)),this.extraField=e.subarray(t,t+=this.extraFieldLength),this.length=t-this.offset},zr.Unzip.prototype.searchEndOfCentralDirectoryRecord=function(){var e,t=this.input;for(e=t.length-12;e>0;--e)if(t[e]===zr.Unzip.CentralDirectorySignature[0]&&t[e+1]===zr.Unzip.CentralDirectorySignature[1]&&t[e+2]===zr.Unzip.CentralDirectorySignature[2]&&t[e+3]===zr.Unzip.CentralDirectorySignature[3])return void(this.eocdrOffset=e);throw new Error("End of Central Directory Record not found")},zr.Unzip.prototype.parseEndOfCentralDirectoryRecord=function(){var e,t=this.input;if(this.eocdrOffset||this.searchEndOfCentralDirectoryRecord(),e=this.eocdrOffset,t[e++]!==zr.Unzip.CentralDirectorySignature[0]||t[e++]!==zr.Unzip.CentralDirectorySignature[1]||t[e++]!==zr.Unzip.CentralDirectorySignature[2]||t[e++]!==zr.Unzip.CentralDirectorySignature[3])throw new Error("invalid signature");this.numberOfThisDisk=t[e++]|t[e++]<<8,this.startDisk=t[e++]|t[e++]<<8,this.totalEntriesThisDisk=t[e++]|t[e++]<<8,this.totalEntries=t[e++]|t[e++]<<8,this.centralDirectorySize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.centralDirectoryOffset=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.commentLength=t[e++]|t[e++]<<8,this.comment=t.subarray(e,e+this.commentLength)},zr.Unzip.prototype.parseFileHeader=function(){var e,t,i,n,r=[],a={};if(!this.fileHeaderList){for(void 0===this.centralDirectoryOffset&&this.parseEndOfCentralDirectoryRecord(),e=this.centralDirectoryOffset,i=0,n=this.totalEntries;i<n;++i)(t=new zr.Unzip.FileHeader(this.input,e)).parse(),e+=t.length,r[i]=t,a[t.filename]=i;if(this.centralDirectorySize<e-this.centralDirectoryOffset)throw new Error("invalid file header size");this.fileHeaderList=r,this.filenameToIndex=a}},zr.Unzip.prototype.getFileData=function(e,t){t=t||{};var i,n,r,a,s,o,l,c,h=this.input,f=this.fileHeaderList;if(f||this.parseFileHeader(),void 0===f[e])throw new Error("wrong index");if(n=f[e].relativeOffset,(i=new zr.Unzip.LocalFileHeader(this.input,n)).parse(),n+=i.length,r=i.compressedSize,0!=(i.flags&zr.Unzip.LocalFileHeader.Flags.ENCRYPT)){if(!t.password&&!this.password)throw new Error("please set password");for(o=this.createDecryptionKey(t.password||this.password),l=n,c=n+12;l<c;++l)this.decode(o,h[l]);for(l=n+=12,c=n+(r-=12);l<c;++l)h[l]=this.decode(o,h[l])}switch(i.compression){case zr.Unzip.CompressionMethod.STORE:a=this.input.subarray(n,n+r);break;case zr.Unzip.CompressionMethod.DEFLATE:a=new zr.RawInflate(this.input,{index:n,bufferSize:i.plainSize}).decompress();break;default:throw new Error("unknown compression type")}if(this.verify&&(s=zr.CRC32.calc(a),i.crc32!==s))throw new Error("wrong crc: file=0x"+i.crc32.toString(16)+", data=0x"+s.toString(16));return a},zr.Unzip.prototype.getFilenames=function(){var e,t,i,n=[];for(this.fileHeaderList||this.parseFileHeader(),e=0,t=(i=this.fileHeaderList).length;e<t;++e)n[e]=i[e].filename;return n},zr.Unzip.prototype.decompress=function(e,t){var i;if(this.filenameToIndex||this.parseFileHeader(),void 0===(i=this.filenameToIndex[e]))throw new Error(e+" not found");return this.getFileData(i,t)},zr.Unzip.prototype.setPassword=function(e){this.password=e},zr.Unzip.prototype.decode=function(e,t){return t^=this.getByte(e),this.updateKeys(e,t),t},zr.Unzip.prototype.updateKeys=zr.Zip.prototype.updateKeys,zr.Unzip.prototype.createDecryptionKey=zr.Zip.prototype.createEncryptionKey,zr.Unzip.prototype.getByte=zr.Zip.prototype.getByte,zr.Util.stringToByteArray=function(e){var t,i,n=e.split("");for(t=0,i=n.length;t<i;t++)n[t]=(255&n[t].charCodeAt(0))>>>0;return n},zr.Adler32=function(e){return"string"==typeof e&&(e=zr.Util.stringToByteArray(e)),zr.Adler32.update(1,e)},zr.Adler32.update=function(e,t){for(var i,n=65535&e,r=e>>>16&65535,a=t.length,s=0;a>0;){a-=i=a>zr.Adler32.OptimizationParameter?zr.Adler32.OptimizationParameter:a;do{r+=n+=t[s++]}while(--i);n%=65521,r%=65521}return(r<<16|n)>>>0},zr.Adler32.OptimizationParameter=1024,zr.BitStream=function(e,t){if(this.index="number"==typeof t?t:0,this.bitindex=0,this.buffer=e instanceof Uint8Array?e:new Uint8Array(zr.BitStream.DefaultBlockSize),2*this.buffer.length<=this.index)throw new Error("invalid index");this.buffer.length<=this.index&&this.expandBuffer()},zr.BitStream.DefaultBlockSize=32768,zr.BitStream.prototype.expandBuffer=function(){var e=this.buffer,t=e.length,i=new Uint8Array(t<<1);return i.set(e),this.buffer=i},zr.BitStream.prototype.writeBits=function(e,t,i){var n,r=this.buffer,a=this.index,s=this.bitindex,o=r[a];if(i&&t>1&&(e=t>8?function(e){return zr.BitStream.ReverseTable[255&e]<<24|zr.BitStream.ReverseTable[e>>>8&255]<<16|zr.BitStream.ReverseTable[e>>>16&255]<<8|zr.BitStream.ReverseTable[e>>>24&255]}(e)>>32-t:zr.BitStream.ReverseTable[e]>>8-t),t+s<8)o=o<<t|e,s+=t;else for(n=0;n<t;++n)o=o<<1|e>>t-n-1&1,8==++s&&(s=0,r[a++]=zr.BitStream.ReverseTable[o],o=0,a===r.length&&(r=this.expandBuffer()));r[a]=o,this.buffer=r,this.bitindex=s,this.index=a},zr.BitStream.prototype.finish=function(){var e=this.buffer,t=this.index;return this.bitindex>0&&(e[t]<<=8-this.bitindex,e[t]=zr.BitStream.ReverseTable[e[t]],t++),e.subarray(0,t)},zr.BitStream.ReverseTable=function(){var e,t=new Uint8Array(256);for(e=0;e<256;++e)t[e]=function(e){var t=e,i=7;for(e>>>=1;e;e>>>=1)t<<=1,t|=1&e,--i;return(t<<i&255)>>>0}(e);return t}(),zr.CRC32.calc=function(e,t,i){return zr.CRC32.update(e,0,t,i)},zr.CRC32.update=function(e,t,i,n){var r=zr.CRC32.Table,a="number"==typeof i?i:i=0,s="number"==typeof n?n:e.length;for(t^=4294967295,a=7&s;a--;++i)t=t>>>8^r[255&(t^e[i])];for(a=s>>3;a--;i+=8)t=(t=(t=(t=(t=(t=(t=(t=t>>>8^r[255&(t^e[i])])>>>8^r[255&(t^e[i+1])])>>>8^r[255&(t^e[i+2])])>>>8^r[255&(t^e[i+3])])>>>8^r[255&(t^e[i+4])])>>>8^r[255&(t^e[i+5])])>>>8^r[255&(t^e[i+6])])>>>8^r[255&(t^e[i+7])];return(4294967295^t)>>>0},zr.CRC32.single=function(e,t){return(zr.CRC32.Table[255&(e^t)]^e>>>8)>>>0},zr.CRC32.Table_=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],zr.CRC32.Table=new Uint32Array(zr.CRC32.Table_),zr.Deflate=function(e,t){this.input=e,this.output=new Uint8Array(zr.Deflate.DefaultBufferSize),this.compressionType=zr.Deflate.CompressionType.DYNAMIC,this.rawDeflate;var i,n={};for(i in!t&&(t={})||"number"==typeof t.compressionType&&(this.compressionType=t.compressionType),t)n[i]=t[i];n.outputBuffer=this.output,this.rawDeflate=new zr.RawDeflate(this.input,n)},zr.Deflate.DefaultBufferSize=32768,zr.Deflate.CompressionType=zr.RawDeflate.CompressionType,zr.Deflate.compress=function(e,t){return new zr.Deflate(e,t).compress()},zr.Deflate.prototype.compress=function(){var e,t,i,n,r,a,s=0;if(a=this.output,(e=zr.CompressionMethod.DEFLATE)!==zr.CompressionMethod.DEFLATE)throw new Error("invalid compression method");if(t=Math.LOG2E*Math.log(zr.RawDeflate.WindowSize)-8<<4|e,a[s++]=t,0,e!==zr.CompressionMethod.DEFLATE)throw new Error("invalid compression method");switch(this.compressionType){case zr.Deflate.CompressionType.NONE:n=0;break;case zr.Deflate.CompressionType.FIXED:n=1;break;case zr.Deflate.CompressionType.DYNAMIC:n=2;break;default:throw new Error("unsupported compression type")}return i=n<<6|0,i|=31-(256*t+i)%31,a[s++]=i,r=zr.Adler32(this.input),this.rawDeflate.op=s,s=(a=this.rawDeflate.compress()).length,(a=new Uint8Array(a.buffer)).length<=s+4&&(this.output=new Uint8Array(a.length+4),this.output.set(a),a=this.output),(a=a.subarray(0,s+4))[s++]=r>>24&255,a[s++]=r>>16&255,a[s++]=r>>8&255,a[s++]=255&r,a};const Zr=new Map;Zr.set("!","%21"),Zr.set("#","%23"),Zr.set("$","%24"),Zr.set("%","%25"),Zr.set("&","%26"),Zr.set("'","%27"),Zr.set("(","%28"),Zr.set(")","%29"),Zr.set("*","%2A"),Zr.set("+","%2B"),Zr.set(",","%2C"),Zr.set("/","%2F"),Zr.set(":","%3A"),Zr.set(";","%3B"),Zr.set("=","%3D"),Zr.set("?","%3F"),Zr.set("@","%40"),Zr.set("[","%5B"),Zr.set("]","%5D"),Zr.set(" ","%20");function Kr(){return"undefined"!=typeof gapi&&gapi.auth2&&gapi.auth2.getAuthInstance()}let qr=!1;async function Gr(e){if("undefined"==typeof gapi)throw Error("Google authentication requires the 'gapi' library");if(!gapi.auth2)throw Error("Google 'auth2' has not been initialized");if(qr)return new Promise((function(t,i){let n;n=setInterval((()=>{try{!1===qr&&(t(Gr(e)),clearInterval(n))}catch(e){clearInterval(n),i(e)}}),100)}));qr=!0;try{let t,i=gapi.auth2.getAuthInstance().currentUser.get();if(i.isSignedIn()){i.hasGrantedScopes(e)||await i.grant({scope:e});const{access_token:n,expires_at:r}=i.getAuthResponse();if(Date.now()<r-3e5)t={access_token:n,expires_at:r};else{const{access_token:e,expires_at:n}=i.reloadAuthResponse();t={access_token:e,expires_at:n}}}else{i=await async function(e){const t=new gapi.auth2.SigninOptionsBuilder;return t.setPrompt("select_account"),t.setScope(e),gapi.auth2.getAuthInstance().signIn(t)}(e);const{access_token:n,expires_at:r}=i.getAuthResponse();t={access_token:n,expires_at:r}}return t}finally{qr=!1}}function jr(){return gapi.apiKey}function Wr(e){for(var t=Vr,i=t.parser.loose.exec(e),n={},r=14;r--;)n[t.key[r]]=i[r]||"";return n[t.q.name]={},n[t.key[12]].replace(t.q.parser,(function(e,i,r){i&&(n[t.q.name][i]=r)})),n}"object"==typeof process&&"undefined"==typeof window&&(global.atob=function(e){return Buffer.from(e,"base64").toString("binary")});const Vr={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};const Yr="function"==typeof new Uint8Array(1).subarray;function Xr(e,t,i,n,r){if(0!==r){if(!e)throw"Undef src";if(!i)throw"Undef dest";0===t&&r===e.length?Jr(e,i,n):Yr?Jr(e.subarray(t,t+r),i,n):1===e.BYTES_PER_ELEMENT&&r>100?Jr(new Uint8Array(e.buffer,e.byteOffset+t,r),i,n):function(e,t,i,n,r){for(let a=0;a<r;++a)i[n+a]=e[t+a]}(e,t,i,n,r)}}function Jr(e,t,i){t.set(e,i)}const Qr="googleapis",ea={oauthTokens:{},setToken:function(e,t){t=t||Qr,this.oauthTokens[t]=e,t===Qr&&(this.google.access_token=e)},getToken:function(e){let t;e=e||Qr;for(let i of Object.keys(this.oauthTokens)){if(ta(i).test(e)){t=this.oauthTokens[i];break}}return t},removeToken:function(e){e=e||Qr;for(let t of Object.keys(this.oauthTokens)){ta(t).test(e)&&(this.oauthTokens[t]=void 0)}e===Qr&&(this.google.access_token=void 0)},google:{setToken:function(e){ea.setToken(e)}}};function ta(e){return new RegExp("^"+e.split(/\*+/).map(ia).join(".*")+"$")}function ia(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}const na=new class{constructor(e){this.requestsPerSecond=e.requestsPerSecond||10,this.lastStartTime=0,this.queued=[]}add(e,t){var i=this;return new Promise((function(t,n){i.queued.push({resolve:t,reject:n,asyncFunction:e}),i.dequeue()}))}addAll(e,t){var i=e.map(function(e){return this.add(e,t)}.bind(this));return Promise.all(i)}dequeue(){if(this.queued.length>0){var e=new Date,t=1e3/this.requestsPerSecond+1,i=e-this.lastStartTime;i>=t?this._execute():setTimeout(function(){this.dequeue()}.bind(this),t-i)}}async _execute(){this.lastStartTime=new Date;var e=this.queued.shift();const t=e.asyncFunction;try{const i=await t();e.resolve(i)}catch(t){e.reject(t)}}}({requestsPerSecond:8}),ra={apiKey:void 0,setApiKey:function(e){this.apiKey=e},load:aa,loadArrayBuffer:async function(e,t){return(t=t||{}).responseType||(t.responseType="arraybuffer"),e instanceof File?oa(e,t):aa(e,t)},loadJson:async function(e,t){"POST"===((t=t||{}).method||(t.sendData?"POST":"GET"))&&(t.contentType="application/json");const i=await this.loadString(e,t);return i?JSON.parse(i):i},loadString:async function(e,t){return t=t||{},e instanceof File?async function(e,t){const i=t.range?e.slice(t.range.start,t.range.start+t.range.size):e;let n=0;t&&t.bgz||e.name.endsWith(".bgz")?n=2:e.name.endsWith(".gz")&&(n=1);if(0===n)return ca(i);return fa(await la(i),n)}(e,t):async function(e,t){const i=(t=t||{}).filename||await async function(e){if(Ur(e)&&e.startsWith("https://drive.google.com")){if(void 0===jr())throw Error("Google drive is referenced, but API key is not defined.  An API key is required for Google Drive access");const t=await async function(e){let t="https://www.googleapis.com/drive/v3/files/"+$r(e)+"?supportsTeamDrives=true";const i=jr();i&&(t+="&key="+i);const n=await fetch(t);let r=await n.json();if(r.error&&404===r.error.code){const{access_token:e}=await Gr("https://www.googleapis.com/auth/drive.readonly");if(!e)throw Error(r.error);{const i=await fetch(t,{headers:{Authorization:`Bearer ${e}`}});if(r=await i.json(),r.error)throw Error(r.error)}}return r}(e);return t.originalFileName||t.name}return function(e){if(e instanceof File)return e.name;if(Ur(e)){let t=e.lastIndexOf("/"),i=t<0?e:e.substr(t+1);return t=i.indexOf("?"),t>0&&(i=i.substr(0,t)),i}throw Error("Expected File or string, got "+typeof e)}(e)}(e);let n=3;t.bgz?n=2:i.endsWith(".gz")&&(n=1);t.responseType="arraybuffer";return fa(await ra.load(e,t),n)}(e,t)}};async function aa(e,t){t=t||{};const i=typeof e;if((e=await("function"==typeof e?e():e))instanceof File)return oa(e,t);if("function"==typeof e.startsWith)return e.startsWith("data:")?function(e){const t=e.split(","),i=t[0].split(":")[1];let n=t[1];n=i.indexOf("base64")>=0?atob(n):decodeURI(n);const r=new Uint8Array(n.length);for(let e=0;e<n.length;e++)r[e]=n.charCodeAt(e);let a;a=i.indexOf("gzip")>0?new zr.Gunzip(r).decompress():r;return a}(e):(e.startsWith("https://drive.google.com")&&(e=Pr(e)),Hr(e)||e.startsWith("https://www.dropbox.com")?na.add((async function(){return sa(e,t)})):sa(e,t));throw Error(`url must be either a 'File', 'string', 'function', or 'Promise'.  Actual type: ${i}`)}async function sa(e,t){e=function(e){return e.includes("//www.dropbox.com")?e.replace("//www.dropbox.com","//dl.dropboxusercontent.com"):e.includes("//drive.google.com")?Pr(e):e.includes("//www.broadinstitute.org/igvdata")?e.replace("//www.broadinstitute.org/igvdata","//data.broadinstitute.org/igvdata"):e.includes("//igvdata.broadinstitute.org")?e.replace("//igvdata.broadinstitute.org","https://dn7ywbm9isq8j.cloudfront.net"):e.startsWith("ftp://ftp.ncbi.nlm.nih.gov/geo")?e.replace("ftp://","https://"):e}(e);let i=(t=t||{}).oauthToken||function(e){const t=Mr(e)?void 0:Wr(e).host;let i=ea.getToken(t);if(i)return i;if(void 0===t){const e=ha();if(e&&e.expires_at>Date.now())return e.access_token}}(e);return i&&(i=await("function"==typeof i?i():i)),new Promise((function(n,r){Mr(e)&&(Fr(e)&&(e=Nr(e)),Hr(e=function(e){let t=ra.apiKey;t||"undefined"==typeof gapi||(t=gapi.apiKey);if(void 0!==t&&!e.includes("key=")){const i=e.includes("?")?"&":"?";e=e+i+"key="+t}return e}(e))&&function(e){if(e.includes("supportsTeamDrive"))return e;{const t=e.includes("?")?"&":"?";e=e+t+"supportsTeamDrive=true"}}(e),i||(i=ha()));const a=t.headers||{};i&&function(e,t){t&&(e["Cache-Control"]="no-cache",e.Authorization="Bearer "+t)}(a,i);const s=t.range,o=navigator.userAgent.indexOf("Chrome")>-1;0===navigator.vendor.indexOf("Apple")&&/\sSafari\//.test(navigator.userAgent),s&&o&&!function(e){return e.indexOf("X-Amz-Signature")>-1}(e)&&(e+=e.includes("?")?"&":"?",e+="someRandomSeed="+Math.random().toString(36));const l=new XMLHttpRequest,c=t.sendData||t.body,h=t.method||(c?"POST":"GET"),f=t.responseType,d=t.contentType,u=t.mimeType;if(l.open(h,e),t.timeout&&(l.timeout=t.timeout),s){var p=s.size?s.start+s.size-1:"";l.setRequestHeader("Range","bytes="+s.start+"-"+p)}if(d&&l.setRequestHeader("Content-Type",d),u&&l.overrideMimeType(u),f&&(l.responseType=f),a)for(let e of Object.keys(a)){const t=a[e];l.setRequestHeader(e,t)}!0===t.withCredentials&&(l.withCredentials=!0),l.onload=async function(i){0===l.status||l.status>=200&&l.status<=300?s&&206!==l.status&&0!==s.start?(l.response.length>1e5&&alert(`Warning: Range header ignored for URL: ${e}.  This can have performance impacts.`),n(l.response.slice(s.start,s.start+s.size))):n(l.response):"undefined"==typeof gapi||404!==l.status&&401!==l.status&&403!==l.status||!Mr(e)||t.retries?403===l.status?g("Access forbidden: "+e):416===l.status?g("Unsatisfiable range"):g(l.status):w()},l.onerror=function(i){Mr(e)&&!t.retries&&w(),g("Error accessing resource: "+e+" Status: "+l.status)},l.ontimeout=function(e){g("Timed out")},l.onabort=function(e){r(e)};try{l.send(c)}catch(e){r(e)}function g(e){if(!r)throw e;r(e)}async function w(){try{const i=await async function(e){if(Kr()){const t=function(e){return Hr(e)?"https://www.googleapis.com/auth/drive.file":Fr(e)?"https://www.googleapis.com/auth/devstorage.read_only":"https://www.googleapis.com/auth/userinfo.profile"}(e),i=await Gr(t);return i?i.access_token:void 0}throw Error("Authorization is required, but Google oAuth has not been initalized. Contact your site administrator for assistance.")}(e);t.retries=1,t.oauthToken=i;const r=await aa(e,t);n(r)}catch(e){if(e.error){const t=e.error.startsWith("popup_blocked")?"Google login popup blocked by browser.":e.error;alert(t)}else g(e)}}}))}async function oa(e,t){let i=t&&t.range?e.slice(t.range.start,t.range.start+t.range.size):e;return"arraybuffer"===t.responseType?la(i):new Promise((function(t,n){const r=new FileReader;r.onload=function(e){t(r.result)},r.onerror=function(t){console.error("reject uploading local file "+e.name),n(null,r)},r.readAsBinaryString(i),console.warn("Deprecated method used: readAsBinaryString")}))}async function la(e){return"function"==typeof e.arrayBuffer?e.arrayBuffer():new Promise((function(t,i){const n=new FileReader;n.onload=function(e){t(n.result)},n.onerror=function(e){console.error("reject uploading local file "+localfile.name),i(null,n)},n.readAsArrayBuffer(e)}))}async function ca(e){return"function"==typeof e.text?e.text():new Promise((function(t,i){const n=new FileReader;n.onload=function(e){t(n.result)},n.onerror=function(e){console.error("reject uploading local file "+localfile.name),i(null,n)},n.readAsText(e)}))}function ha(){if(Kr()){const e=function(){let e=gapi.auth2.getAuthInstance().currentUser.get();if(e&&e.isSignedIn()){const{access_token:t,expires_at:i}=e.getAuthResponse();return{access_token:t,expires_at:i}}}();return e?e.access_token:void 0}}function fa(e,t){if(3===t&&e.byteLength>2){const i=new Uint8Array(e,0,2);31===i[0]&&139===i[1]&&(t=1)}let i;if(1===t){i=new zr.Gunzip(new Uint8Array(e)).decompress()}else i=2===t?function(e,t){const i=[];let n=0,r=0;for(t=t||e.byteLength-18;n<t;)try{const t=new Uint8Array(e,n,18),a=t[11]<<8|t[10],s=(t[12],t[13],t[15],t[14],1+(t[17]<<8|t[16])),o=12+a+n,l=e.byteLength-o,c=s-a-19;if(l<c||c<=0)break;const h=new Uint8Array(e,o,c),f=new zr.RawInflate(h),d=f.decompress();n+=f.ip+26,r+=d.byteLength,i.push(d)}catch(e){console.error(e);break}if(1===i.length)return i[0];{const e=new Uint8Array(r);let t=0;for(let n=0;n<i.length;++n){var a=new Uint8Array(i[n]);Xr(a,0,e,t,a.length),t+=a.length}return e}}(e):new Uint8Array(e);return"TextDecoder"in function(){if("undefined"!=typeof self)return self;return"undefined"!=typeof global?global:window}()?(new TextDecoder).decode(i):function(e){var t="",i=0;for(;i<e.length;){var n=e[i],r=0,a=0;if(n<=127?(r=0,a=255&n):n<=223?(r=1,a=31&n):n<=239?(r=2,a=15&n):n<=244&&(r=3,a=7&n),e.length-i-r>0)for(var s=0;s<r;)a=a<<6|63&(n=e[i+s+1]),s+=1;else a=65533,r=e.length-i;t+=String.fromCodePoint(a),i+=r+1}return t}(i)}var da={color:1};da.parent=da,da.left=da,da.right=da;const ua=new Set(["\t",","]);class pa{constructor(e){this.columns=e.columns,this.columnDefs=e.columnDefs,this.rowHandler=e.rowHandler,this.delimiter=void 0,e.delimiter&&(this.delimiter=e.delimiter),e.data?this.data=e.data:(this.url=e.url,this.isJSON=e.isJSON||!1,this.parser=e.parser,this.filter=e.filter,this.sort=e.sort)}async tableColumns(){return this.columns}async tableData(){if(void 0===this.data){let e;try{e=await ra.loadString(this.url)}catch(e){return void console.error(e)}if(e){let t;return this.parser?t=this.parser.parse(e):this.isJSON?(t=JSON.parse(e),"function"==typeof this.filter&&(t=t.filter(this.filter))):t=this.parseTabData(e,this.filter),"function"==typeof this.sort&&t.sort(this.sort),t}}else{if(Array.isArray(this.data))return this.data;if("json"===pa.getExtension(this.data)||ua.has(ga(this.data,this.delimiter))){const e=pa.getExtension(this.data),t=ga(this.data,this.delimiter);let i;try{i="json"===e?await ra.loadJson(this.data):await ra.loadString(this.data)}catch(e){return void console.error(e)}if(i){if("json"===e)return i;if(t)switch(t){case"\t":return this.parseTabData(i);case",":return function(e){const t=e.split("\n"),i=t.shift().split(",").map((e=>e.trim()));return t.map((e=>{const t=e.split(",").map(((e,t)=>[i[t],e.trim()]));return Object.fromEntries(new Map(t))}))}(i)}}}}}parseTabData(e,t){const i="string"==typeof(n=e)||n instanceof String?new Br(n):new Ir(n);var n;const r=i.nextLine().split("\t"),a=[];let s;for(;s=i.nextLine();){const e={},i=s.split("\t");if(i.length!==r.length)throw Error("Number of values must equal number of headers in file "+this.url);for(let t=0;t<r.length;t++)e[r[t]]=i[t];(void 0===t||t(e))&&a.push(e)}return a}static getExtension(e){let t,i=(e instanceof File?e.name:e).toLowerCase();return t=i.indexOf("?"),t>0&&(i=i.substr(0,t)),t=i.lastIndexOf("."),t<0?i:i.substr(1+t)}}function ga(e,t){return t||function(e){switch(e){case"tab":return"\t";case"csv":return",";default:return}}(pa.getExtension(e))}class wa{constructor(e){this.datasource=e.datasource,this.okHandler=e.okHandler,this.pageLength=e.pageLength||10,e.selectionStyle?this.select={style:e.selectionStyle}:this.select=!0;const t=e.id,i=e.title||"",n=e.parent?$(e.parent):$("body"),r=$(`\n        <div id="${t}" class="modal fade">\n        \n            <div class="modal-dialog modal-xl">\n        \n                <div class="modal-content">\n        \n                    <div class="modal-header">\n                        <div class="modal-title">${i}</div>\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n        \n                    <div class="modal-body">\n        \n                        <div id="${t}-spinner" class="spinner-border" style="display: none;">\n                            \x3c!-- spinner --\x3e\n                        </div>\n        \n                        <div id="${t}-datatable-container">\n        \n                        </div>\n                        \n                        \x3c!-- description --\x3e\n                        <div>\n                        </div>\n                    </div>\n        \n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-sm btn-outline-secondary" data-dismiss="modal">Cancel</button>\n                        <button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal">OK</button>\n                    </div>\n        \n                </div>\n        \n            </div>\n        \n        </div>\n    `);n.append(r),this.$modal=r,this.$datatableContainer=r.find(`#${t}-datatable-container`),this.$spinner=r.find(`#${t}-spinner`);const a=r.find(".modal-footer button:nth-child(2)");r.on("shown.bs.modal",(e=>{this.buildTable()})),r.on("hidden.bs.modal",(e=>{$(e.relatedTarget).find("tr.selected").removeClass("selected")})),a.on("click",(e=>{const t=this.getSelectedTableRowsData.call(this,this.$dataTable.$("tr.selected"));t&&this.okHandler&&this.okHandler(t)}))}setTitle(e){this.$modal.find(".modal-title").text(`${e}`)}setDescription(e){this.$modal.find(".modal-body").children().last().html(`${e}`)}remove(){this.$modal.remove()}setDatasource(e){this.datasource=e,this.$datatableContainer.empty(),this.$table=void 0}async buildTable(){if(!this.$table&&this.datasource){this.$table=$('<table class="display"></table>'),this.$datatableContainer.append(this.$table);try{this.startSpinner();const e=await this.datasource.tableData(),t=await this.datasource.tableColumns(),i=this.datasource.columnDefs,n={data:e,columns:t.map((e=>i&&i[e]?Object.assign({},i[e],{data:e}):{title:e,data:e})),pageLength:this.pageLength,select:this.select,autoWidth:!1,paging:!0,scrollX:!0,scrollY:"400px"};this.api=this.$table.DataTable(n),this.api.columns.adjust().draw(),this.$dataTable=this.$table.dataTable(),this.tableData=e}catch(e){}finally{this.stopSpinner()}}}getSelectedTableRowsData(e){const t=this.tableData,i=[];if(e.length>0){e.removeClass("selected");const n=this.$table.api();if(e.each((function(){const e=n.row(this).index();i.push(t[e])})),"function"==typeof this.datasource.rowHandler){return i.map((e=>{const t=this.datasource.rowHandler(e),i=Object.keys(e).filter((e=>this.datasource.columns.includes(e)));t.metadata={};for(let n of i)t.metadata[n]=e[n];return t}))}return i}}startSpinner(){this.$spinner&&this.$spinner.show()}stopSpinner(){this.$spinner&&this.$spinner.hide()}}function ma(e,t){const i="other"===t?".other.txt.gz":"signals"===t?".signals.txt.gz":void 0;return{isJSON:!1,url:`https://s3.amazonaws.com/igv.org.app/encode/${ya(e)}${i}`,sort:va,columns:["Biosample","AssayType","Target","BioRep","TechRep","OutputType","Format","Lab","Accession","Experiment"],columnDefs:{AssayType:{title:"Assay Type"},OutputType:{title:"Output Type"},BioRep:{title:"Bio Rep"},TechRep:{title:"Tech Rep"}},rowHandler:e=>({name:function(e){let t=e.Biosample||"";e.Target&&(t+=" "+e.Target);"chip-seq"!==e.AssayType.toLowerCase()&&(t+=" "+e.AssayType);return t}(e),url:`https://www.encodeproject.org${e.HREF}`,color:function(e){const t=e.toLowerCase();return t.startsWith("h3k4")?"rgb(0,150,0)":t.startsWith("h3k27")?"rgb(200,0,0)":t.startsWith("h3k36")?"rgb(0,0,150)":t.startsWith("h3k9")?"rgb(100,0,0)":"ctcf"===t?"black":void 0}(e.Target)})}}function ba(e){const t=new Set(["ce10","ce11","dm3","dm6","GRCh38","hg19","mm9","mm10"]),i=ya(e);return t.has(i)}function ya(e){switch(e){case"hg38":return"GRCh38";case"CRCh37":return"hg19";case"GRCm38":return"mm10";case"NCBI37":return"mm9";case"WBcel235":return"ce11";case"WS220":return"ce10";default:return e}}function va(e,t){var i,n,r,a,s,o;return i=e["Assay Type"],n=t["Assay Type"],r=e.Biosample,a=t.Biosample,s=e.Target,o=t.Target,i===n?r===a?s===o?0:s<o?-1:1:r<a?-1:1:i<n?-1:1}let _a,ka,xa,Ea,Sa=[];const Ra={selectionStyle:"multi",pageLength:100};function Ta(e,t,i,n,r,a,s,o,l,c,h,f,d){const u=(e=>{const t=`<div id="${e}" class="modal">\n\n            <div class="modal-dialog modal-lg">\n    \n                <div class="modal-content">\n    \n                    <div class="modal-header">\n                        <div class="modal-title">Track URL</div>\n    \n                        <button type="button" class="close" data-dismiss="modal">\n                            <span>&times;</span>\n                        </button>\n    \n                    </div>\n    \n                    <div class="modal-body">\n                    </div>\n    \n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-sm btn-outline-secondary" data-dismiss="modal">Cancel</button>\n                        <button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal">OK</button>\n                    </div>\n    \n                </div>\n    \n            </div>\n\n        </div>`;return document.createRange().createContextualFragment(t).firstChild})(l);e.get(0).appendChild(u);let p={widgetParent:u.querySelector(".modal-body"),dataTitle:"Track",indexTitle:"Index",mode:"url",fileLoadManager:new gr,dataOnly:!1,doURL:!0};_a=new mr(p),Tr(_a,u,(async e=>{const t=e.retrievePaths();return await ka.loadPaths(t),!0})),a||s.parent().hide();ka=new yr({$localFileInput:i,initializeDropbox:n,$dropboxButton:r,$googleDriveButton:a?s:void 0,fileLoadHandler:d,multipleFileSelection:!0});for(let e of o){const t={id:e,title:"ENCODE",selectionStyle:"multi",pageLength:100,okHandler:d};Sa.push(new wa(t))}if(xa=new wa({id:"igv-custom-modal",title:"UNTITLED",okHandler:d,...Ra}),c){Ea=$(`<div id="${c}" class="modal">\n\n                <div class="modal-dialog modal-lg">\n    \n                    <div class="modal-content">\n    \n                        <div class="modal-header">\n                            <div class="modal-title"></div>\n                            <button type="button" class="close" data-dismiss="modal">\n                                <span>&times;</span>\n                            </button>\n                        </div>\n            \n                        <div class="modal-body">\n                            <div class="form-group">\n                                <select id="${`${c}-select`}" class="form-control" multiple></select>\n                            </div>\n                            <div id="igv-widgets-generic-select-modal-footnotes"></div>\n                        </div>\n                        \n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-sm btn-outline-secondary" data-dismiss="modal">Cancel</button>\n                            <button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal">OK</button>\n                        </div>\n    \n                    </div>\n    \n                </div>\n\n            </div>`),e.append(Ea);const t=Ea.find("select");Ea.find(".modal-footer button:nth-child(1)").on("click",(()=>Ea.modal("hide")));const i=Ea.find(".modal-footer button:nth-child(2)"),n=()=>{const e=[];t.find("option:selected").each((function(){e.push($(this).data("track")),$(this).removeAttr("selected")})),e.length>0&&d(e),Ea.modal("hide")};i.on("click",n),Ea.get(0).addEventListener("keypress",(e=>{"Enter"===e.key&&n()}))}}async function Da(e,t,i,n){const r="genome_specific_",a=n.find(".dropdown-divider");n.find("[id^=genome_specific_]").remove();const s=await async function(e,t){let i;try{i=await fetch(t)}catch(e){console.error(e)}let n;if(!i){const e=new Error("Error retrieving registry via getPathsWithTrackRegistryFile()");throw pr.present(e.message),e}n=await i.json();return n[e]}(e,i);if(void 0===s)return void console.warn(`There are no tracks in the track registryy for genome ${e}`);let o=[];try{o=await Promise.all(s.map((e=>fetch(e))))}catch(e){pr.present(e.message)}let l=[];try{l=await Promise.all(o.map((e=>e.json())))}catch(e){pr.present(e.message)}let c=[];for(let i of l){if(!0===ba(e)&&"ENCODE"===i.type)Sa[0].setDatasource(new pa(ma(e,"signals"))),Sa[1].setDatasource(new pa(ma(e,"other")));else if(t&&"GTEX"===i.type){let e;try{e=await t.getTissueInfo(i.datasetId)}catch(e){pr.present(e.message)}e&&(i.tracks=e.tissueInfo.map((e=>t.trackConfiguration(e))))}c.push(i)}for(let t of c.reverse())t.type&&"custom-data-modal"===t.type?(t.description&&xa.setDescription(t.description),Ca(a,t.label,r).on("click",(()=>{xa.setDatasource(new pa(t)),xa.setTitle(t.label),xa.$modal.modal("show")}))):t.type&&"ENCODE"===t.type?!0===ba(e)&&(t.description&&(Sa[0].setDescription(t.description),Sa[1].setDescription(t.description)),Ca(a,"ENCODE Other",r).on("click",(()=>{Sa[1].$modal.modal("show")})),Ca(a,"ENCODE Signals",r).on("click",(()=>{Sa[0].$modal.modal("show")}))):Ea&&Ca(a,t.label,r).on("click",(()=>{Aa(Ea,t),Ea.modal("show")}))}function Ca(e,t,i){const n=$("<button>",{class:"dropdown-item",type:"button"});return n.text(`${t} ...`),n.attr("id",`${i}${t.toLowerCase().split(" ").join("_")}`),n.insertAfter(e),n}function Aa(e,t){e.find(".modal-title").text(`${t.label}`);let i=e.find("select");i.empty(),t.tracks.reduce(((e,t)=>{const n=$("<option>",{value:t.name,text:t.name});return i.append(n),n.data("track",t),e.append(n),e}),i),t.description&&e.find("#igv-widgets-generic-select-modal-footnotes").html(t.description)}const La=()=>window.btoa('<svg width="75px" height="64px" viewBox="0 0 75 64" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <title>Shape</title>\n        <desc>Created with Sketch.</desc>\n        <defs></defs>\n        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n            <g id="dropbox" fill="#0061FF" fill-rule="nonzero">\n                <path d="M37.6,12 L18.8,24 L37.6,36 L18.8,48 L1.42108547e-14,35.9 L18.8,23.9 L1.42108547e-14,12 L18.8,0 L37.6,12 Z M18.7,51.8 L37.5,39.8 L56.3,51.8 L37.5,63.8 L18.7,51.8 Z M37.6,35.9 L56.4,23.9 L37.6,12 L56.3,0 L75.1,12 L56.3,24 L75.1,36 L56.3,48 L37.6,35.9 Z" id="Shape"></path>\n            </g>\n        </g>\n    </svg>'),Ba=()=>window.btoa('<svg viewBox="0 0 139 120.4" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><radialGradient id="a" cx="-254.81979" cy="705.83588" gradientTransform="matrix(2.827 1.6322 -1.6322 2.827 2092.1199 -1494.5786)" gradientUnits="userSpaceOnUse" r="82.978401"><stop offset="0" stop-color="#4387fd"/><stop offset=".65" stop-color="#3078f0"/><stop offset=".9099" stop-color="#2b72ea"/><stop offset="1" stop-color="#286ee6"/></radialGradient><radialGradient id="b" cx="-254.8174" cy="705.83691" gradientTransform="matrix(2.827 1.6322 -1.6322 2.827 2092.1199 -1494.5786)" gradientUnits="userSpaceOnUse" r="82.973"><stop offset="0" stop-color="#ffd24d"/><stop offset="1" stop-color="#f6c338"/></radialGradient><path d="m24.2 120.4-24.2-41.9 45.3-78.5 24.2 41.9z" fill="#0da960"/><path d="m24.2 120.4 24.2-41.9h90.6l-24.2 41.9z" fill="url(#a)"/><path d="m139 78.5h-48.4l-45.3-78.5h48.4z" fill="url(#b)"/><path d="m69.5 78.5h-21.1l10.5-18.3-34.7 60.2z" fill="#2d6fdd"/><path d="m90.6 78.5h48.4l-58.9-18.3z" fill="#e5b93c"/><path d="m58.9 60.2 10.6-18.3-24.2-41.9z" fill="#0c9b57"/></svg>');if("undefined"!=typeof document){function e(e){for(let t of document.styleSheets)if(t=t.href?t.href.replace(/^.*[\\\/]/,""):"",t===e)return!0;return!1}e("igv-widgets.css")||((Ia=document.createElement("style")).setAttribute("type","text/css"),Ia.innerHTML='.igv-widgets-alert-dialog-container {\n  box-sizing: content-box;\n  position: absolute;\n  z-index: 2048;\n  top: 50%;\n  left: 50%;\n  width: 400px;\n  height: 200px;\n  border-color: #7F7F7F;\n  border-radius: 4px;\n  border-style: solid;\n  border-width: thin;\n  outline: none;\n  font-family: "Open Sans", sans-serif;\n  font-size: 15px;\n  font-weight: 400;\n  background-color: white;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  align-items: center; }\n  .igv-widgets-alert-dialog-container > div:first-child {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    align-items: center;\n    width: 100%;\n    height: 24px;\n    cursor: move;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-color: #7F7F7F;\n    border-bottom-style: solid;\n    border-bottom-width: thin;\n    background-color: #eee; }\n    .igv-widgets-alert-dialog-container > div:first-child div:first-child {\n      padding-left: 8px; }\n  .igv-widgets-alert-dialog-container #igv-widgets-alert-dialog-body {\n    color: #373737;\n    width: 100%;\n    height: calc(100% - 24px - 64px);\n    overflow-y: scroll; }\n    .igv-widgets-alert-dialog-container #igv-widgets-alert-dialog-body #igv-widgets-alert-dialog-body-copy {\n      cursor: pointer;\n      margin: 16px;\n      width: auto;\n      height: auto;\n      overflow-wrap: break-word;\n      word-break: break-word;\n      background-color: white;\n      border: unset; }\n  .igv-widgets-alert-dialog-container > div:last-child {\n    width: 100%;\n    margin-bottom: 10px;\n    background-color: white;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: center;\n    align-items: center; }\n    .igv-widgets-alert-dialog-container > div:last-child div {\n      margin: unset;\n      width: 40px;\n      height: 30px;\n      line-height: 30px;\n      text-align: center;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: small;\n      font-weight: 400;\n      border-color: #2B81AF;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 4px;\n      background-color: #2B81AF; }\n    .igv-widgets-alert-dialog-container > div:last-child div:hover {\n      cursor: pointer;\n      border-color: #25597f;\n      background-color: #25597f; }\n\n.igv-file-load-widget-container {\n  position: relative;\n  border-color: transparent;\n  width: 100%;\n  color: #7F7F7F;\n  font-family: "Open Sans", sans-serif;\n  font-size: 0.875rem;\n  font-weight: 200;\n  border-style: solid;\n  border-width: thin;\n  background-color: white;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-file-load-widget-container .igv-file-load-widget-header {\n    width: 100%;\n    height: 24px;\n    background-color: #bfbfbf;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center; }\n    .igv-file-load-widget-container .igv-file-load-widget-header div {\n      height: 24px;\n      width: 16px;\n      margin-right: 6px;\n      text-align: center;\n      line-height: 24px;\n      color: #373737; }\n    .igv-file-load-widget-container .igv-file-load-widget-header div:hover {\n      cursor: pointer; }\n  .igv-file-load-widget-container .igv-flw-input-container {\n    width: 95%;\n    margin-top: 24px;\n    margin-bottom: 0;\n    display: flex;\n    flex-flow: column;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    align-items: center; }\n    .igv-file-load-widget-container .igv-flw-input-container .igv-flw-input-row {\n      height: 36px;\n      width: 100%;\n      margin-top: 8px;\n      padding-top: 4px;\n      padding-bottom: 4px;\n      display: flex;\n      flex-flow: row;\n      flex-wrap: nowrap;\n      justify-content: flex-start;\n      align-items: center;\n      border-color: white;\n      border-style: solid;\n      border-width: thin;\n      border-radius: calc(2 * 2px); }\n      .igv-file-load-widget-container .igv-flw-input-container .igv-flw-input-row .igv-flw-input-label {\n        color: #6c757c;\n        font-weight: 400;\n        width: 136px;\n        height: 36px;\n        line-height: 36px;\n        text-align: left; }\n      .igv-file-load-widget-container .igv-flw-input-container .igv-flw-input-row input {\n        display: block;\n        height: 100%;\n        width: 100%;\n        padding-left: 4px;\n        color: #373737;\n        font-size: 0.875rem;\n        font-family: "Open Sans", sans-serif;\n        font-weight: 400;\n        text-align: left;\n        outline: none;\n        border-style: solid;\n        border-width: thin;\n        border-color: #dee2e6;\n        border-radius: .25rem;\n        background-color: white; }\n      .igv-file-load-widget-container .igv-flw-input-container .igv-flw-input-row input {\n        height: calc(36px - 12px); }\n      .igv-file-load-widget-container .igv-flw-input-container .igv-flw-input-row .igv-flw-file-chooser-container {\n        display: flex;\n        flex-flow: row;\n        justify-content: center;\n        align-items: center;\n        width: 130px;\n        height: calc(36px - 8px);\n        border-color: #6c757c;\n        border-style: solid;\n        border-width: thin;\n        border-radius: calc(2 * 2px);\n        background-color: white; }\n        .igv-file-load-widget-container .igv-flw-input-container .igv-flw-input-row .igv-flw-file-chooser-container label {\n          display: block;\n          margin: unset; }\n        .igv-file-load-widget-container .igv-flw-input-container .igv-flw-input-row .igv-flw-file-chooser-container label.igv-flw-label-color {\n          color: #6c757c; }\n        .igv-file-load-widget-container .igv-flw-input-container .igv-flw-input-row .igv-flw-file-chooser-container label.igv-flw-label-color-hover {\n          cursor: pointer; }\n        .igv-file-load-widget-container .igv-flw-input-container .igv-flw-input-row .igv-flw-file-chooser-container input.igv-flw-file-chooser-input {\n          width: 0.1px;\n          height: 0.1px;\n          opacity: 0;\n          overflow: hidden;\n          position: absolute;\n          z-index: -1; }\n      .igv-file-load-widget-container .igv-flw-input-container .igv-flw-input-row .igv-flw-file-chooser-container:hover {\n        cursor: pointer;\n        background-color: #6c757c; }\n      .igv-file-load-widget-container .igv-flw-input-container .igv-flw-input-row .igv-flw-drag-drop-target {\n        cursor: default;\n        margin-left: 8px;\n        width: 120px;\n        height: calc(36px - 8px);\n        line-height: calc(36px - 8px);\n        text-align: center;\n        border-color: #7F7F7F;\n        border-style: dashed;\n        border-width: thin;\n        border-radius: calc(2 * 2px); }\n      .igv-file-load-widget-container .igv-flw-input-container .igv-flw-input-row .igv-flw-local-file-name-container {\n        max-width: 400px;\n        height: 36px;\n        color: #373737;\n        line-height: 36px;\n        text-align: left;\n        font-weight: 400;\n        margin-left: 8px;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis; }\n    .igv-file-load-widget-container .igv-flw-input-container .igv-flw-input-row-hover-state {\n      background-color: #efefef;\n      border-color: #7F7F7F; }\n  .igv-file-load-widget-container .igv-flw-error-message-container {\n    margin-top: 8px;\n    width: 95%;\n    height: 24px;\n    padding-left: 8px;\n    color: white;\n    font-size: 0.875rem;\n    background-color: rgba(59, 92, 127, 0.5);\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-between;\n    align-items: center; }\n    .igv-file-load-widget-container .igv-flw-error-message-container div:first-child.igv-flw-error-message {\n      height: 24px;\n      width: 600px;\n      font-style: italic;\n      line-height: 24px;\n      text-align: left; }\n    .igv-file-load-widget-container .igv-flw-error-message-container div:last-child {\n      height: 24px;\n      width: 16px;\n      margin-right: 6px;\n      text-align: center;\n      line-height: 24px;\n      color: #373737; }\n    .igv-file-load-widget-container .igv-flw-error-message-container div:hover {\n      cursor: pointer; }\n  .igv-file-load-widget-container .igv-file-load-widget-ok-cancel {\n    width: 100%;\n    height: 28px;\n    margin-top: 32px;\n    color: white;\n    font-size: 0.875rem;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center; }\n    .igv-file-load-widget-container .igv-file-load-widget-ok-cancel div {\n      width: 75px;\n      height: 28px;\n      line-height: 28px;\n      text-align: center;\n      border-color: transparent;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 2px;\n      margin-right: 16px; }\n    .igv-file-load-widget-container .igv-file-load-widget-ok-cancel div:first-child {\n      margin-right: 22px;\n      background-color: #c4c4c4; }\n    .igv-file-load-widget-container .igv-file-load-widget-ok-cancel div:first-child:hover {\n      cursor: pointer;\n      background-color: #7f7f7f; }\n    .igv-file-load-widget-container .igv-file-load-widget-ok-cancel div:last-child {\n      background-color: #5ea4e0; }\n    .igv-file-load-widget-container .igv-file-load-widget-ok-cancel div:last-child:hover {\n      cursor: pointer;\n      background-color: #3b5c7f; }\n\n/*# sourceMappingURL=igv-widgets.css.map */\n',document.head.insertBefore(Ia,document.head.childNodes[document.head.childNodes.length-1]))}var Ia;const za={};let Oa,Ua;async function Ma(e,t,i){try{const n=await async function(e){if(void 0===e)return;if(Array.isArray(e))return Fa(e);{let t;try{t=await fetch(e)}catch(e){pr.present(e.message)}if(t){return Fa(await t.json())}}}(t);n&&function(e){let{browser:t,genomeMap:i,$dropdown_menu:n}=e,r=n.find(".dropdown-divider");r.nextAll().remove();for(let[e,n]of i){const i=a(n.name);i.insertAfter(r),i.data("id",e);const s=`click.genome-dropdown.${e}`;i.on(s,(async()=>{i.data("id")!==t.genome.id&&await Ha(n)}))}function a(e){let t=$("<button>",{class:"dropdown-item",type:"button"});return t.text(e),t}}({browser:e,genomeMap:n,$dropdown_menu:i})}catch(e){pr.present(e.message)}}function Fa(e){const t=new Map;if(!0===Array.isArray(e))for(let i of e.reverse())t.set(i.id,i);else t.set(e.id,e);return t}async function Ha(e){let t;try{e.tracks?e.tracks.push({type:"sequence",order:Number.MIN_SAFE_INTEGER}):e.tracks=[{type:"sequence",order:Number.MIN_SAFE_INTEGER}],t=await za.browser.loadGenome(e),t.id&&localStorage.setItem("genomeID",t.id)}catch(e){console.error(e),pr.present(e)}t&&ji.globalBus.post({type:"DidChangeGenome",data:t.id})}function Na(e){let t;var i,n;return"function"==typeof e?t=e:e.provider?"tinyURL"===e.provider?t=function(e){let{endpoint:t}=e;return t=t||"https://2et6uxfezb.execute-api.us-east-1.amazonaws.com/dev/tinyurl/",async function(e){const i=encodeURIComponent(e),n=await fetch(`${t}${i}`);if(n.ok)return n.text();throw new Error(n.statusText)}}(e):"bitly"===e.provider&&e.apiKey?t=(n=e.apiKey)&&"BITLY_TOKEN"!==n?async function(e){e.startsWith("http://localhost")&&(e=e.replace("localhost","192.168.1.11"));let t="https://api-ssl.bitly.com/v3/shorten?access_token="+n+"&longUrl="+encodeURIComponent(e);return Fi.loadJson(t,{}).then((function(e){return e.data.url}))}:void 0:"google"===e.provider&&e.apiKey?t=(i=e.apiKey)&&"API_KEY"!==i?async function(e){const t="https://www.googleapis.com/urlshortener/v1/url?key="+i;return Fi.loadJson(t,{sendData:JSON.stringify({longUrl:e}),contentType:"application/json"}).then((function(e){return e.id}))}:void 0:pr.present(new Error(`Unknown URL shortener provider: ${e.provider}`)):pr.present(new Error("URL shortener object must either be an object specifying a provider and apiKey, or a function")),t&&(Ua={shortenURL:t}),t}function Pa(e,t){return function(e){return Ua?Ua.shortenURL(e):Promise.resolve(e)}(e+"?sessionURL=blob:"+t)}$(document).ready((async()=>qa(document.getElementById("igv-app-container"),igvwebConfig)));let $a,Za=!1,Ka=!1;async function qa(e,i){pr.init(e),$("#igv-app-version").text("IGV-Web app version 1.9.0"),$("#igv-igvjs-version").text(`igv.js version ${igv.version()}`),i.enableCircularView&&await async function(){return new Promise(((e,t)=>{const i=document.createElement("script");i.setAttribute("src","https://unpkg.com/react@16/umd/react.development.js"),i.addEventListener("load",(()=>{document.head.appendChild(n)}));const n=document.createElement("script");n.setAttribute("src","https://unpkg.com/react-dom@16/umd/react-dom.development.js"),n.addEventListener("load",(()=>{document.head.appendChild(r)}));const r=document.createElement("script");r.setAttribute("src","https://unpkg.com/@jbrowse/react-circular-genome-view/dist/react-circular-genome-view.umd.production.min.js"),r.addEventListener("load",(()=>{e(!0)})),document.head.appendChild(i)}))}();if((i.clientId||i.apiKey)&&("https:"===window.location.protocol||"localhost"===window.location.host)){try{await l({client_id:i.clientId,apiKey:i.apiKey,scope:"https://www.googleapis.com/auth/userinfo.profile"}),Ka=!0}catch(e){console.error(e),pr.present(e.message)}const e=gapi.auth2.getAuthInstance().isSignedIn.get();if(!0===e){Ga(gapi.auth2.getAuthInstance().currentUser.get(),e)}gapi.auth2.getAuthInstance().isSignedIn.listen((e=>{Ga(gapi.auth2.getAuthInstance().currentUser.get(),e)}))}if(i.genomes){let e=await async function(e){if(void 0===e)return;if(Array.isArray(e))return e;{let t;try{return t=await fetch(e),t.json()}catch(e){pr.present(e.message)}}}(i.genomes);i.genomes=e,i.igvConfig.genomes=e}const n=i.igvConfig;if(i.restoreLastGenome){const e=localStorage.getItem("genomeID");e&&e!==n.genome&&i.genomes.hasOwnProperty(e)&&(n.genome=e,n.tracks=[])}const r=await igv.createBrowser(e,n);r&&(za.browser=r,await async function(e,i,n){if(!0===Ka){const e=document.querySelector("#igv-google-drive-dropdown-toggle");document.querySelector("#igv-google-drive-sign-out-button").addEventListener("click",(async()=>{await async function(){return gapi.auth2.getAuthInstance().signOut()}(),e.style.display="none"}))}["track","genome"].forEach((e=>{let t;t=document.querySelector(`img#igv-app-${e}-dropbox-button-image`),n.dropboxAPIKey?t.src=`data:image/svg+xml;base64,${La()}`:(t=document.querySelector(`#igv-app-dropdown-dropbox-${e}-file-button`),t.parentElement.style.display="none"),t=document.querySelector(`img#igv-app-${e}-google-drive-button-image`),t.src=`data:image/svg+xml;base64,${Ba()}`})),n.dropboxAPIKey&&$("div#igv-session-dropdown-menu > :nth-child(1)").after(`<div class="dropdown-item">\n                <div id="${"igv-app-dropdown-dropbox-session-file-button"}" class="igv-app-dropdown-item-cloud-storage">\n                    <div>Dropbox File</div>\n                    <div>\n                        <img src="data:image/svg+xml;base64,${La()}" width="18" height="18">\n                    </div>\n                </div>\n            </div>`);$("div#igv-session-dropdown-menu > :nth-child(2)").after((e=>`<div class="dropdown-item">\n                <div id="${e}" class="igv-app-dropdown-item-cloud-storage">\n                    <div>Google Drive File</div>\n                    <div>\n                        <img src="data:image/svg+xml;base64,${Ba()}" width="18" height="18">\n                    </div>\n                </div>\n            </div>`)("igv-app-dropdown-google-drive-session-file-button"));const r=$("#igv-main"),a={localFileInput:document.getElementById("igv-app-dropdown-local-genome-file-input"),initializeDropbox:Wa,dropboxButton:n.dropboxAPIKey?document.getElementById("igv-app-dropdown-dropbox-genome-file-button"):void 0,googleEnabled:Ka,googleDriveButton:document.getElementById("igv-app-dropdown-google-drive-genome-file-button"),loadHandler:async t=>{t.id!==e.genome.id&&await Ha(t)},igvxhr:Fi};(function(e){let{$igvMain:t,urlModalId:i,genomeFileLoad:n}=e;const r=$(Cr(i,"Genome URL"));t.append(r);let a={widgetParent:r.find(".modal-body").get(0),dataTitle:"Genome",indexTitle:"Index",mode:"url",fileLoadManager:new gr,dataOnly:!1,doURL:!0};Oa=new mr(a),Dr.configureModal(Oa,r.get(0),(async e=>{try{await n.loadPaths(e.retrievePaths())}catch(e){console.error(e),pr.present(e)}}))})({$igvMain:r,urlModalId:"igv-app-genome-from-url-modal",genomeFileLoad:new Sr(a)}),await Ma(e,n.genomes,$("#igv-app-genome-dropdown-menu"));const s=async t=>{try{await e.loadTrackList(t)}catch(e){console.error(e),pr.present(e)}};Ta(r,$("#igv-app-track-dropdown-menu"),$("#igv-app-dropdown-local-track-file-input"),Wa,n.dropboxAPIKey?$("#igv-app-dropdown-dropbox-track-file-button"):void 0,Ka,$("#igv-app-dropdown-google-drive-track-file-button"),["igv-app-encode-signal-modal","igv-app-encode-others-modal"],"igv-app-track-from-url-modal","igv-app-track-select-modal",0,n.trackRegistryFile,s);const o=()=>{try{return e.toJSON()}catch(e){return console.error(e),void pr.present(e)}},l=async t=>{try{await e.loadSession(t)}catch(e){console.error(e),pr.present(e)}};Lr(r,"igv-webapp","igv-app-dropdown-local-session-file-input",Wa,n.dropboxAPIKey?"igv-app-dropdown-dropbox-session-file-button":void 0,"igv-app-dropdown-google-drive-session-file-button","igv-app-session-url-modal","igv-app-session-save-modal",Ka,l,o),n.sessionRegistryFile?await async function(e,i,n){let r;try{r=await fetch(i)}catch(e){console.error(e)}let a;if(!r){const e=new Error("Error retrieving session registry");throw pr.present(e.message),e}a=await r.json();const s="session_file",o=`[id^=${s}]`,l=document.querySelectorAll(o);if(l.length>0)for(let e=0;e<l.length;e++)l[e].remove();if(a){const i=a.sessions;for(let{name:r,url:a}of i.reverse()){const i=document.getElementById(e),o=`${s}_${t()}`,l=`<button id="${o}" class="dropdown-item" type="button">${r}</button>`,c=document.createRange().createContextualFragment(l);i.after(c.firstChild);document.getElementById(o).addEventListener("click",(()=>{const e={};e[!0===p(a)?"file":"url"]=a,n(e)}))}}}("igv-session-list-divider",n.sessionRegistryFile,l):document.querySelector("#igv-session-list-divider").style.display="none";(function(e){let{browser:t,saveModal:i}=e;const n="igv-app.svg",r=i.querySelector("input");$(i).on("show.bs.modal",(()=>r.value=n)),$(i).on("hidden.bs.modal",(()=>r.value=n));const a=()=>{let e=r.value;void 0===e||""===e?e=r.getAttribute("placeholder"):e.endsWith(".svg")||(e+=".svg"),$(i).modal("hide"),t.saveSVGtoFile({filename:e})};i.querySelector(".modal-footer button:nth-child(2)").addEventListener("click",a),r.addEventListener("keyup",(e=>{13===e.keyCode&&a()}));let s=i.querySelector(".modal-header button");s.addEventListener("click",(()=>$(i).modal("hide"))),s=i.querySelector(".modal-footer button:nth-child(1)"),s.addEventListener("click",(()=>$(i).modal("hide")))})({browser:e,saveModal:document.getElementById("igv-app-svg-save-modal")}),function(e){let{browser:t,container:i,modal:n,share_input:r,copy_link_button:a,tweet_button_container:s,email_button:o,qrcode_button:l,qrcode_image:c,embed_container:h,embed_button:f,embedTarget:d}=e;void 0===d&&(d=`https://igv.org/web/release/${igv.version()}/embed.html`),$(n).on("shown.bs.modal",(async()=>{let e=window.location.href.slice();const a=e.indexOf("?");let l;a>0&&(e=e.substring(0,a));try{l=t.compressedSession()}catch(e){pr.present(e.message)}if(l){if(d){const e=function(e,t,i){return'<iframe src="'+`${t}?sessionURL=blob:${i}`+'" style="width:100%; height:'+(e.clientHeight+50)+'px"  allowfullscreen></iframe>'}(i,d,l),t=h.querySelector("textarea");t.value=e,t.select()}const t=await Pa(e,l);r.value=t,r.select(),o.setAttribute("href",`mailto:?body=${t}`),c.innerHTML="",new wn(c,{width:128,height:128,correctLevel:wn.CorrectLevel.H}).makeCode(t),s&&(s.innerHTML="",window.twttr.widgets.createShareButton(t,s,{text:""}))}else $(n).modal("hide")})),$(n).on("hidden.bs.modal",(()=>{h.style.display="none",c.style.display="none"})),a.addEventListener("click",(()=>{r.select(),document.execCommand("copy")?$(n).modal("hide"):console.error("fail!")})),void 0===d?f.style.display="none":(h.querySelector("button").addEventListener("click",(()=>{h.querySelector("textarea").select(),document.execCommand("copy")?$(n).modal("hide"):console.error("fail!")})),f.addEventListener("click",(()=>{c.style.display="none","block"===h.style.display?h.style.display="none":h.style.display="block"})));l.addEventListener("click",(()=>{h.style.display="none","block"===c.style.display?c.style.display="none":c.style.display="block"}))}(function(e,t,i){let n,{urlShortener:r,embedTarget:a}=i;r&&(n=void 0!==Na(r));let s=document.getElementById("igv-app-tweet-button-container");return n||(s.style.display="none"),{browser:e,container:t,modal:document.getElementById("igv-app-share-modal"),share_input:document.getElementById("igv-app-share-input"),copy_link_button:document.getElementById("igv-app-copy-link-button"),tweet_button_container:n?s:void 0,email_button:document.getElementById("igv-app-email-button"),qrcode_button:document.getElementById("igv-app-qrcode-button"),qrcode_image:document.getElementById("igv-app-qrcode-image"),embed_container:document.getElementById("igv-app-embed-container"),embed_button:document.getElementById("igv-app-embed-button"),embedTarget:a}}(e,i,n)),c=$("#igv-app-bookmark-button"),c.on("click",(e=>{let t;try{t=function(){let e,t,i;return t=window.location.href.slice(),i=t.indexOf("?"),e=(i>0?t.substring(0,i):t)+"?sessionURL=blob:"+za.browser.compressedSession(),e}()}catch(e){pr.present(e.message)}if(t){window.history.pushState({},"IGV",t);const e=/Mac/i.test(navigator.userAgent)?"Cmd":"Ctrl";alert("A bookmark URL has been created. Press "+e+"+D to save.")}}));var c;const h=async e=>{const{data:t}=e;$a!==t&&($a=t,await Da(t,void 0,n.trackRegistryFile,$("#igv-app-track-dropdown-menu")))};if(!0===n.enableCircularView){const t=document.getElementById("igv-circular-view-container");e.createCircularView(t,!1),Ci(t,e.circularView.toolbar),e.circularView.setSize(512),document.getElementById("igv-app-circular-view-nav-item").style.display="block";document.getElementById("igv-app-circular-view-dropdown-button").addEventListener("click",(t=>{document.getElementById("igv-app-circular-view-presentation-button").innerText=e.circularViewVisible?"Hide":"Show",document.getElementById("igv-app-circular-view-resize-button").style.display=e.circularViewVisible?"block":"none",document.getElementById("igv-app-circular-view-clear-chords-button").style.display=e.circularViewVisible?"block":"none"})),document.getElementById("igv-app-circular-view-presentation-button").addEventListener("click",(t=>{e.circularViewVisible=!e.circularViewVisible;const i=t.target.innerText;t.target.innerText="Show"===i?"Hide":"Show"})),document.getElementById("igv-app-circular-view-clear-chords-button").addEventListener("click",(()=>e.circularView.clearChords())),document.getElementById("igv-main").appendChild(function(e,t){const i=`<div id="${e}" class="modal">\n\n            <div class="modal-dialog modal-sm">\n    \n                <div class="modal-content">\n    \n                    <div class="modal-header">\n                        <div class="modal-title">${t}</div>\n    \n                        <button type="button" class="close" data-dismiss="modal">\n                            <span>&times;</span>\n                        </button>\n    \n                    </div>\n    \n                    <div class="modal-body">\n                          <div class="form-group">\n                            <input id="igv-app-circular-view-resize-modal-input" type="text" class="form-control">\n                          </div>\n                    </div>\n        \n                </div>\n    \n            </div>\n\n        </div>`;return document.createRange().createContextualFragment(i).firstChild}("igv-app-circular-view-resize-modal","Resize Circular View")),document.getElementById("igv-app-circular-view-resize-modal-input").addEventListener("keyup",(t=>{t.preventDefault(),t.stopPropagation(),13===t.keyCode&&e.circularView.setSize(Number.parseInt(t.target.value))})),$("#igv-app-circular-view-resize-modal").on("shown.bs.modal",(()=>document.getElementById("igv-app-circular-view-resize-modal-input").value=t.clientWidth.toString()))}ji.globalBus.subscribe("DidChangeGenome",h),ji.globalBus.post({type:"DidChangeGenome",data:e.genome.id})}(r,e,i))}function Ga(e,t){if(!0===t){const t=e.getBasicProfile().getEmail();document.querySelector("#igv-google-drive-dropdown-toggle").style.display="block";document.querySelector("#igv-google-drive-sign-out-button").innerHTML=`Sign Out ${t}`}}let ja=!1;async function Wa(){return!0===ja&&!1===Za?Promise.resolve(!1):!0===Za?Promise.resolve(!0):new Promise(((e,t)=>{ja=!0;const i=document.createElement("script");i.setAttribute("src","https://www.dropbox.com/static/api/2/dropins.js"),i.setAttribute("id","dropboxjs"),i.dataset.appKey=igvwebConfig.dropboxAPIKey,i.setAttribute("type","text/javascript"),document.head.appendChild(i),i.addEventListener("load",(()=>{Za=!0,e(!0)}))}))}e.main=qa,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=app_bundle-1.9.0.min.js.map
